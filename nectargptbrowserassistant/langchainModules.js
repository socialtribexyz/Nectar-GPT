"use strict";(()=>{var Ah=Object.create;var Gi=Object.defineProperty;var Th=Object.getOwnPropertyDescriptor;var Eh=Object.getOwnPropertyNames;var Ih=Object.getPrototypeOf,Ch=Object.prototype.hasOwnProperty;var un=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var R=(r,e)=>()=>(r&&(e=r(r=0)),e);var M=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ye=(r,e)=>{for(var t in e)Gi(r,t,{get:e[t],enumerable:!0})},Sh=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Eh(e))!Ch.call(r,s)&&s!==t&&Gi(r,s,{get:()=>e[s],enumerable:!(n=Th(e,s))||n.enumerable});return r};var De=(r,e,t)=>(t=r!=null?Ah(Ih(r)):{},Sh(e||!r||!r.__esModule?Gi(t,"default",{value:r,enumerable:!0}):t,r));var Xi=M((Jw,hu)=>{"use strict";hu.exports=function(e,t){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return e.apply(t,s)}}});var Ee=M((Yw,bu)=>{"use strict";var jh=Xi(),Tt=Object.prototype.toString;function ra(r){return Array.isArray(r)}function ea(r){return typeof r>"u"}function kh(r){return r!==null&&!ea(r)&&r.constructor!==null&&!ea(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function fu(r){return Tt.call(r)==="[object ArrayBuffer]"}function Rh(r){return Tt.call(r)==="[object FormData]"}function Mh(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&fu(r.buffer),e}function Nh(r){return typeof r=="string"}function Lh(r){return typeof r=="number"}function mu(r){return r!==null&&typeof r=="object"}function $n(r){if(Tt.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function Dh(r){return Tt.call(r)==="[object Date]"}function qh(r){return Tt.call(r)==="[object File]"}function Uh(r){return Tt.call(r)==="[object Blob]"}function yu(r){return Tt.call(r)==="[object Function]"}function Vh(r){return mu(r)&&yu(r.pipe)}function Fh(r){return Tt.call(r)==="[object URLSearchParams]"}function Bh(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function zh(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function na(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),ra(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.call(null,r[s],s,r)}function ta(){var r={};function e(s,i){$n(r[i])&&$n(s)?r[i]=ta(r[i],s):$n(s)?r[i]=ta({},s):ra(s)?r[i]=s.slice():r[i]=s}for(var t=0,n=arguments.length;t<n;t++)na(arguments[t],e);return r}function Kh(r,e,t){return na(e,function(s,i){t&&typeof s=="function"?r[i]=jh(s,t):r[i]=s}),r}function Zh(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}bu.exports={isArray:ra,isArrayBuffer:fu,isBuffer:kh,isFormData:Rh,isArrayBufferView:Mh,isString:Nh,isNumber:Lh,isObject:mu,isPlainObject:$n,isUndefined:ea,isDate:Dh,isFile:qh,isBlob:Uh,isFunction:yu,isStream:Vh,isURLSearchParams:Fh,isStandardBrowserEnv:zh,forEach:na,merge:ta,extend:Kh,trim:Bh,stripBOM:Zh}});var sa=M((Ww,wu)=>{"use strict";var mr=Ee();function gu(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}wu.exports=function(e,t,n){if(!t)return e;var s;if(n)s=n(t);else if(mr.isURLSearchParams(t))s=t.toString();else{var i=[];mr.forEach(t,function(u,l){u===null||typeof u>"u"||(mr.isArray(u)?l=l+"[]":u=[u],mr.forEach(u,function(b){mr.isDate(b)?b=b.toISOString():mr.isObject(b)&&(b=JSON.stringify(b)),i.push(gu(l)+"="+gu(b))}))}),s=i.join("&")}if(s){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}});var vu=M((Gw,_u)=>{"use strict";var $h=Ee();function Hn(){this.handlers=[]}Hn.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Hn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Hn.prototype.forEach=function(e){$h.forEach(this.handlers,function(n){n!==null&&e(n)})};_u.exports=Hn});var Ou=M((Xw,xu)=>{"use strict";var Hh=Ee();xu.exports=function(e,t){Hh.forEach(e,function(s,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=s,delete e[i])})}});var ia=M((e_,Pu)=>{"use strict";Pu.exports=function(e,t,n,s,i){return e.config=t,n&&(e.code=n),e.request=s,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var aa=M((t_,Au)=>{"use strict";Au.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var oa=M((r_,Tu)=>{"use strict";var Qh=ia();Tu.exports=function(e,t,n,s,i){var a=new Error(e);return Qh(a,t,n,s,i)}});var Iu=M((n_,Eu)=>{"use strict";var Jh=oa();Eu.exports=function(e,t,n){var s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(Jh("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Su=M((s_,Cu)=>{"use strict";var Qn=Ee();Cu.exports=Qn.isStandardBrowserEnv()?function(){return{write:function(t,n,s,i,a,o){var u=[];u.push(t+"="+encodeURIComponent(n)),Qn.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),Qn.isString(i)&&u.push("path="+i),Qn.isString(a)&&u.push("domain="+a),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var ku=M((i_,ju)=>{"use strict";ju.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var Mu=M((a_,Ru)=>{"use strict";Ru.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var Lu=M((o_,Nu)=>{"use strict";var Yh=ku(),Wh=Mu();Nu.exports=function(e,t){return e&&!Yh(t)?Wh(e,t):t}});var qu=M((u_,Du)=>{"use strict";var ua=Ee(),Gh=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Du.exports=function(e){var t={},n,s,i;return e&&ua.forEach(e.split(`
`),function(o){if(i=o.indexOf(":"),n=ua.trim(o.substr(0,i)).toLowerCase(),s=ua.trim(o.substr(i+1)),n){if(t[n]&&Gh.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([s]):t[n]=t[n]?t[n]+", "+s:s}}),t}});var Fu=M((l_,Vu)=>{"use strict";var Uu=Ee();Vu.exports=Uu.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function s(i){var a=i;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(a){var o=Uu.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});var ln=M((c_,Bu)=>{"use strict";function la(r){this.message=r}la.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};la.prototype.__CANCEL__=!0;Bu.exports=la});var da=M((d_,zu)=>{"use strict";var Jn=Ee(),Xh=Iu(),ef=Su(),tf=sa(),rf=Lu(),nf=qu(),sf=Fu(),ca=oa(),af=aa(),of=ln();zu.exports=function(e){return new Promise(function(n,s){var i=e.data,a=e.headers,o=e.responseType,u;function l(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}Jn.isFormData(i)&&delete a["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(b+":"+v)}var P=rf(e.baseURL,e.url);d.open(e.method.toUpperCase(),tf(P,e.params,e.paramsSerializer),!0),d.timeout=e.timeout;function m(){if(d){var j="getAllResponseHeaders"in d?nf(d.getAllResponseHeaders()):null,S=!o||o==="text"||o==="json"?d.responseText:d.response,k={data:S,status:d.status,statusText:d.statusText,headers:j,config:e,request:d};Xh(function(w){n(w),l()},function(w){s(w),l()},k),d=null}}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(s(ca("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){s(ca("Network Error",e,null,d)),d=null},d.ontimeout=function(){var S=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",k=e.transitional||af;e.timeoutErrorMessage&&(S=e.timeoutErrorMessage),s(ca(S,e,k.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",d)),d=null},Jn.isStandardBrowserEnv()){var T=(e.withCredentials||sf(P))&&e.xsrfCookieName?ef.read(e.xsrfCookieName):void 0;T&&(a[e.xsrfHeaderName]=T)}"setRequestHeader"in d&&Jn.forEach(a,function(S,k){typeof i>"u"&&k.toLowerCase()==="content-type"?delete a[k]:d.setRequestHeader(k,S)}),Jn.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),o&&o!=="json"&&(d.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(j){d&&(s(!j||j&&j.type?new of("canceled"):j),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),i||(i=null),d.send(i)})}});var Wn=M((p_,$u)=>{"use strict";var ve=Ee(),Ku=Ou(),uf=ia(),lf=aa(),cf={"Content-Type":"application/x-www-form-urlencoded"};function Zu(r,e){!ve.isUndefined(r)&&ve.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function df(){var r;return typeof XMLHttpRequest<"u"?r=da():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=da()),r}function pf(r,e,t){if(ve.isString(r))try{return(e||JSON.parse)(r),ve.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var Yn={transitional:lf,adapter:df(),transformRequest:[function(e,t){return Ku(t,"Accept"),Ku(t,"Content-Type"),ve.isFormData(e)||ve.isArrayBuffer(e)||ve.isBuffer(e)||ve.isStream(e)||ve.isFile(e)||ve.isBlob(e)?e:ve.isArrayBufferView(e)?e.buffer:ve.isURLSearchParams(e)?(Zu(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ve.isObject(e)||t&&t["Content-Type"]==="application/json"?(Zu(t,"application/json"),pf(e)):e}],transformResponse:[function(e){var t=this.transitional||Yn.transitional,n=t&&t.silentJSONParsing,s=t&&t.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||s&&ve.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?uf(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ve.forEach(["delete","get","head"],function(e){Yn.headers[e]={}});ve.forEach(["post","put","patch"],function(e){Yn.headers[e]=ve.merge(cf)});$u.exports=Yn});var Qu=M((h_,Hu)=>{"use strict";var hf=Ee(),ff=Wn();Hu.exports=function(e,t,n){var s=this||ff;return hf.forEach(n,function(a){e=a.call(s,e,t)}),e}});var pa=M((f_,Ju)=>{"use strict";Ju.exports=function(e){return!!(e&&e.__CANCEL__)}});var Gu=M((m_,Wu)=>{"use strict";var Yu=Ee(),ha=Qu(),mf=pa(),yf=Wn(),bf=ln();function fa(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new bf("canceled")}Wu.exports=function(e){fa(e),e.headers=e.headers||{},e.data=ha.call(e,e.data,e.headers,e.transformRequest),e.headers=Yu.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Yu.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var t=e.adapter||yf.adapter;return t(e).then(function(s){return fa(e),s.data=ha.call(e,s.data,s.headers,e.transformResponse),s},function(s){return mf(s)||(fa(e),s&&s.response&&(s.response.data=ha.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})}});var ma=M((y_,Xu)=>{"use strict";var qe=Ee();Xu.exports=function(e,t){t=t||{};var n={};function s(d,b){return qe.isPlainObject(d)&&qe.isPlainObject(b)?qe.merge(d,b):qe.isPlainObject(b)?qe.merge({},b):qe.isArray(b)?b.slice():b}function i(d){if(qe.isUndefined(t[d])){if(!qe.isUndefined(e[d]))return s(void 0,e[d])}else return s(e[d],t[d])}function a(d){if(!qe.isUndefined(t[d]))return s(void 0,t[d])}function o(d){if(qe.isUndefined(t[d])){if(!qe.isUndefined(e[d]))return s(void 0,e[d])}else return s(void 0,t[d])}function u(d){if(d in t)return s(e[d],t[d]);if(d in e)return s(void 0,e[d])}var l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return qe.forEach(Object.keys(e).concat(Object.keys(t)),function(b){var v=l[b]||i,P=v(b);qe.isUndefined(P)&&v!==u||(n[b]=P)}),n}});var ya=M((b_,el)=>{el.exports={version:"0.26.1"}});var nl=M((g_,rl)=>{"use strict";var gf=ya().version,ba={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){ba[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var tl={};ba.transitional=function(e,t,n){function s(i,a){return"[Axios v"+gf+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,o){if(e===!1)throw new Error(s(a," has been removed"+(t?" in "+t:"")));return t&&!tl[a]&&(tl[a]=!0),e?e(i,a,o):!0}};function wf(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),s=n.length;s-- >0;){var i=n[s],a=e[i];if(a){var o=r[i],u=o===void 0||a(o,i,r);if(u!==!0)throw new TypeError("option "+i+" must be "+u);continue}if(t!==!0)throw Error("Unknown option "+i)}}rl.exports={assertOptions:wf,validators:ba}});var ll=M((w_,ul)=>{"use strict";var al=Ee(),_f=sa(),sl=vu(),il=Gu(),Gn=ma(),ol=nl(),yr=ol.validators;function cn(r){this.defaults=r,this.interceptors={request:new sl,response:new sl}}cn.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Gn(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&ol.assertOptions(n,{silentJSONParsing:yr.transitional(yr.boolean),forcedJSONParsing:yr.transitional(yr.boolean),clarifyTimeoutError:yr.transitional(yr.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(t)===!1||(i=i&&P.synchronous,s.unshift(P.fulfilled,P.rejected))});var a=[];this.interceptors.response.forEach(function(P){a.push(P.fulfilled,P.rejected)});var o;if(!i){var u=[il,void 0];for(Array.prototype.unshift.apply(u,s),u=u.concat(a),o=Promise.resolve(t);u.length;)o=o.then(u.shift(),u.shift());return o}for(var l=t;s.length;){var d=s.shift(),b=s.shift();try{l=d(l)}catch(v){b(v);break}}try{o=il(l)}catch(v){return Promise.reject(v)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};cn.prototype.getUri=function(e){return e=Gn(this.defaults,e),_f(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};al.forEach(["delete","get","head","options"],function(e){cn.prototype[e]=function(t,n){return this.request(Gn(n||{},{method:e,url:t,data:(n||{}).data}))}});al.forEach(["post","put","patch"],function(e){cn.prototype[e]=function(t,n,s){return this.request(Gn(s||{},{method:e,url:t,data:n}))}});ul.exports=cn});var dl=M((__,cl)=>{"use strict";var vf=ln();function br(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(s){e=s});var t=this;this.promise.then(function(n){if(t._listeners){var s,i=t._listeners.length;for(s=0;s<i;s++)t._listeners[s](n);t._listeners=null}}),this.promise.then=function(n){var s,i=new Promise(function(a){t.subscribe(a),s=a}).then(n);return i.cancel=function(){t.unsubscribe(s)},i},r(function(s){t.reason||(t.reason=new vf(s),e(t.reason))})}br.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};br.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};br.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};br.source=function(){var e,t=new br(function(s){e=s});return{token:t,cancel:e}};cl.exports=br});var hl=M((v_,pl)=>{"use strict";pl.exports=function(e){return function(n){return e.apply(null,n)}}});var ml=M((x_,fl)=>{"use strict";var xf=Ee();fl.exports=function(e){return xf.isObject(e)&&e.isAxiosError===!0}});var gl=M((O_,ga)=>{"use strict";var yl=Ee(),Of=Xi(),Xn=ll(),Pf=ma(),Af=Wn();function bl(r){var e=new Xn(r),t=Of(Xn.prototype.request,e);return yl.extend(t,Xn.prototype,e),yl.extend(t,e),t.create=function(s){return bl(Pf(r,s))},t}var tt=bl(Af);tt.Axios=Xn;tt.Cancel=ln();tt.CancelToken=dl();tt.isCancel=pa();tt.VERSION=ya().version;tt.all=function(e){return Promise.all(e)};tt.spread=hl();tt.isAxiosError=ml();ga.exports=tt;ga.exports.default=tt});var wa=M((P_,wl)=>{wl.exports=gl()});var xa=M(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.RequiredError=We.BaseAPI=We.COLLECTION_FORMATS=We.BASE_PATH=void 0;var Tf=wa();We.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,"");We.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};var _a=class{constructor(e,t=We.BASE_PATH,n=Tf.default){this.basePath=t,this.axios=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}};We.BaseAPI=_a;var va=class extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}};We.RequiredError=va});var _l=M(de=>{"use strict";var Pa=de&&de.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{l(n.next(d))}catch(b){a(b)}}function u(d){try{l(n.throw(d))}catch(b){a(b)}}function l(d){d.done?i(d.value):s(d.value).then(o,u)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(de,"__esModule",{value:!0});de.createRequestFunction=de.toPathString=de.serializeDataIfNeeded=de.setSearchParams=de.setOAuthToObject=de.setBearerAuthToObject=de.setBasicAuthToObject=de.setApiKeyToObject=de.assertParamExists=de.DUMMY_BASE_URL=void 0;var Ef=xa();de.DUMMY_BASE_URL="https://example.com";de.assertParamExists=function(r,e,t){if(t==null)throw new Ef.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${r}.`)};de.setApiKeyToObject=function(r,e,t){return Pa(this,void 0,void 0,function*(){if(t&&t.apiKey){let n=typeof t.apiKey=="function"?yield t.apiKey(e):yield t.apiKey;r[e]=n}})};de.setBasicAuthToObject=function(r,e){e&&(e.username||e.password)&&(r.auth={username:e.username,password:e.password})};de.setBearerAuthToObject=function(r,e){return Pa(this,void 0,void 0,function*(){if(e&&e.accessToken){let t=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;r.Authorization="Bearer "+t}})};de.setOAuthToObject=function(r,e,t,n){return Pa(this,void 0,void 0,function*(){if(n&&n.accessToken){let s=typeof n.accessToken=="function"?yield n.accessToken(e,t):yield n.accessToken;r.Authorization="Bearer "+s}})};function Oa(r,e,t=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Oa(r,n,t)):Object.keys(e).forEach(n=>Oa(r,e[n],`${t}${t!==""?".":""}${n}`)):r.has(t)?r.append(t,e):r.set(t,e))}de.setSearchParams=function(r,...e){let t=new URLSearchParams(r.search);Oa(t,e),r.search=t.toString()};de.serializeDataIfNeeded=function(r,e,t){let n=typeof r!="string";return(n&&t&&t.isJsonMime?t.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(r!==void 0?r:{}):r||""};de.toPathString=function(r){return r.pathname+r.search+r.hash};de.createRequestFunction=function(r,e,t,n){return(s=e,i=t)=>{let a=Object.assign(Object.assign({},r.options),{url:(n?.basePath||i)+r.url});return s.request(a)}}});var vl=M(Z=>{"use strict";var z=Z&&Z.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{l(n.next(d))}catch(b){a(b)}}function u(d){try{l(n.throw(d))}catch(b){a(b)}}function l(d){d.done?i(d.value):s(d.value).then(o,u)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(Z,"__esModule",{value:!0});Z.OpenAIApi=Z.OpenAIApiFactory=Z.OpenAIApiFp=Z.OpenAIApiAxiosParamCreator=Z.CreateImageRequestResponseFormatEnum=Z.CreateImageRequestSizeEnum=Z.ChatCompletionResponseMessageRoleEnum=Z.ChatCompletionRequestMessageRoleEnum=void 0;var ie=wa(),x=_l(),ne=xa();Z.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"};Z.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"};Z.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"};Z.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"};Z.OpenAIApiAxiosParamCreator=function(r){return{cancelFineTune:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("cancelFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}}),createAnswer:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createAnswer","createAnswerRequest",e);let n="/answers",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createChatCompletion:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createChatCompletion","createChatCompletionRequest",e);let n="/chat/completions",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createClassification:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createClassification","createClassificationRequest",e);let n="/classifications",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createCompletion:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createCompletion","createCompletionRequest",e);let n="/completions",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createEdit:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createEdit","createEditRequest",e);let n="/edits",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createEmbedding:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createEmbedding","createEmbeddingRequest",e);let n="/embeddings",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createFile:(e,t,n={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createFile","file",e),x.assertParamExists("createFile","purpose",t);let s="/files",i=new URL(s,x.DUMMY_BASE_URL),a;r&&(a=r.baseOptions);let o=Object.assign(Object.assign({method:"POST"},a),n),u={},l={},d=new(r&&r.formDataCtor||FormData);e!==void 0&&d.append("file",e),t!==void 0&&d.append("purpose",t),u["Content-Type"]="multipart/form-data",x.setSearchParams(i,l);let b=a&&a.headers?a.headers:{};return o.headers=Object.assign(Object.assign(Object.assign(Object.assign({},u),d.getHeaders()),b),n.headers),o.data=d,{url:x.toPathString(i),options:o}}),createFineTune:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createFineTune","createFineTuneRequest",e);let n="/fine-tunes",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createImage:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createImage","createImageRequest",e);let n="/images/generations",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createImageEdit:(e,t,n,s,i,a,o,u={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createImageEdit","image",e),x.assertParamExists("createImageEdit","prompt",t);let l="/images/edits",d=new URL(l,x.DUMMY_BASE_URL),b;r&&(b=r.baseOptions);let v=Object.assign(Object.assign({method:"POST"},b),u),P={},m={},T=new(r&&r.formDataCtor||FormData);e!==void 0&&T.append("image",e),n!==void 0&&T.append("mask",n),t!==void 0&&T.append("prompt",t),s!==void 0&&T.append("n",s),i!==void 0&&T.append("size",i),a!==void 0&&T.append("response_format",a),o!==void 0&&T.append("user",o),P["Content-Type"]="multipart/form-data",x.setSearchParams(d,m);let j=b&&b.headers?b.headers:{};return v.headers=Object.assign(Object.assign(Object.assign(Object.assign({},P),T.getHeaders()),j),u.headers),v.data=T,{url:x.toPathString(d),options:v}}),createImageVariation:(e,t,n,s,i,a={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createImageVariation","image",e);let o="/images/variations",u=new URL(o,x.DUMMY_BASE_URL),l;r&&(l=r.baseOptions);let d=Object.assign(Object.assign({method:"POST"},l),a),b={},v={},P=new(r&&r.formDataCtor||FormData);e!==void 0&&P.append("image",e),t!==void 0&&P.append("n",t),n!==void 0&&P.append("size",n),s!==void 0&&P.append("response_format",s),i!==void 0&&P.append("user",i),b["Content-Type"]="multipart/form-data",x.setSearchParams(u,v);let m=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),P.getHeaders()),m),a.headers),d.data=P,{url:x.toPathString(u),options:d}}),createModeration:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createModeration","createModerationRequest",e);let n="/moderations",s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"POST"},i),t),o={},u={};o["Content-Type"]="application/json",x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),a.data=x.serializeDataIfNeeded(e,a,r),{url:x.toPathString(s),options:a}}),createSearch:(e,t,n={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createSearch","engineId",e),x.assertParamExists("createSearch","createSearchRequest",t);let s="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(e))),i=new URL(s,x.DUMMY_BASE_URL),a;r&&(a=r.baseOptions);let o=Object.assign(Object.assign({method:"POST"},a),n),u={},l={};u["Content-Type"]="application/json",x.setSearchParams(i,l);let d=a&&a.headers?a.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),d),n.headers),o.data=x.serializeDataIfNeeded(t,o,r),{url:x.toPathString(i),options:o}}),createTranscription:(e,t,n,s,i,a,o={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createTranscription","file",e),x.assertParamExists("createTranscription","model",t);let u="/audio/transcriptions",l=new URL(u,x.DUMMY_BASE_URL),d;r&&(d=r.baseOptions);let b=Object.assign(Object.assign({method:"POST"},d),o),v={},P={},m=new(r&&r.formDataCtor||FormData);e!==void 0&&m.append("file",e),t!==void 0&&m.append("model",t),n!==void 0&&m.append("prompt",n),s!==void 0&&m.append("response_format",s),i!==void 0&&m.append("temperature",i),a!==void 0&&m.append("language",a),v["Content-Type"]="multipart/form-data",x.setSearchParams(l,P);let T=d&&d.headers?d.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},v),m.getHeaders()),T),o.headers),b.data=m,{url:x.toPathString(l),options:b}}),createTranslation:(e,t,n,s,i,a={})=>z(this,void 0,void 0,function*(){x.assertParamExists("createTranslation","file",e),x.assertParamExists("createTranslation","model",t);let o="/audio/translations",u=new URL(o,x.DUMMY_BASE_URL),l;r&&(l=r.baseOptions);let d=Object.assign(Object.assign({method:"POST"},l),a),b={},v={},P=new(r&&r.formDataCtor||FormData);e!==void 0&&P.append("file",e),t!==void 0&&P.append("model",t),n!==void 0&&P.append("prompt",n),s!==void 0&&P.append("response_format",s),i!==void 0&&P.append("temperature",i),b["Content-Type"]="multipart/form-data",x.setSearchParams(u,v);let m=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),P.getHeaders()),m),a.headers),d.data=P,{url:x.toPathString(u),options:d}}),deleteFile:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("deleteFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"DELETE"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}}),deleteModel:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("deleteModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"DELETE"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}}),downloadFile:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("downloadFile","fileId",e);let n="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}}),listEngines:(e={})=>z(this,void 0,void 0,function*(){let t="/engines",n=new URL(t,x.DUMMY_BASE_URL),s;r&&(s=r.baseOptions);let i=Object.assign(Object.assign({method:"GET"},s),e),a={},o={};x.setSearchParams(n,o);let u=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},a),u),e.headers),{url:x.toPathString(n),options:i}}),listFiles:(e={})=>z(this,void 0,void 0,function*(){let t="/files",n=new URL(t,x.DUMMY_BASE_URL),s;r&&(s=r.baseOptions);let i=Object.assign(Object.assign({method:"GET"},s),e),a={},o={};x.setSearchParams(n,o);let u=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},a),u),e.headers),{url:x.toPathString(n),options:i}}),listFineTuneEvents:(e,t,n={})=>z(this,void 0,void 0,function*(){x.assertParamExists("listFineTuneEvents","fineTuneId",e);let s="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(e))),i=new URL(s,x.DUMMY_BASE_URL),a;r&&(a=r.baseOptions);let o=Object.assign(Object.assign({method:"GET"},a),n),u={},l={};t!==void 0&&(l.stream=t),x.setSearchParams(i,l);let d=a&&a.headers?a.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},u),d),n.headers),{url:x.toPathString(i),options:o}}),listFineTunes:(e={})=>z(this,void 0,void 0,function*(){let t="/fine-tunes",n=new URL(t,x.DUMMY_BASE_URL),s;r&&(s=r.baseOptions);let i=Object.assign(Object.assign({method:"GET"},s),e),a={},o={};x.setSearchParams(n,o);let u=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},a),u),e.headers),{url:x.toPathString(n),options:i}}),listModels:(e={})=>z(this,void 0,void 0,function*(){let t="/models",n=new URL(t,x.DUMMY_BASE_URL),s;r&&(s=r.baseOptions);let i=Object.assign(Object.assign({method:"GET"},s),e),a={},o={};x.setSearchParams(n,o);let u=s&&s.headers?s.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},a),u),e.headers),{url:x.toPathString(n),options:i}}),retrieveEngine:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("retrieveEngine","engineId",e);let n="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}}),retrieveFile:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("retrieveFile","fileId",e);let n="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}}),retrieveFineTune:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("retrieveFineTune","fineTuneId",e);let n="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}}),retrieveModel:(e,t={})=>z(this,void 0,void 0,function*(){x.assertParamExists("retrieveModel","model",e);let n="/models/{model}".replace("{model}",encodeURIComponent(String(e))),s=new URL(n,x.DUMMY_BASE_URL),i;r&&(i=r.baseOptions);let a=Object.assign(Object.assign({method:"GET"},i),t),o={},u={};x.setSearchParams(s,u);let l=i&&i.headers?i.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},o),l),t.headers),{url:x.toPathString(s),options:a}})}};Z.OpenAIApiFp=function(r){let e=Z.OpenAIApiAxiosParamCreator(r);return{cancelFineTune(t,n){return z(this,void 0,void 0,function*(){let s=yield e.cancelFineTune(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createAnswer(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createAnswer(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createChatCompletion(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createChatCompletion(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createClassification(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createClassification(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createCompletion(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createCompletion(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createEdit(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createEdit(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createEmbedding(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createEmbedding(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createFile(t,n,s){return z(this,void 0,void 0,function*(){let i=yield e.createFile(t,n,s);return x.createRequestFunction(i,ie.default,ne.BASE_PATH,r)})},createFineTune(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createFineTune(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createImage(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createImage(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createImageEdit(t,n,s,i,a,o,u,l){return z(this,void 0,void 0,function*(){let d=yield e.createImageEdit(t,n,s,i,a,o,u,l);return x.createRequestFunction(d,ie.default,ne.BASE_PATH,r)})},createImageVariation(t,n,s,i,a,o){return z(this,void 0,void 0,function*(){let u=yield e.createImageVariation(t,n,s,i,a,o);return x.createRequestFunction(u,ie.default,ne.BASE_PATH,r)})},createModeration(t,n){return z(this,void 0,void 0,function*(){let s=yield e.createModeration(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},createSearch(t,n,s){return z(this,void 0,void 0,function*(){let i=yield e.createSearch(t,n,s);return x.createRequestFunction(i,ie.default,ne.BASE_PATH,r)})},createTranscription(t,n,s,i,a,o,u){return z(this,void 0,void 0,function*(){let l=yield e.createTranscription(t,n,s,i,a,o,u);return x.createRequestFunction(l,ie.default,ne.BASE_PATH,r)})},createTranslation(t,n,s,i,a,o){return z(this,void 0,void 0,function*(){let u=yield e.createTranslation(t,n,s,i,a,o);return x.createRequestFunction(u,ie.default,ne.BASE_PATH,r)})},deleteFile(t,n){return z(this,void 0,void 0,function*(){let s=yield e.deleteFile(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},deleteModel(t,n){return z(this,void 0,void 0,function*(){let s=yield e.deleteModel(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},downloadFile(t,n){return z(this,void 0,void 0,function*(){let s=yield e.downloadFile(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},listEngines(t){return z(this,void 0,void 0,function*(){let n=yield e.listEngines(t);return x.createRequestFunction(n,ie.default,ne.BASE_PATH,r)})},listFiles(t){return z(this,void 0,void 0,function*(){let n=yield e.listFiles(t);return x.createRequestFunction(n,ie.default,ne.BASE_PATH,r)})},listFineTuneEvents(t,n,s){return z(this,void 0,void 0,function*(){let i=yield e.listFineTuneEvents(t,n,s);return x.createRequestFunction(i,ie.default,ne.BASE_PATH,r)})},listFineTunes(t){return z(this,void 0,void 0,function*(){let n=yield e.listFineTunes(t);return x.createRequestFunction(n,ie.default,ne.BASE_PATH,r)})},listModels(t){return z(this,void 0,void 0,function*(){let n=yield e.listModels(t);return x.createRequestFunction(n,ie.default,ne.BASE_PATH,r)})},retrieveEngine(t,n){return z(this,void 0,void 0,function*(){let s=yield e.retrieveEngine(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},retrieveFile(t,n){return z(this,void 0,void 0,function*(){let s=yield e.retrieveFile(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},retrieveFineTune(t,n){return z(this,void 0,void 0,function*(){let s=yield e.retrieveFineTune(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})},retrieveModel(t,n){return z(this,void 0,void 0,function*(){let s=yield e.retrieveModel(t,n);return x.createRequestFunction(s,ie.default,ne.BASE_PATH,r)})}}};Z.OpenAIApiFactory=function(r,e,t){let n=Z.OpenAIApiFp(r);return{cancelFineTune(s,i){return n.cancelFineTune(s,i).then(a=>a(t,e))},createAnswer(s,i){return n.createAnswer(s,i).then(a=>a(t,e))},createChatCompletion(s,i){return n.createChatCompletion(s,i).then(a=>a(t,e))},createClassification(s,i){return n.createClassification(s,i).then(a=>a(t,e))},createCompletion(s,i){return n.createCompletion(s,i).then(a=>a(t,e))},createEdit(s,i){return n.createEdit(s,i).then(a=>a(t,e))},createEmbedding(s,i){return n.createEmbedding(s,i).then(a=>a(t,e))},createFile(s,i,a){return n.createFile(s,i,a).then(o=>o(t,e))},createFineTune(s,i){return n.createFineTune(s,i).then(a=>a(t,e))},createImage(s,i){return n.createImage(s,i).then(a=>a(t,e))},createImageEdit(s,i,a,o,u,l,d,b){return n.createImageEdit(s,i,a,o,u,l,d,b).then(v=>v(t,e))},createImageVariation(s,i,a,o,u,l){return n.createImageVariation(s,i,a,o,u,l).then(d=>d(t,e))},createModeration(s,i){return n.createModeration(s,i).then(a=>a(t,e))},createSearch(s,i,a){return n.createSearch(s,i,a).then(o=>o(t,e))},createTranscription(s,i,a,o,u,l,d){return n.createTranscription(s,i,a,o,u,l,d).then(b=>b(t,e))},createTranslation(s,i,a,o,u,l){return n.createTranslation(s,i,a,o,u,l).then(d=>d(t,e))},deleteFile(s,i){return n.deleteFile(s,i).then(a=>a(t,e))},deleteModel(s,i){return n.deleteModel(s,i).then(a=>a(t,e))},downloadFile(s,i){return n.downloadFile(s,i).then(a=>a(t,e))},listEngines(s){return n.listEngines(s).then(i=>i(t,e))},listFiles(s){return n.listFiles(s).then(i=>i(t,e))},listFineTuneEvents(s,i,a){return n.listFineTuneEvents(s,i,a).then(o=>o(t,e))},listFineTunes(s){return n.listFineTunes(s).then(i=>i(t,e))},listModels(s){return n.listModels(s).then(i=>i(t,e))},retrieveEngine(s,i){return n.retrieveEngine(s,i).then(a=>a(t,e))},retrieveFile(s,i){return n.retrieveFile(s,i).then(a=>a(t,e))},retrieveFineTune(s,i){return n.retrieveFineTune(s,i).then(a=>a(t,e))},retrieveModel(s,i){return n.retrieveModel(s,i).then(a=>a(t,e))}}};var Aa=class extends ne.BaseAPI{cancelFineTune(e,t){return Z.OpenAIApiFp(this.configuration).cancelFineTune(e,t).then(n=>n(this.axios,this.basePath))}createAnswer(e,t){return Z.OpenAIApiFp(this.configuration).createAnswer(e,t).then(n=>n(this.axios,this.basePath))}createChatCompletion(e,t){return Z.OpenAIApiFp(this.configuration).createChatCompletion(e,t).then(n=>n(this.axios,this.basePath))}createClassification(e,t){return Z.OpenAIApiFp(this.configuration).createClassification(e,t).then(n=>n(this.axios,this.basePath))}createCompletion(e,t){return Z.OpenAIApiFp(this.configuration).createCompletion(e,t).then(n=>n(this.axios,this.basePath))}createEdit(e,t){return Z.OpenAIApiFp(this.configuration).createEdit(e,t).then(n=>n(this.axios,this.basePath))}createEmbedding(e,t){return Z.OpenAIApiFp(this.configuration).createEmbedding(e,t).then(n=>n(this.axios,this.basePath))}createFile(e,t,n){return Z.OpenAIApiFp(this.configuration).createFile(e,t,n).then(s=>s(this.axios,this.basePath))}createFineTune(e,t){return Z.OpenAIApiFp(this.configuration).createFineTune(e,t).then(n=>n(this.axios,this.basePath))}createImage(e,t){return Z.OpenAIApiFp(this.configuration).createImage(e,t).then(n=>n(this.axios,this.basePath))}createImageEdit(e,t,n,s,i,a,o,u){return Z.OpenAIApiFp(this.configuration).createImageEdit(e,t,n,s,i,a,o,u).then(l=>l(this.axios,this.basePath))}createImageVariation(e,t,n,s,i,a){return Z.OpenAIApiFp(this.configuration).createImageVariation(e,t,n,s,i,a).then(o=>o(this.axios,this.basePath))}createModeration(e,t){return Z.OpenAIApiFp(this.configuration).createModeration(e,t).then(n=>n(this.axios,this.basePath))}createSearch(e,t,n){return Z.OpenAIApiFp(this.configuration).createSearch(e,t,n).then(s=>s(this.axios,this.basePath))}createTranscription(e,t,n,s,i,a,o){return Z.OpenAIApiFp(this.configuration).createTranscription(e,t,n,s,i,a,o).then(u=>u(this.axios,this.basePath))}createTranslation(e,t,n,s,i,a){return Z.OpenAIApiFp(this.configuration).createTranslation(e,t,n,s,i,a).then(o=>o(this.axios,this.basePath))}deleteFile(e,t){return Z.OpenAIApiFp(this.configuration).deleteFile(e,t).then(n=>n(this.axios,this.basePath))}deleteModel(e,t){return Z.OpenAIApiFp(this.configuration).deleteModel(e,t).then(n=>n(this.axios,this.basePath))}downloadFile(e,t){return Z.OpenAIApiFp(this.configuration).downloadFile(e,t).then(n=>n(this.axios,this.basePath))}listEngines(e){return Z.OpenAIApiFp(this.configuration).listEngines(e).then(t=>t(this.axios,this.basePath))}listFiles(e){return Z.OpenAIApiFp(this.configuration).listFiles(e).then(t=>t(this.axios,this.basePath))}listFineTuneEvents(e,t,n){return Z.OpenAIApiFp(this.configuration).listFineTuneEvents(e,t,n).then(s=>s(this.axios,this.basePath))}listFineTunes(e){return Z.OpenAIApiFp(this.configuration).listFineTunes(e).then(t=>t(this.axios,this.basePath))}listModels(e){return Z.OpenAIApiFp(this.configuration).listModels(e).then(t=>t(this.axios,this.basePath))}retrieveEngine(e,t){return Z.OpenAIApiFp(this.configuration).retrieveEngine(e,t).then(n=>n(this.axios,this.basePath))}retrieveFile(e,t){return Z.OpenAIApiFp(this.configuration).retrieveFile(e,t).then(n=>n(this.axios,this.basePath))}retrieveFineTune(e,t){return Z.OpenAIApiFp(this.configuration).retrieveFineTune(e,t).then(n=>n(this.axios,this.basePath))}retrieveModel(e,t){return Z.OpenAIApiFp(this.configuration).retrieveModel(e,t).then(n=>n(this.axios,this.basePath))}};Z.OpenAIApi=Aa});var xl=M((I_,If)=>{If.exports={name:"openai",version:"3.2.1",description:"Node.js library for the OpenAI API",repository:{type:"git",url:"git@github.com:openai/openai-node.git"},keywords:["openai","open","ai","gpt-3","gpt3"],author:"OpenAI",license:"MIT",main:"./dist/index.js",types:"./dist/index.d.ts",scripts:{build:"tsc --outDir dist/"},dependencies:{axios:"^0.26.0","form-data":"^4.0.0"},devDependencies:{"@types/node":"^12.11.5",typescript:"^3.6.4"}}});var Pl=M((C_,Ol)=>{Ol.exports=typeof self=="object"?self.FormData:window.FormData});var Al=M(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.Configuration=void 0;var Cf=xl(),Ta=class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${Cf.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=Pl())}isJsonMime(e){let t=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(t.test(e)||e.toLowerCase()==="application/json-patch+json")}};es.Configuration=Ta});var gr=M(Et=>{"use strict";var Sf=Et&&Et.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Tl=Et&&Et.__exportStar||function(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&Sf(e,r,t)};Object.defineProperty(Et,"__esModule",{value:!0});Tl(vl(),Et);Tl(Al(),Et)});async function Il(){return Ea===void 0&&(Ea={library:"langchain-js",runtime:Mf()}),Ea}var jf,kf,Rf,El,pt,Mf,Ea,wr=R(()=>{jf=()=>typeof window<"u"&&typeof window.document<"u",kf=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Rf=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),El=()=>typeof Deno<"u",pt=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!El(),Mf=()=>{let r;return jf()?r="browser":pt()?r="node":kf()?r="webworker":Rf()?r="jsdom":El()?r="deno":r="other",r}});function dn(r,e){return function(){return r.apply(e,arguments)}}var Ia=R(()=>{"use strict"});function Lf(r){return r!==null&&!pn(r)&&r.constructor!==null&&!pn(r.constructor)&&ze(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}function Df(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&jl(r.buffer),e}function hn(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),_r(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{let i=t?Object.getOwnPropertyNames(r):Object.keys(r),a=i.length,o;for(n=0;n<a;n++)o=i[n],e.call(null,r[o],o,r)}}function Rl(r,e){e=e.toLowerCase();let t=Object.keys(r),n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}function Sa(){let{caseless:r}=Nl(this)&&this||{},e={},t=(n,s)=>{let i=r&&Rl(e,s)||s;ts(e[i])&&ts(n)?e[i]=Sa(e[i],n):ts(n)?e[i]=Sa({},n):_r(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&hn(arguments[n],t);return e}function dm(r){return!!(r&&ze(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}var Nf,ja,rs,rt,ns,_r,pn,jl,qf,ze,kl,ss,Uf,ts,Vf,Ff,Bf,zf,Kf,Zf,$f,Hf,Ml,Nl,Qf,Jf,Yf,Wf,Gf,Xf,em,tm,rm,nm,sm,Cl,im,Ll,am,om,um,lm,Ca,Sl,Dl,cm,pm,hm,fm,E,me=R(()=>{"use strict";Ia();({toString:Nf}=Object.prototype),{getPrototypeOf:ja}=Object,rs=(r=>e=>{let t=Nf.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),rt=r=>(r=r.toLowerCase(),e=>rs(e)===r),ns=r=>e=>typeof e===r,{isArray:_r}=Array,pn=ns("undefined");jl=rt("ArrayBuffer");qf=ns("string"),ze=ns("function"),kl=ns("number"),ss=r=>r!==null&&typeof r=="object",Uf=r=>r===!0||r===!1,ts=r=>{if(rs(r)!=="object")return!1;let e=ja(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Vf=rt("Date"),Ff=rt("File"),Bf=rt("Blob"),zf=rt("FileList"),Kf=r=>ss(r)&&ze(r.pipe),Zf=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||ze(r.append)&&((e=rs(r))==="formdata"||e==="object"&&ze(r.toString)&&r.toString()==="[object FormData]"))},$f=rt("URLSearchParams"),Hf=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");Ml=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Nl=r=>!pn(r)&&r!==Ml;Qf=(r,e,t,{allOwnKeys:n}={})=>(hn(e,(s,i)=>{t&&ze(s)?r[i]=dn(s,t):r[i]=s},{allOwnKeys:n}),r),Jf=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Yf=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Wf=(r,e,t,n)=>{let s,i,a,o={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),i=s.length;i-- >0;)a=s[i],(!n||n(a,r,e))&&!o[a]&&(e[a]=r[a],o[a]=!0);r=t!==!1&&ja(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Gf=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;let n=r.indexOf(e,t);return n!==-1&&n===t},Xf=r=>{if(!r)return null;if(_r(r))return r;let e=r.length;if(!kl(e))return null;let t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},em=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&ja(Uint8Array)),tm=(r,e)=>{let n=(r&&r[Symbol.iterator]).call(r),s;for(;(s=n.next())&&!s.done;){let i=s.value;e.call(r,i[0],i[1])}},rm=(r,e)=>{let t,n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},nm=rt("HTMLFormElement"),sm=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),Cl=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),im=rt("RegExp"),Ll=(r,e)=>{let t=Object.getOwnPropertyDescriptors(r),n={};hn(t,(s,i)=>{e(s,i,r)!==!1&&(n[i]=s)}),Object.defineProperties(r,n)},am=r=>{Ll(r,(e,t)=>{if(ze(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;let n=r[t];if(ze(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},om=(r,e)=>{let t={},n=s=>{s.forEach(i=>{t[i]=!0})};return _r(r)?n(r):n(String(r).split(e)),t},um=()=>{},lm=(r,e)=>(r=+r,Number.isFinite(r)?r:e),Ca="abcdefghijklmnopqrstuvwxyz",Sl="0123456789",Dl={DIGIT:Sl,ALPHA:Ca,ALPHA_DIGIT:Ca+Ca.toUpperCase()+Sl},cm=(r=16,e=Dl.ALPHA_DIGIT)=>{let t="",{length:n}=e;for(;r--;)t+=e[Math.random()*n|0];return t};pm=r=>{let e=new Array(10),t=(n,s)=>{if(ss(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;let i=_r(n)?[]:{};return hn(n,(a,o)=>{let u=t(a,s+1);!pn(u)&&(i[o]=u)}),e[s]=void 0,i}}return n};return t(r,0)},hm=rt("AsyncFunction"),fm=r=>r&&(ss(r)||ze(r))&&ze(r.then)&&ze(r.catch),E={isArray:_r,isArrayBuffer:jl,isBuffer:Lf,isFormData:Zf,isArrayBufferView:Df,isString:qf,isNumber:kl,isBoolean:Uf,isObject:ss,isPlainObject:ts,isUndefined:pn,isDate:Vf,isFile:Ff,isBlob:Bf,isRegExp:im,isFunction:ze,isStream:Kf,isURLSearchParams:$f,isTypedArray:em,isFileList:zf,forEach:hn,merge:Sa,extend:Qf,trim:Hf,stripBOM:Jf,inherits:Yf,toFlatObject:Wf,kindOf:rs,kindOfTest:rt,endsWith:Gf,toArray:Xf,forEachEntry:tm,matchAll:rm,isHTMLForm:nm,hasOwnProperty:Cl,hasOwnProp:Cl,reduceDescriptors:Ll,freezeMethods:am,toObjectSet:om,toCamelCase:sm,noop:um,toFiniteNumber:lm,findKey:Rl,global:Ml,isContextDefined:Nl,ALPHABET:Dl,generateString:cm,isSpecCompliantForm:dm,toJSONObject:pm,isAsyncFn:hm,isThenable:fm}});function vr(r,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s)}var ql,Ul,G,ht=R(()=>{"use strict";me();E.inherits(vr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:E.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});ql=vr.prototype,Ul={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Ul[r]={value:r}});Object.defineProperties(vr,Ul);Object.defineProperty(ql,"isAxiosError",{value:!0});vr.from=(r,e,t,n,s,i)=>{let a=Object.create(ql);return E.toFlatObject(r,a,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),vr.call(a,r.message,e,t,n,s),a.cause=r,a.name=r.name,i&&Object.assign(a,i),a};G=vr});var is,ka=R(()=>{is=null});function Ra(r){return E.isPlainObject(r)||E.isArray(r)}function Fl(r){return E.endsWith(r,"[]")?r.slice(0,-2):r}function Vl(r,e,t){return r?r.concat(e).map(function(s,i){return s=Fl(s),!t&&i?"["+s+"]":s}).join(t?".":""):e}function mm(r){return E.isArray(r)&&!r.some(Ra)}function bm(r,e,t){if(!E.isObject(r))throw new TypeError("target must be an object");e=e||new(is||FormData),t=E.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,j){return!E.isUndefined(j[T])});let n=t.metaTokens,s=t.visitor||d,i=t.dots,a=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&E.isSpecCompliantForm(e);if(!E.isFunction(s))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(E.isDate(m))return m.toISOString();if(!u&&E.isBlob(m))throw new G("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(m)||E.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,T,j){let S=m;if(m&&!j&&typeof m=="object"){if(E.endsWith(T,"{}"))T=n?T:T.slice(0,-2),m=JSON.stringify(m);else if(E.isArray(m)&&mm(m)||(E.isFileList(m)||E.endsWith(T,"[]"))&&(S=E.toArray(m)))return T=Fl(T),S.forEach(function(U,w){!(E.isUndefined(U)||U===null)&&e.append(a===!0?Vl([T],w,i):a===null?T:T+"[]",l(U))}),!1}return Ra(m)?!0:(e.append(Vl(j,T,i),l(m)),!1)}let b=[],v=Object.assign(ym,{defaultVisitor:d,convertValue:l,isVisitable:Ra});function P(m,T){if(!E.isUndefined(m)){if(b.indexOf(m)!==-1)throw Error("Circular reference detected in "+T.join("."));b.push(m),E.forEach(m,function(S,k){(!(E.isUndefined(S)||S===null)&&s.call(e,S,E.isString(k)?k.trim():k,T,v))===!0&&P(S,T?T.concat(k):[k])}),b.pop()}}if(!E.isObject(r))throw new TypeError("data must be an object");return P(r),e}var ym,It,fn=R(()=>{"use strict";me();ht();ka();ym=E.toFlatObject(E,{},null,function(e){return/^is[A-Z]/.test(e)});It=bm});function Bl(r){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function zl(r,e){this._pairs=[],r&&It(r,this,e)}var Kl,as,Ma=R(()=>{"use strict";fn();Kl=zl.prototype;Kl.append=function(e,t){this._pairs.push([e,t])};Kl.toString=function(e){let t=e?function(n){return e.call(this,n,Bl)}:Bl;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};as=zl});function gm(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mn(r,e,t){if(!e)return r;let n=t&&t.encode||gm,s=t&&t.serialize,i;if(s?i=s(e,t):i=E.isURLSearchParams(e)?e.toString():new as(e,t).toString(n),i){let a=r.indexOf("#");a!==-1&&(r=r.slice(0,a)),r+=(r.indexOf("?")===-1?"?":"&")+i}return r}var Na=R(()=>{"use strict";me();Ma()});var La,Da,Zl=R(()=>{"use strict";me();La=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){E.forEach(this.handlers,function(n){n!==null&&e(n)})}},Da=La});var os,qa=R(()=>{"use strict";os={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var $l,Hl=R(()=>{"use strict";Ma();$l=typeof URLSearchParams<"u"?URLSearchParams:as});var Ql,Jl=R(()=>{"use strict";Ql=typeof FormData<"u"?FormData:null});var Yl,Wl=R(()=>{"use strict";Yl=typeof Blob<"u"?Blob:null});var wm,_m,Pe,Gl=R(()=>{Hl();Jl();Wl();wm=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),_m=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Pe={isBrowser:!0,classes:{URLSearchParams:$l,FormData:Ql,Blob:Yl},isStandardBrowserEnv:wm,isStandardBrowserWebWorkerEnv:_m,protocols:["http","https","file","blob","url","data"]}});var xr=R(()=>{Gl()});function Ua(r,e){return It(r,new Pe.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,i){return Pe.isNode&&E.isBuffer(t)?(this.append(n,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}var Xl=R(()=>{"use strict";me();fn();xr()});function vm(r){return E.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function xm(r){let e={},t=Object.keys(r),n,s=t.length,i;for(n=0;n<s;n++)i=t[n],e[i]=r[i];return e}function Om(r){function e(t,n,s,i){let a=t[i++],o=Number.isFinite(+a),u=i>=t.length;return a=!a&&E.isArray(s)?s.length:a,u?(E.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!E.isObject(s[a]))&&(s[a]=[]),e(t,n,s[a],i)&&E.isArray(s[a])&&(s[a]=xm(s[a])),!o)}if(E.isFormData(r)&&E.isFunction(r.entries)){let t={};return E.forEachEntry(r,(n,s)=>{e(vm(n),s,t,0)}),t}return null}var us,Va=R(()=>{"use strict";me();us=Om});function Am(r,e,t){if(E.isString(r))try{return(e||JSON.parse)(r),E.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var Pm,ls,Or,cs=R(()=>{"use strict";me();ht();qa();fn();Xl();xr();Va();Pm={"Content-Type":void 0};ls={transitional:os,adapter:["xhr","http"],transformRequest:[function(e,t){let n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=E.isObject(e);if(i&&E.isHTMLForm(e)&&(e=new FormData(e)),E.isFormData(e))return s&&s?JSON.stringify(us(e)):e;if(E.isArrayBuffer(e)||E.isBuffer(e)||E.isStream(e)||E.isFile(e)||E.isBlob(e))return e;if(E.isArrayBufferView(e))return e.buffer;if(E.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ua(e,this.formSerializer).toString();if((o=E.isFileList(e))||n.indexOf("multipart/form-data")>-1){let u=this.env&&this.env.FormData;return It(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),Am(e)):e}],transformResponse:[function(e){let t=this.transitional||ls.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&E.isString(e)&&(n&&!this.responseType||s)){let a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?G.from(o,G.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};E.forEach(["delete","get","head"],function(e){ls.headers[e]={}});E.forEach(["post","put","patch"],function(e){ls.headers[e]=E.merge(Pm)});Or=ls});var Tm,ec,tc=R(()=>{"use strict";me();Tm=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ec=r=>{let e={},t,n,s;return r&&r.split(`
`).forEach(function(a){s=a.indexOf(":"),t=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!t||e[t]&&Tm[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e}});function yn(r){return r&&String(r).trim().toLowerCase()}function ds(r){return r===!1||r==null?r:E.isArray(r)?r.map(ds):String(r)}function Em(r){let e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}function Fa(r,e,t,n,s){if(E.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!E.isString(e)){if(E.isString(n))return e.indexOf(n)!==-1;if(E.isRegExp(n))return n.test(e)}}function Cm(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function Sm(r,e){let t=E.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}var rc,Im,Pr,Ie,Zt=R(()=>{"use strict";me();tc();rc=Symbol("internals");Im=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());Pr=class{constructor(e){e&&this.set(e)}set(e,t,n){let s=this;function i(o,u,l){let d=yn(u);if(!d)throw new Error("header name must be a non-empty string");let b=E.findKey(s,d);(!b||s[b]===void 0||l===!0||l===void 0&&s[b]!==!1)&&(s[b||u]=ds(o))}let a=(o,u)=>E.forEach(o,(l,d)=>i(l,d,u));return E.isPlainObject(e)||e instanceof this.constructor?a(e,t):E.isString(e)&&(e=e.trim())&&!Im(e)?a(ec(e),t):e!=null&&i(t,e,n),this}get(e,t){if(e=yn(e),e){let n=E.findKey(this,e);if(n){let s=this[n];if(!t)return s;if(t===!0)return Em(s);if(E.isFunction(t))return t.call(this,s,n);if(E.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yn(e),e){let n=E.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Fa(this,this[n],n,t)))}return!1}delete(e,t){let n=this,s=!1;function i(a){if(a=yn(a),a){let o=E.findKey(n,a);o&&(!t||Fa(n,n[o],o,t))&&(delete n[o],s=!0)}}return E.isArray(e)?e.forEach(i):i(e),s}clear(e){let t=Object.keys(this),n=t.length,s=!1;for(;n--;){let i=t[n];(!e||Fa(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){let t=this,n={};return E.forEach(this,(s,i)=>{let a=E.findKey(n,i);if(a){t[a]=ds(s),delete t[i];return}let o=e?Cm(i):String(i).trim();o!==i&&delete t[i],t[o]=ds(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return E.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&E.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){let n=(this[rc]=this[rc]={accessors:{}}).accessors,s=this.prototype;function i(a){let o=yn(a);n[o]||(Sm(s,a),n[o]=!0)}return E.isArray(e)?e.forEach(i):i(e),this}};Pr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);E.freezeMethods(Pr.prototype);E.freezeMethods(Pr);Ie=Pr});function bn(r,e){let t=this||Or,n=e||t,s=Ie.from(n.headers),i=n.data;return E.forEach(r,function(o){i=o.call(t,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}var nc=R(()=>{"use strict";me();cs();Zt()});function gn(r){return!!(r&&r.__CANCEL__)}var Ba=R(()=>{"use strict"});function sc(r,e,t){G.call(this,r??"canceled",G.ERR_CANCELED,e,t),this.name="CanceledError"}var Ct,wn=R(()=>{"use strict";ht();me();E.inherits(sc,G,{__CANCEL__:!0});Ct=sc});function za(r,e,t){let n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new G("Request failed with status code "+t.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var ic=R(()=>{"use strict";ht()});var ac,oc=R(()=>{"use strict";me();xr();ac=Pe.isStandardBrowserEnv?function(){return{write:function(t,n,s,i,a,o){let u=[];u.push(t+"="+encodeURIComponent(n)),E.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),E.isString(i)&&u.push("path="+i),E.isString(a)&&u.push("domain="+a),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){let n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});function Ka(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}var uc=R(()=>{"use strict"});function Za(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}var lc=R(()=>{"use strict"});function _n(r,e){return r&&!Ka(e)?Za(r,e):e}var $a=R(()=>{"use strict";uc();lc()});var cc,dc=R(()=>{"use strict";me();xr();cc=Pe.isStandardBrowserEnv?function(){let e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function s(i){let a=i;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=s(window.location.href),function(a){let o=E.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});function Ha(r){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}var pc=R(()=>{"use strict"});function jm(r,e){r=r||10;let t=new Array(r),n=new Array(r),s=0,i=0,a;return e=e!==void 0?e:1e3,function(u){let l=Date.now(),d=n[i];a||(a=l),t[s]=u,n[s]=l;let b=i,v=0;for(;b!==s;)v+=t[b++],b=b%r;if(s=(s+1)%r,s===i&&(i=(i+1)%r),l-a<e)return;let P=d&&l-d;return P?Math.round(v*1e3/P):void 0}}var hc,fc=R(()=>{"use strict";hc=jm});function mc(r,e){let t=0,n=hc(50,250);return s=>{let i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-t,u=n(o),l=i<=a;t=i;let d={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:u||void 0,estimated:u&&a&&l?(a-i)/u:void 0,event:s};d[e?"download":"upload"]=!0,r(d)}}var km,yc,bc=R(()=>{"use strict";me();ic();oc();Na();$a();dc();qa();ht();wn();pc();xr();Zt();fc();km=typeof XMLHttpRequest<"u",yc=km&&function(r){return new Promise(function(t,n){let s=r.data,i=Ie.from(r.headers).normalize(),a=r.responseType,o;function u(){r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}E.isFormData(s)&&(Pe.isStandardBrowserEnv||Pe.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(r.auth){let P=r.auth.username||"",m=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";i.set("Authorization","Basic "+btoa(P+":"+m))}let d=_n(r.baseURL,r.url);l.open(r.method.toUpperCase(),mn(d,r.params,r.paramsSerializer),!0),l.timeout=r.timeout;function b(){if(!l)return;let P=Ie.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:P,config:r,request:l};za(function(S){t(S),u()},function(S){n(S),u()},T),l=null}if("onloadend"in l?l.onloadend=b:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(b)},l.onabort=function(){l&&(n(new G("Request aborted",G.ECONNABORTED,r,l)),l=null)},l.onerror=function(){n(new G("Network Error",G.ERR_NETWORK,r,l)),l=null},l.ontimeout=function(){let m=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded",T=r.transitional||os;r.timeoutErrorMessage&&(m=r.timeoutErrorMessage),n(new G(m,T.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,r,l)),l=null},Pe.isStandardBrowserEnv){let P=(r.withCredentials||cc(d))&&r.xsrfCookieName&&ac.read(r.xsrfCookieName);P&&i.set(r.xsrfHeaderName,P)}s===void 0&&i.setContentType(null),"setRequestHeader"in l&&E.forEach(i.toJSON(),function(m,T){l.setRequestHeader(T,m)}),E.isUndefined(r.withCredentials)||(l.withCredentials=!!r.withCredentials),a&&a!=="json"&&(l.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&l.addEventListener("progress",mc(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",mc(r.onUploadProgress)),(r.cancelToken||r.signal)&&(o=P=>{l&&(n(!P||P.type?new Ct(null,r,l):P),l.abort(),l=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));let v=Ha(d);if(v&&Pe.protocols.indexOf(v)===-1){n(new G("Unsupported protocol "+v+":",G.ERR_BAD_REQUEST,r));return}l.send(s||null)})}});var ps,gc,wc=R(()=>{me();ka();bc();ht();ps={http:is,xhr:yc};E.forEach(ps,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});gc={getAdapter:r=>{r=E.isArray(r)?r:[r];let{length:e}=r,t,n;for(let s=0;s<e&&(t=r[s],!(n=E.isString(t)?ps[t.toLowerCase()]:t));s++);if(!n)throw n===!1?new G(`Adapter ${t} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(E.hasOwnProp(ps,t)?`Adapter '${t}' is not available in the build`:`Unknown adapter '${t}'`);if(!E.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:ps}});function Qa(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Ct(null,r)}function hs(r){return Qa(r),r.headers=Ie.from(r.headers),r.data=bn.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),gc.getAdapter(r.adapter||Or.adapter)(r).then(function(n){return Qa(r),n.data=bn.call(r,r.transformResponse,n),n.headers=Ie.from(n.headers),n},function(n){return gn(n)||(Qa(r),n&&n.response&&(n.response.data=bn.call(r,r.transformResponse,n.response),n.response.headers=Ie.from(n.response.headers))),Promise.reject(n)})}var _c=R(()=>{"use strict";nc();Ba();cs();wn();Zt();wc()});function ft(r,e){e=e||{};let t={};function n(l,d,b){return E.isPlainObject(l)&&E.isPlainObject(d)?E.merge.call({caseless:b},l,d):E.isPlainObject(d)?E.merge({},d):E.isArray(d)?d.slice():d}function s(l,d,b){if(E.isUndefined(d)){if(!E.isUndefined(l))return n(void 0,l,b)}else return n(l,d,b)}function i(l,d){if(!E.isUndefined(d))return n(void 0,d)}function a(l,d){if(E.isUndefined(d)){if(!E.isUndefined(l))return n(void 0,l)}else return n(void 0,d)}function o(l,d,b){if(b in e)return n(l,d);if(b in r)return n(void 0,l)}let u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(l,d)=>s(vc(l),vc(d),!0)};return E.forEach(Object.keys(Object.assign({},r,e)),function(d){let b=u[d]||s,v=b(r[d],e[d],d);E.isUndefined(v)&&b!==o||(t[d]=v)}),t}var vc,Ja=R(()=>{"use strict";me();Zt();vc=r=>r instanceof Ie?r.toJSON():r});var fs,Ya=R(()=>{fs="1.4.0"});function Rm(r,e,t){if(typeof r!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);let n=Object.keys(r),s=n.length;for(;s-- >0;){let i=n[s],a=e[i];if(a){let o=r[i],u=o===void 0||a(o,i,r);if(u!==!0)throw new G("option "+i+" must be "+u,G.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new G("Unknown option "+i,G.ERR_BAD_OPTION)}}var Wa,xc,ms,Oc=R(()=>{"use strict";Ya();ht();Wa={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Wa[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});xc={};Wa.transitional=function(e,t,n){function s(i,a){return"[Axios v"+fs+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new G(s(a," has been removed"+(t?" in "+t:"")),G.ERR_DEPRECATED);return t&&!xc[a]&&(xc[a]=!0),e?e(i,a,o):!0}};ms={assertOptions:Rm,validators:Wa}});var St,Ar,vn,Pc=R(()=>{"use strict";me();Na();Zl();_c();Ja();$a();Oc();Zt();St=ms.validators,Ar=class{constructor(e){this.defaults=e,this.interceptors={request:new Da,response:new Da}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ft(this.defaults,t);let{transitional:n,paramsSerializer:s,headers:i}=t;n!==void 0&&ms.assertOptions(n,{silentJSONParsing:St.transitional(St.boolean),forcedJSONParsing:St.transitional(St.boolean),clarifyTimeoutError:St.transitional(St.boolean)},!1),s!=null&&(E.isFunction(s)?t.paramsSerializer={serialize:s}:ms.assertOptions(s,{encode:St.function,serialize:St.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a;a=i&&E.merge(i.common,i[t.method]),a&&E.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),t.headers=Ie.concat(a,i);let o=[],u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(u=u&&T.synchronous,o.unshift(T.fulfilled,T.rejected))});let l=[];this.interceptors.response.forEach(function(T){l.push(T.fulfilled,T.rejected)});let d,b=0,v;if(!u){let m=[hs.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,l),v=m.length,d=Promise.resolve(t);b<v;)d=d.then(m[b++],m[b++]);return d}v=o.length;let P=t;for(b=0;b<v;){let m=o[b++],T=o[b++];try{P=m(P)}catch(j){T.call(this,j);break}}try{d=hs.call(this,P)}catch(m){return Promise.reject(m)}for(b=0,v=l.length;b<v;)d=d.then(l[b++],l[b++]);return d}getUri(e){e=ft(this.defaults,e);let t=_n(e.baseURL,e.url);return mn(t,e.params,e.paramsSerializer)}};E.forEach(["delete","get","head","options"],function(e){Ar.prototype[e]=function(t,n){return this.request(ft(n||{},{method:e,url:t,data:(n||{}).data}))}});E.forEach(["post","put","patch"],function(e){function t(n){return function(i,a,o){return this.request(ft(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Ar.prototype[e]=t(),Ar.prototype[e+"Form"]=t(!0)});vn=Ar});var xn,Ac,Tc=R(()=>{"use strict";wn();xn=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});let n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i,a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new Ct(i,a,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new xn(function(s){e=s}),cancel:e}}},Ac=xn});function Ga(r){return function(t){return r.apply(null,t)}}var Ec=R(()=>{"use strict"});function Xa(r){return E.isObject(r)&&r.isAxiosError===!0}var Ic=R(()=>{"use strict";me()});var eo,Cc,Sc=R(()=>{eo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(eo).forEach(([r,e])=>{eo[e]=r});Cc=eo});function jc(r){let e=new vn(r),t=dn(vn.prototype.request,e);return E.extend(t,vn.prototype,e,{allOwnKeys:!0}),E.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return jc(ft(r,s))},t}var ye,$t,kc=R(()=>{"use strict";me();Ia();Pc();Ja();cs();Va();wn();Tc();Ba();Ya();fn();ht();Ec();Ic();Zt();Sc();ye=jc(Or);ye.Axios=vn;ye.CanceledError=Ct;ye.CancelToken=Ac;ye.isCancel=gn;ye.VERSION=fs;ye.toFormData=It;ye.AxiosError=G;ye.Cancel=ye.CanceledError;ye.all=function(e){return Promise.all(e)};ye.spread=Ga;ye.isAxiosError=Xa;ye.mergeConfig=ft;ye.AxiosHeaders=Ie;ye.formToJSON=r=>us(E.isHTMLForm(r)?new FormData(r):r);ye.HttpStatusCode=Cc;ye.default=ye;$t=ye});var o0,u0,l0,c0,d0,p0,h0,f0,m0,y0,b0,g0,w0,_0,v0,Rc=R(()=>{kc();({Axios:o0,AxiosError:u0,CanceledError:l0,isCancel:c0,CancelToken:d0,VERSION:p0,all:h0,Cancel:f0,isAxiosError:m0,spread:y0,toFormData:b0,AxiosHeaders:g0,HttpStatusCode:w0,formToJSON:_0,mergeConfig:v0}=$t)});async function Mc(r,e){let t=r.getReader();for(;;){let n=await t.read();if(n.done){e(new Uint8Array,!0);break}e(n.value)}}function Nc(r){let e,t,n,s=!1;return function(a,o){if(o){r(a,0,!0);return}e===void 0?(e=a,t=0,n=-1):e=Mm(e,a);let u=e.length,l=0;for(;t<u;){s&&(e[t]===10&&(l=++t),s=!1);let d=-1;for(;t<u&&d===-1;++t)switch(e[t]){case 58:n===-1&&(n=t-l);break;case 13:s=!0;case 10:d=t;break}if(d===-1)break;r(e.subarray(l,d),n),l=t,n=-1}l===u?e=void 0:l!==0&&(e=e.subarray(l),t-=l)}}function Lc(r,e,t){let n=to(),s=new TextDecoder;return function(a,o,u){if(u){Nm(n)||(r?.(n),n=to());return}if(a.length===0)r?.(n),n=to();else if(o>0){let l=s.decode(a.subarray(0,o)),d=o+(a[o+1]===32?2:1),b=s.decode(a.subarray(d));switch(l){case"data":n.data=n.data?n.data+`
`+b:b;break;case"event":n.event=b;break;case"id":e?.(n.id=b);break;case"retry":{let v=parseInt(b,10);Number.isNaN(v)||t?.(n.retry=v);break}}}}}function Mm(r,e){let t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function to(){return{data:"",event:"",id:"",retry:void 0}}function Nm(r){return r.data===""&&r.event===""&&r.id===""&&r.retry===void 0}var ys,Dc=R(()=>{ys="text/event-stream"});function Lm(r){try{return JSON.stringify(r)}catch{return r}}function Dm(r,e,t){let{validateStatus:n}=t.config;!t.status||!n||n(t.status)?r(t):e(bs(`Request failed with status code ${t.status} and body ${typeof t.data=="string"?t.data:Lm(t.data)}`,t.config,null,t.request,t))}function qm(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Um(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r}function qc(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vm(r,e,t){if(!e)return r;var n;if(t)n=t(e);else if(Zm(e))n=e.toString();else{var s=[];Uc(e,function(o,u){o===null||typeof o>"u"||(Vc(o)?u=`${u}[]`:o=[o],Uc(o,function(d){Km(d)?d=d.toISOString():zm(d)&&(d=JSON.stringify(d)),s.push(`${qc(u)}=${qc(d)}`)}))}),n=s.join("&")}if(n){var i=r.indexOf("#");i!==-1&&(r=r.slice(0,i)),r+=(r.indexOf("?")===-1?"?":"&")+n}return r}function Fm(r,e){return r&&!qm(e)?Um(r,e):e}function Bm(r){return typeof r>"u"}function zm(r){return r!==null&&typeof r=="object"}function Km(r){return toString.call(r)==="[object Date]"}function Zm(r){return toString.call(r)==="[object URLSearchParams]"}function Vc(r){return Array.isArray(r)}function Uc(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),Vc(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.call(null,r[s],s,r)}function $m(r){return toString.call(r)==="[object FormData]"}function Hm(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}async function Ue(r){let e=Jm(r),t=await Qm(e,r);return new Promise((n,s)=>{t instanceof Error?s(t):Object.prototype.toString.call(r.settle)==="[object Function]"?r.settle(n,s,t):Dm(n,s,t)})}async function Qm(r,e){let t;try{t=await fetch(r)}catch(i){return i&&i.name==="AbortError"?bs("Request aborted",e,"ECONNABORTED",r):i&&i.name==="TimeoutError"?bs("Request timeout",e,"ECONNABORTED",r):bs("Network Error",e,"ERR_NETWORK",r)}let n={};t.headers.forEach((i,a)=>{n[a]=i});let s={ok:t.ok,status:t.status,statusText:t.statusText,headers:n,config:e,request:r};if(t.status>=200&&t.status!==204)if(e.responseType==="stream"){let i=t.headers.get("content-type");if(!i?.startsWith(ys)){if(t.status>=400)return i?.startsWith("application/json")?(s.data=await t.json(),s):(s.data=await t.text(),s);throw new Error(`Expected content-type to be ${ys}, Actual: ${i}`)}await Mc(t.body,Nc(Lc(e.onmessage)))}else switch(e.responseType){case"arraybuffer":s.data=await t.arrayBuffer();break;case"blob":s.data=await t.blob();break;case"json":s.data=await t.json();break;case"formData":s.data=await t.formData();break;default:s.data=await t.text();break}return s}function Jm(r){let e=new Headers(r.headers);if(r.auth){let a=r.auth.username||"",o=r.auth.password?decodeURI(encodeURIComponent(r.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${a}:${o}`)}`)}let t=r.method.toUpperCase(),n={headers:e,method:t};t!=="GET"&&t!=="HEAD"&&(n.body=r.data,$m(n.body)&&Hm()&&e.delete("Content-Type")),typeof n.body=="string"&&(n.body=new TextEncoder().encode(n.body)),r.mode&&(n.mode=r.mode),r.cache&&(n.cache=r.cache),r.integrity&&(n.integrity=r.integrity),r.redirect&&(n.redirect=r.redirect),r.referrer&&(n.referrer=r.referrer),r.timeout&&r.timeout>0&&(n.signal=AbortSignal.timeout(r.timeout)),r.signal&&(n.signal=r.signal),Bm(r.withCredentials)||(n.credentials=r.withCredentials?"include":"omit"),r.responseType==="stream"&&n.headers.set("Accept",ys);let s=Fm(r.baseURL,r.url),i=Vm(s,r.params,r.paramsSerializer);return new Request(i,n)}function bs(r,e,t,n,s){if($t.AxiosError&&typeof $t.AxiosError=="function")return new $t.AxiosError(r,$t.AxiosError[t],e,n,s);let i=new Error(r);return Ym(i,e,t,n,s)}function Ym(r,e,t,n,s){return r.config=e,t&&(r.code=t),r.request=n,r.response=s,r.isAxiosError=!0,r.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},r}var Tr=R(()=>{Rc();Dc()});var On,ro=R(()=>{On=(r,e)=>r.reduce((t,n,s)=>{let i=Math.floor(s/e),a=t[i]||[];return t[i]=a.concat([n]),t},[])});var zc=M((Fc,Bc)=>{(function(r){var e;typeof Fc=="object"?Bc.exports=r():typeof define=="function"&&define.amd?define(r):(typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"&&(e=self),e.objectHash=r())})(function(){return function r(e,t,n){function s(o,u){if(!t[o]){if(!e[o]){var l=typeof un=="function"&&un;if(!u&&l)return l(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}u=t[o]={exports:{}},e[o][0].call(u.exports,function(d){var b=e[o][1][d];return s(b||d)},u,u.exports,r,e,t,n)}return t[o].exports}for(var i=typeof un=="function"&&un,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){"use strict";var v=r("crypto");function P(w,C){C=j(w,C);var h;return(h=C.algorithm!=="passthrough"?v.createHash(C.algorithm):new U).write===void 0&&(h.write=h.update,h.end=h.update),k(C,h).dispatch(w),h.update||h.end(""),h.digest?h.digest(C.encoding==="buffer"?void 0:C.encoding):(w=h.read(),C.encoding!=="buffer"?w.toString(C.encoding):w)}(t=e.exports=P).sha1=function(w){return P(w)},t.keys=function(w){return P(w,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},t.MD5=function(w){return P(w,{algorithm:"md5",encoding:"hex"})},t.keysMD5=function(w){return P(w,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var m=v.getHashes?v.getHashes().slice():["sha1","md5"],T=(m.push("passthrough"),["buffer","hex","binary","base64"]);function j(w,C){var h={};if(h.algorithm=(C=C||{}).algorithm||"sha1",h.encoding=C.encoding||"hex",h.excludeValues=!!C.excludeValues,h.algorithm=h.algorithm.toLowerCase(),h.encoding=h.encoding.toLowerCase(),h.ignoreUnknown=C.ignoreUnknown===!0,h.respectType=C.respectType!==!1,h.respectFunctionNames=C.respectFunctionNames!==!1,h.respectFunctionProperties=C.respectFunctionProperties!==!1,h.unorderedArrays=C.unorderedArrays===!0,h.unorderedSets=C.unorderedSets!==!1,h.unorderedObjects=C.unorderedObjects!==!1,h.replacer=C.replacer||void 0,h.excludeKeys=C.excludeKeys||void 0,w===void 0)throw new Error("Object argument required.");for(var y=0;y<m.length;++y)m[y].toLowerCase()===h.algorithm.toLowerCase()&&(h.algorithm=m[y]);if(m.indexOf(h.algorithm)===-1)throw new Error('Algorithm "'+h.algorithm+'"  not supported. supported values: '+m.join(", "));if(T.indexOf(h.encoding)===-1&&h.algorithm!=="passthrough")throw new Error('Encoding "'+h.encoding+'"  not supported. supported values: '+T.join(", "));return h}function S(w){if(typeof w=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(w))!=null}function k(w,C,h){h=h||[];function y(p){return C.update?C.update(p,"utf8"):C.write(p,"utf8")}return{dispatch:function(p){return this["_"+((p=w.replacer?w.replacer(p):p)===null?"null":typeof p)](p)},_object:function(p){var O,I=Object.prototype.toString.call(p),Q=/\[object (.*)\]/i.exec(I);if(Q=(Q=Q?Q[1]:"unknown:["+I+"]").toLowerCase(),0<=(I=h.indexOf(p)))return this.dispatch("[CIRCULAR:"+I+"]");if(h.push(p),i!==void 0&&i.isBuffer&&i.isBuffer(p))return y("buffer:"),y(p);if(Q==="object"||Q==="function"||Q==="asyncfunction")return I=Object.keys(p),w.unorderedObjects&&(I=I.sort()),w.respectType===!1||S(p)||I.splice(0,0,"prototype","__proto__","constructor"),w.excludeKeys&&(I=I.filter(function($){return!w.excludeKeys($)})),y("object:"+I.length+":"),O=this,I.forEach(function($){O.dispatch($),y(":"),w.excludeValues||O.dispatch(p[$]),y(",")});if(!this["_"+Q]){if(w.ignoreUnknown)return y("["+Q+"]");throw new Error('Unknown object type "'+Q+'"')}this["_"+Q](p)},_array:function(p,$){$=$!==void 0?$:w.unorderedArrays!==!1;var I=this;if(y("array:"+p.length+":"),!$||p.length<=1)return p.forEach(function(J){return I.dispatch(J)});var Q=[],$=p.map(function(J){var B=new U,ce=h.slice();return k(w,B,ce).dispatch(J),Q=Q.concat(ce.slice(h.length)),B.read().toString()});return h=h.concat(Q),$.sort(),this._array($,!1)},_date:function(p){return y("date:"+p.toJSON())},_symbol:function(p){return y("symbol:"+p.toString())},_error:function(p){return y("error:"+p.toString())},_boolean:function(p){return y("bool:"+p.toString())},_string:function(p){y("string:"+p.length+":"),y(p.toString())},_function:function(p){y("fn:"),S(p)?this.dispatch("[native]"):this.dispatch(p.toString()),w.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(p.name)),w.respectFunctionProperties&&this._object(p)},_number:function(p){return y("number:"+p.toString())},_xml:function(p){return y("xml:"+p.toString())},_null:function(){return y("Null")},_undefined:function(){return y("Undefined")},_regexp:function(p){return y("regex:"+p.toString())},_uint8array:function(p){return y("uint8array:"),this.dispatch(Array.prototype.slice.call(p))},_uint8clampedarray:function(p){return y("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(p))},_int8array:function(p){return y("int8array:"),this.dispatch(Array.prototype.slice.call(p))},_uint16array:function(p){return y("uint16array:"),this.dispatch(Array.prototype.slice.call(p))},_int16array:function(p){return y("int16array:"),this.dispatch(Array.prototype.slice.call(p))},_uint32array:function(p){return y("uint32array:"),this.dispatch(Array.prototype.slice.call(p))},_int32array:function(p){return y("int32array:"),this.dispatch(Array.prototype.slice.call(p))},_float32array:function(p){return y("float32array:"),this.dispatch(Array.prototype.slice.call(p))},_float64array:function(p){return y("float64array:"),this.dispatch(Array.prototype.slice.call(p))},_arraybuffer:function(p){return y("arraybuffer:"),this.dispatch(new Uint8Array(p))},_url:function(p){return y("url:"+p.toString())},_map:function(p){return y("map:"),p=Array.from(p),this._array(p,w.unorderedSets!==!1)},_set:function(p){return y("set:"),p=Array.from(p),this._array(p,w.unorderedSets!==!1)},_file:function(p){return y("file:"),this.dispatch([p.name,p.size,p.type,p.lastModfied])},_blob:function(){if(w.ignoreUnknown)return y("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return y("domwindow")},_bigint:function(p){return y("bigint:"+p.toString())},_process:function(){return y("process")},_timer:function(){return y("timer")},_pipe:function(){return y("pipe")},_tcp:function(){return y("tcp")},_udp:function(){return y("udp")},_tty:function(){return y("tty")},_statwatcher:function(){return y("statwatcher")},_securecontext:function(){return y("securecontext")},_connection:function(){return y("connection")},_zlib:function(){return y("zlib")},_context:function(){return y("context")},_nodescript:function(){return y("nodescript")},_httpparser:function(){return y("httpparser")},_dataview:function(){return y("dataview")},_signal:function(){return y("signal")},_fsevent:function(){return y("fsevent")},_tlswrap:function(){return y("tlswrap")}}}function U(){return{buf:"",write:function(w){this.buf+=w},end:function(w){this.buf+=w},read:function(){return this.buf}}}t.writeToStream=function(w,C,h){return h===void 0&&(h=C,C={}),k(C=j(w,C),h).dispatch(w)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){(function(v){"use strict";var P=typeof Uint8Array<"u"?Uint8Array:Array,m="+".charCodeAt(0),T="/".charCodeAt(0),j="0".charCodeAt(0),S="a".charCodeAt(0),k="A".charCodeAt(0),U="-".charCodeAt(0),w="_".charCodeAt(0);function C(h){return h=h.charCodeAt(0),h===m||h===U?62:h===T||h===w?63:h<j?-1:h<j+10?h-j+26+26:h<k+26?h-k:h<S+26?h-S+26:void 0}v.toByteArray=function(h){var y,p;if(0<h.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var O=h.length,O=h.charAt(O-2)==="="?2:h.charAt(O-1)==="="?1:0,I=new P(3*h.length/4-O),Q=0<O?h.length-4:h.length,$=0;function J(B){I[$++]=B}for(y=0;y<Q;y+=4,0)J((16711680&(p=C(h.charAt(y))<<18|C(h.charAt(y+1))<<12|C(h.charAt(y+2))<<6|C(h.charAt(y+3))))>>16),J((65280&p)>>8),J(255&p);return O==2?J(255&(p=C(h.charAt(y))<<2|C(h.charAt(y+1))>>4)):O==1&&(J((p=C(h.charAt(y))<<10|C(h.charAt(y+1))<<4|C(h.charAt(y+2))>>2)>>8&255),J(255&p)),I},v.fromByteArray=function(h){var y,p,O,I,Q=h.length%3,$="";function J(B){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(B)}for(y=0,O=h.length-Q;y<O;y+=3)p=(h[y]<<16)+(h[y+1]<<8)+h[y+2],$+=J((I=p)>>18&63)+J(I>>12&63)+J(I>>6&63)+J(63&I);switch(Q){case 1:$=($+=J((p=h[h.length-1])>>2))+J(p<<4&63)+"==";break;case 2:$=($=($+=J((p=(h[h.length-2]<<8)+h[h.length-1])>>10))+J(p>>4&63))+J(p<<2&63)+"="}return $}})(t===void 0?this.base64js={}:t)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(r,e,t){(function(n,s,m,a,o,u,l,d,b){var v=r("base64-js"),P=r("ieee754");function m(c,f,g){if(!(this instanceof m))return new m(c,f,g);var L,N,F,X,he=typeof c;if(f==="base64"&&he=="string")for(c=(X=c).trim?X.trim():X.replace(/^\s+|\s+$/g,"");c.length%4!=0;)c+="=";if(he=="number")L=Oe(c);else if(he=="string")L=m.byteLength(c,f);else{if(he!="object")throw new Error("First argument needs to be a number, array or string.");L=Oe(c.length)}if(m._useTypedArrays?N=m._augment(new Uint8Array(L)):((N=this).length=L,N._isBuffer=!0),m._useTypedArrays&&typeof c.byteLength=="number")N._set(c);else if(pe(X=c)||m.isBuffer(X)||X&&typeof X=="object"&&typeof X.length=="number")for(F=0;F<L;F++)m.isBuffer(c)?N[F]=c.readUInt8(F):N[F]=c[F];else if(he=="string")N.write(c,0,f);else if(he=="number"&&!m._useTypedArrays&&!g)for(F=0;F<L;F++)N[F]=0;return N}function T(c,f,g,L){return m._charsWritten=Zn(function(N){for(var F=[],X=0;X<N.length;X++)F.push(255&N.charCodeAt(X));return F}(f),c,g,L)}function j(c,f,g,L){return m._charsWritten=Zn(function(N){for(var F,X,he=[],ge=0;ge<N.length;ge++)X=N.charCodeAt(ge),F=X>>8,X=X%256,he.push(X),he.push(F);return he}(f),c,g,L)}function S(c,f,g){var L="";g=Math.min(c.length,g);for(var N=f;N<g;N++)L+=String.fromCharCode(c[N]);return L}function k(c,f,g,F){F||(V(typeof g=="boolean","missing or invalid endian"),V(f!=null,"missing offset"),V(f+1<c.length,"Trying to read beyond buffer length"));var N,F=c.length;if(!(F<=f))return g?(N=c[f],f+1<F&&(N|=c[f+1]<<8)):(N=c[f]<<8,f+1<F&&(N|=c[f+1])),N}function U(c,f,g,F){F||(V(typeof g=="boolean","missing or invalid endian"),V(f!=null,"missing offset"),V(f+3<c.length,"Trying to read beyond buffer length"));var N,F=c.length;if(!(F<=f))return g?(f+2<F&&(N=c[f+2]<<16),f+1<F&&(N|=c[f+1]<<8),N|=c[f],f+3<F&&(N+=c[f+3]<<24>>>0)):(f+1<F&&(N=c[f+1]<<16),f+2<F&&(N|=c[f+2]<<8),f+3<F&&(N|=c[f+3]),N+=c[f]<<24>>>0),N}function w(c,f,g,L){if(L||(V(typeof g=="boolean","missing or invalid endian"),V(f!=null,"missing offset"),V(f+1<c.length,"Trying to read beyond buffer length")),!(c.length<=f))return L=k(c,f,g,!0),32768&L?-1*(65535-L+1):L}function C(c,f,g,L){if(L||(V(typeof g=="boolean","missing or invalid endian"),V(f!=null,"missing offset"),V(f+3<c.length,"Trying to read beyond buffer length")),!(c.length<=f))return L=U(c,f,g,!0),2147483648&L?-1*(4294967295-L+1):L}function h(c,f,g,L){return L||(V(typeof g=="boolean","missing or invalid endian"),V(f+3<c.length,"Trying to read beyond buffer length")),P.read(c,f,g,23,4)}function y(c,f,g,L){return L||(V(typeof g=="boolean","missing or invalid endian"),V(f+7<c.length,"Trying to read beyond buffer length")),P.read(c,f,g,52,8)}function p(c,f,g,L,N){if(N||(V(f!=null,"missing value"),V(typeof L=="boolean","missing or invalid endian"),V(g!=null,"missing offset"),V(g+1<c.length,"trying to write beyond buffer length"),Yi(f,65535)),N=c.length,!(N<=g))for(var F=0,X=Math.min(N-g,2);F<X;F++)c[g+F]=(f&255<<8*(L?F:1-F))>>>8*(L?F:1-F)}function O(c,f,g,L,N){if(N||(V(f!=null,"missing value"),V(typeof L=="boolean","missing or invalid endian"),V(g!=null,"missing offset"),V(g+3<c.length,"trying to write beyond buffer length"),Yi(f,4294967295)),N=c.length,!(N<=g))for(var F=0,X=Math.min(N-g,4);F<X;F++)c[g+F]=f>>>8*(L?F:3-F)&255}function I(c,f,g,L,N){N||(V(f!=null,"missing value"),V(typeof L=="boolean","missing or invalid endian"),V(g!=null,"missing offset"),V(g+1<c.length,"Trying to write beyond buffer length"),Wi(f,32767,-32768)),c.length<=g||p(c,0<=f?f:65535+f+1,g,L,N)}function Q(c,f,g,L,N){N||(V(f!=null,"missing value"),V(typeof L=="boolean","missing or invalid endian"),V(g!=null,"missing offset"),V(g+3<c.length,"Trying to write beyond buffer length"),Wi(f,2147483647,-2147483648)),c.length<=g||O(c,0<=f?f:4294967295+f+1,g,L,N)}function $(c,f,g,L,N){N||(V(f!=null,"missing value"),V(typeof L=="boolean","missing or invalid endian"),V(g!=null,"missing offset"),V(g+3<c.length,"Trying to write beyond buffer length"),du(f,34028234663852886e22,-34028234663852886e22)),c.length<=g||P.write(c,f,g,L,23,4)}function J(c,f,g,L,N){N||(V(f!=null,"missing value"),V(typeof L=="boolean","missing or invalid endian"),V(g!=null,"missing offset"),V(g+7<c.length,"Trying to write beyond buffer length"),du(f,17976931348623157e292,-17976931348623157e292)),c.length<=g||P.write(c,f,g,L,52,8)}t.Buffer=m,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,m.poolSize=8192,m._useTypedArrays=function(){try{var c=new ArrayBuffer(0),f=new Uint8Array(c);return f.foo=function(){return 42},f.foo()===42&&typeof f.subarray=="function"}catch{return!1}}(),m.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.isBuffer=function(c){return!(c==null||!c._isBuffer)},m.byteLength=function(c,f){var g;switch(c+="",f||"utf8"){case"hex":g=c.length/2;break;case"utf8":case"utf-8":g=dt(c).length;break;case"ascii":case"binary":case"raw":g=c.length;break;case"base64":g=lu(c).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":g=2*c.length;break;default:throw new Error("Unknown encoding")}return g},m.concat=function(c,f){if(V(pe(c),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),c.length===0)return new m(0);if(c.length===1)return c[0];if(typeof f!="number")for(N=f=0;N<c.length;N++)f+=c[N].length;for(var g=new m(f),L=0,N=0;N<c.length;N++){var F=c[N];F.copy(g,L),L+=F.length}return g},m.prototype.write=function(c,f,g,L){isFinite(f)?isFinite(g)||(L=g,g=void 0):(ge=L,L=f,f=g,g=ge),f=Number(f)||0;var N,F,X,he,ge=this.length-f;switch((!g||ge<(g=Number(g)))&&(g=ge),L=String(L||"utf8").toLowerCase()){case"hex":N=function(Je,je,ke,we){ke=Number(ke)||0;var fe=Je.length-ke;(!we||fe<(we=Number(we)))&&(we=fe),V((fe=je.length)%2==0,"Invalid hex string"),fe/2<we&&(we=fe/2);for(var fr=0;fr<we;fr++){var pu=parseInt(je.substr(2*fr,2),16);V(!isNaN(pu),"Invalid hex string"),Je[ke+fr]=pu}return m._charsWritten=2*fr,fr}(this,c,f,g);break;case"utf8":case"utf-8":F=this,X=f,he=g,N=m._charsWritten=Zn(dt(c),F,X,he);break;case"ascii":case"binary":N=T(this,c,f,g);break;case"base64":F=this,X=f,he=g,N=m._charsWritten=Zn(lu(c),F,X,he);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":N=j(this,c,f,g);break;default:throw new Error("Unknown encoding")}return N},m.prototype.toString=function(c,f,g){var L,N,F,X,he=this;if(c=String(c||"utf8").toLowerCase(),f=Number(f)||0,(g=g!==void 0?Number(g):he.length)===f)return"";switch(c){case"hex":L=function(ge,Je,je){var ke=ge.length;(!Je||Je<0)&&(Je=0),(!je||je<0||ke<je)&&(je=ke);for(var we="",fe=Je;fe<je;fe++)we+=ue(ge[fe]);return we}(he,f,g);break;case"utf8":case"utf-8":L=function(ge,Je,je){var ke="",we="";je=Math.min(ge.length,je);for(var fe=Je;fe<je;fe++)ge[fe]<=127?(ke+=cu(we)+String.fromCharCode(ge[fe]),we=""):we+="%"+ge[fe].toString(16);return ke+cu(we)}(he,f,g);break;case"ascii":case"binary":L=S(he,f,g);break;case"base64":N=he,X=g,L=(F=f)===0&&X===N.length?v.fromByteArray(N):v.fromByteArray(N.slice(F,X));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":L=function(ge,Je,je){for(var ke=ge.slice(Je,je),we="",fe=0;fe<ke.length;fe+=2)we+=String.fromCharCode(ke[fe]+256*ke[fe+1]);return we}(he,f,g);break;default:throw new Error("Unknown encoding")}return L},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},m.prototype.copy=function(c,f,g,L){if(f=f||0,(L=L||L===0?L:this.length)!==(g=g||0)&&c.length!==0&&this.length!==0){V(g<=L,"sourceEnd < sourceStart"),V(0<=f&&f<c.length,"targetStart out of bounds"),V(0<=g&&g<this.length,"sourceStart out of bounds"),V(0<=L&&L<=this.length,"sourceEnd out of bounds"),L>this.length&&(L=this.length);var N=(L=c.length-f<L-g?c.length-f+g:L)-g;if(N<100||!m._useTypedArrays)for(var F=0;F<N;F++)c[F+f]=this[F+g];else c._set(this.subarray(g,g+N),f)}},m.prototype.slice=function(c,f){var g=this.length;if(c=ce(c,g,0),f=ce(f,g,g),m._useTypedArrays)return m._augment(this.subarray(c,f));for(var L=f-c,N=new m(L,void 0,!0),F=0;F<L;F++)N[F]=this[F+c];return N},m.prototype.get=function(c){return this.readUInt8(c)},m.prototype.set=function(c,f){return this.writeUInt8(c,f)},m.prototype.readUInt8=function(c,f){if(f||(V(c!=null,"missing offset"),V(c<this.length,"Trying to read beyond buffer length")),!(c>=this.length))return this[c]},m.prototype.readUInt16LE=function(c,f){return k(this,c,!0,f)},m.prototype.readUInt16BE=function(c,f){return k(this,c,!1,f)},m.prototype.readUInt32LE=function(c,f){return U(this,c,!0,f)},m.prototype.readUInt32BE=function(c,f){return U(this,c,!1,f)},m.prototype.readInt8=function(c,f){if(f||(V(c!=null,"missing offset"),V(c<this.length,"Trying to read beyond buffer length")),!(c>=this.length))return 128&this[c]?-1*(255-this[c]+1):this[c]},m.prototype.readInt16LE=function(c,f){return w(this,c,!0,f)},m.prototype.readInt16BE=function(c,f){return w(this,c,!1,f)},m.prototype.readInt32LE=function(c,f){return C(this,c,!0,f)},m.prototype.readInt32BE=function(c,f){return C(this,c,!1,f)},m.prototype.readFloatLE=function(c,f){return h(this,c,!0,f)},m.prototype.readFloatBE=function(c,f){return h(this,c,!1,f)},m.prototype.readDoubleLE=function(c,f){return y(this,c,!0,f)},m.prototype.readDoubleBE=function(c,f){return y(this,c,!1,f)},m.prototype.writeUInt8=function(c,f,g){g||(V(c!=null,"missing value"),V(f!=null,"missing offset"),V(f<this.length,"trying to write beyond buffer length"),Yi(c,255)),f>=this.length||(this[f]=c)},m.prototype.writeUInt16LE=function(c,f,g){p(this,c,f,!0,g)},m.prototype.writeUInt16BE=function(c,f,g){p(this,c,f,!1,g)},m.prototype.writeUInt32LE=function(c,f,g){O(this,c,f,!0,g)},m.prototype.writeUInt32BE=function(c,f,g){O(this,c,f,!1,g)},m.prototype.writeInt8=function(c,f,g){g||(V(c!=null,"missing value"),V(f!=null,"missing offset"),V(f<this.length,"Trying to write beyond buffer length"),Wi(c,127,-128)),f>=this.length||(0<=c?this.writeUInt8(c,f,g):this.writeUInt8(255+c+1,f,g))},m.prototype.writeInt16LE=function(c,f,g){I(this,c,f,!0,g)},m.prototype.writeInt16BE=function(c,f,g){I(this,c,f,!1,g)},m.prototype.writeInt32LE=function(c,f,g){Q(this,c,f,!0,g)},m.prototype.writeInt32BE=function(c,f,g){Q(this,c,f,!1,g)},m.prototype.writeFloatLE=function(c,f,g){$(this,c,f,!0,g)},m.prototype.writeFloatBE=function(c,f,g){$(this,c,f,!1,g)},m.prototype.writeDoubleLE=function(c,f,g){J(this,c,f,!0,g)},m.prototype.writeDoubleBE=function(c,f,g){J(this,c,f,!1,g)},m.prototype.fill=function(c,f,g){if(f=f||0,g=g||this.length,V(typeof(c=typeof(c=c||0)=="string"?c.charCodeAt(0):c)=="number"&&!isNaN(c),"value is not a number"),V(f<=g,"end < start"),g!==f&&this.length!==0){V(0<=f&&f<this.length,"start out of bounds"),V(0<=g&&g<=this.length,"end out of bounds");for(var L=f;L<g;L++)this[L]=c}},m.prototype.inspect=function(){for(var c=[],f=this.length,g=0;g<f;g++)if(c[g]=ue(this[g]),g===t.INSPECT_MAX_BYTES){c[g+1]="...";break}return"<Buffer "+c.join(" ")+">"},m.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(m._useTypedArrays)return new m(this).buffer;for(var c=new Uint8Array(this.length),f=0,g=c.length;f<g;f+=1)c[f]=this[f];return c.buffer};var B=m.prototype;function ce(c,f,g){return typeof c!="number"?g:f<=(c=~~c)?f:0<=c||0<=(c+=f)?c:0}function Oe(c){return(c=~~Math.ceil(+c))<0?0:c}function pe(c){return(Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"})(c)}function ue(c){return c<16?"0"+c.toString(16):c.toString(16)}function dt(c){for(var f=[],g=0;g<c.length;g++){var L=c.charCodeAt(g);if(L<=127)f.push(c.charCodeAt(g));else for(var N=g,F=(55296<=L&&L<=57343&&g++,encodeURIComponent(c.slice(N,g+1)).substr(1).split("%")),X=0;X<F.length;X++)f.push(parseInt(F[X],16))}return f}function lu(c){return v.toByteArray(c)}function Zn(c,f,g,L){for(var N=0;N<L&&!(N+g>=f.length||N>=c.length);N++)f[N+g]=c[N];return N}function cu(c){try{return decodeURIComponent(c)}catch{return String.fromCharCode(65533)}}function Yi(c,f){V(typeof c=="number","cannot write a non-number as a number"),V(0<=c,"specified a negative value for writing an unsigned value"),V(c<=f,"value is larger than maximum value for type"),V(Math.floor(c)===c,"value has a fractional component")}function Wi(c,f,g){V(typeof c=="number","cannot write a non-number as a number"),V(c<=f,"value larger than maximum allowed value"),V(g<=c,"value smaller than minimum allowed value"),V(Math.floor(c)===c,"value has a fractional component")}function du(c,f,g){V(typeof c=="number","cannot write a non-number as a number"),V(c<=f,"value larger than maximum allowed value"),V(g<=c,"value smaller than minimum allowed value")}function V(c,f){if(!c)throw new Error(f||"Failed assertion")}m._augment=function(c){return c._isBuffer=!0,c._get=c.get,c._set=c.set,c.get=B.get,c.set=B.set,c.write=B.write,c.toString=B.toString,c.toLocaleString=B.toString,c.toJSON=B.toJSON,c.copy=B.copy,c.slice=B.slice,c.readUInt8=B.readUInt8,c.readUInt16LE=B.readUInt16LE,c.readUInt16BE=B.readUInt16BE,c.readUInt32LE=B.readUInt32LE,c.readUInt32BE=B.readUInt32BE,c.readInt8=B.readInt8,c.readInt16LE=B.readInt16LE,c.readInt16BE=B.readInt16BE,c.readInt32LE=B.readInt32LE,c.readInt32BE=B.readInt32BE,c.readFloatLE=B.readFloatLE,c.readFloatBE=B.readFloatBE,c.readDoubleLE=B.readDoubleLE,c.readDoubleBE=B.readDoubleBE,c.writeUInt8=B.writeUInt8,c.writeUInt16LE=B.writeUInt16LE,c.writeUInt16BE=B.writeUInt16BE,c.writeUInt32LE=B.writeUInt32LE,c.writeUInt32BE=B.writeUInt32BE,c.writeInt8=B.writeInt8,c.writeInt16LE=B.writeInt16LE,c.writeInt16BE=B.writeInt16BE,c.writeInt32LE=B.writeInt32LE,c.writeInt32BE=B.writeInt32BE,c.writeFloatLE=B.writeFloatLE,c.writeFloatBE=B.writeFloatBE,c.writeDoubleLE=B.writeDoubleLE,c.writeDoubleBE=B.writeDoubleBE,c.fill=B.fill,c.inspect=B.inspect,c.toArrayBuffer=B.toArrayBuffer,c}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(r,e,t){(function(n,s,v,a,o,u,l,d,b){var v=r("buffer").Buffer,P=4,m=new v(P);m.fill(0),e.exports={hash:function(T,j,S,k){for(var U=j(function(p,O){p.length%P!=0&&(I=p.length+(P-p.length%P),p=v.concat([p,m],I));for(var I,Q=[],$=O?p.readInt32BE:p.readInt32LE,J=0;J<p.length;J+=P)Q.push($.call(p,J));return Q}(T=v.isBuffer(T)?T:new v(T),k),8*T.length),j=k,w=new v(S),C=j?w.writeInt32BE:w.writeInt32LE,h=0;h<U.length;h++)C.call(w,U[h],4*h,!0);return w}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(r,e,t){(function(n,s,v,a,o,u,l,d,b){var v=r("buffer").Buffer,P=r("./sha"),m=r("./sha256"),T=r("./rng"),j={sha1:P,sha256:m,md5:r("./md5")},S=64,k=new v(S);function U(p,O){var I=j[p=p||"sha1"],Q=[];return I||w("algorithm:",p,"is not yet supported"),{update:function($){return v.isBuffer($)||($=new v($)),Q.push($),$.length,this},digest:function($){var J=v.concat(Q),J=O?function(B,ce,Oe){v.isBuffer(ce)||(ce=new v(ce)),v.isBuffer(Oe)||(Oe=new v(Oe)),ce.length>S?ce=B(ce):ce.length<S&&(ce=v.concat([ce,k],S));for(var pe=new v(S),ue=new v(S),dt=0;dt<S;dt++)pe[dt]=54^ce[dt],ue[dt]=92^ce[dt];return Oe=B(v.concat([pe,Oe])),B(v.concat([ue,Oe]))}(I,O,J):I(J);return Q=null,$?J.toString($):J}}}function w(){var p=[].slice.call(arguments).join(" ");throw new Error([p,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}k.fill(0),t.createHash=function(p){return U(p)},t.createHmac=U,t.randomBytes=function(p,O){if(!O||!O.call)return new v(T(p));try{O.call(this,void 0,new v(T(p)))}catch(I){O(I)}};var C,h=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],y=function(p){t[p]=function(){w("sorry,",p,"is not implemented yet")}};for(C in h)y(h[C],C)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){var v=r("./helpers");function P(w,C){w[C>>5]|=128<<C%32,w[14+(C+64>>>9<<4)]=C;for(var h=1732584193,y=-271733879,p=-1732584194,O=271733878,I=0;I<w.length;I+=16){var Q=h,$=y,J=p,B=O,h=T(h,y,p,O,w[I+0],7,-680876936),O=T(O,h,y,p,w[I+1],12,-389564586),p=T(p,O,h,y,w[I+2],17,606105819),y=T(y,p,O,h,w[I+3],22,-1044525330);h=T(h,y,p,O,w[I+4],7,-176418897),O=T(O,h,y,p,w[I+5],12,1200080426),p=T(p,O,h,y,w[I+6],17,-1473231341),y=T(y,p,O,h,w[I+7],22,-45705983),h=T(h,y,p,O,w[I+8],7,1770035416),O=T(O,h,y,p,w[I+9],12,-1958414417),p=T(p,O,h,y,w[I+10],17,-42063),y=T(y,p,O,h,w[I+11],22,-1990404162),h=T(h,y,p,O,w[I+12],7,1804603682),O=T(O,h,y,p,w[I+13],12,-40341101),p=T(p,O,h,y,w[I+14],17,-1502002290),h=j(h,y=T(y,p,O,h,w[I+15],22,1236535329),p,O,w[I+1],5,-165796510),O=j(O,h,y,p,w[I+6],9,-1069501632),p=j(p,O,h,y,w[I+11],14,643717713),y=j(y,p,O,h,w[I+0],20,-373897302),h=j(h,y,p,O,w[I+5],5,-701558691),O=j(O,h,y,p,w[I+10],9,38016083),p=j(p,O,h,y,w[I+15],14,-660478335),y=j(y,p,O,h,w[I+4],20,-405537848),h=j(h,y,p,O,w[I+9],5,568446438),O=j(O,h,y,p,w[I+14],9,-1019803690),p=j(p,O,h,y,w[I+3],14,-187363961),y=j(y,p,O,h,w[I+8],20,1163531501),h=j(h,y,p,O,w[I+13],5,-1444681467),O=j(O,h,y,p,w[I+2],9,-51403784),p=j(p,O,h,y,w[I+7],14,1735328473),h=S(h,y=j(y,p,O,h,w[I+12],20,-1926607734),p,O,w[I+5],4,-378558),O=S(O,h,y,p,w[I+8],11,-2022574463),p=S(p,O,h,y,w[I+11],16,1839030562),y=S(y,p,O,h,w[I+14],23,-35309556),h=S(h,y,p,O,w[I+1],4,-1530992060),O=S(O,h,y,p,w[I+4],11,1272893353),p=S(p,O,h,y,w[I+7],16,-155497632),y=S(y,p,O,h,w[I+10],23,-1094730640),h=S(h,y,p,O,w[I+13],4,681279174),O=S(O,h,y,p,w[I+0],11,-358537222),p=S(p,O,h,y,w[I+3],16,-722521979),y=S(y,p,O,h,w[I+6],23,76029189),h=S(h,y,p,O,w[I+9],4,-640364487),O=S(O,h,y,p,w[I+12],11,-421815835),p=S(p,O,h,y,w[I+15],16,530742520),h=k(h,y=S(y,p,O,h,w[I+2],23,-995338651),p,O,w[I+0],6,-198630844),O=k(O,h,y,p,w[I+7],10,1126891415),p=k(p,O,h,y,w[I+14],15,-1416354905),y=k(y,p,O,h,w[I+5],21,-57434055),h=k(h,y,p,O,w[I+12],6,1700485571),O=k(O,h,y,p,w[I+3],10,-1894986606),p=k(p,O,h,y,w[I+10],15,-1051523),y=k(y,p,O,h,w[I+1],21,-2054922799),h=k(h,y,p,O,w[I+8],6,1873313359),O=k(O,h,y,p,w[I+15],10,-30611744),p=k(p,O,h,y,w[I+6],15,-1560198380),y=k(y,p,O,h,w[I+13],21,1309151649),h=k(h,y,p,O,w[I+4],6,-145523070),O=k(O,h,y,p,w[I+11],10,-1120210379),p=k(p,O,h,y,w[I+2],15,718787259),y=k(y,p,O,h,w[I+9],21,-343485551),h=U(h,Q),y=U(y,$),p=U(p,J),O=U(O,B)}return Array(h,y,p,O)}function m(w,C,h,y,p,O){return U((C=U(U(C,w),U(y,O)))<<p|C>>>32-p,h)}function T(w,C,h,y,p,O,I){return m(C&h|~C&y,w,C,p,O,I)}function j(w,C,h,y,p,O,I){return m(C&y|h&~y,w,C,p,O,I)}function S(w,C,h,y,p,O,I){return m(C^h^y,w,C,p,O,I)}function k(w,C,h,y,p,O,I){return m(h^(C|~y),w,C,p,O,I)}function U(w,C){var h=(65535&w)+(65535&C);return(w>>16)+(C>>16)+(h>>16)<<16|65535&h}e.exports=function(w){return v.hash(w,P,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){var v;e.exports=v||function(P){for(var m,T=new Array(P),j=0;j<P;j++)!(3&j)&&(m=4294967296*Math.random()),T[j]=m>>>((3&j)<<3)&255;return T}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){var v=r("./helpers");function P(j,S){j[S>>5]|=128<<24-S%32,j[15+(S+64>>9<<4)]=S;for(var k,U,w,C=Array(80),h=1732584193,y=-271733879,p=-1732584194,O=271733878,I=-1009589776,Q=0;Q<j.length;Q+=16){for(var $=h,J=y,B=p,ce=O,Oe=I,pe=0;pe<80;pe++){C[pe]=pe<16?j[Q+pe]:T(C[pe-3]^C[pe-8]^C[pe-14]^C[pe-16],1);var ue=m(m(T(h,5),(ue=y,U=p,w=O,(k=pe)<20?ue&U|~ue&w:!(k<40)&&k<60?ue&U|ue&w|U&w:ue^U^w)),m(m(I,C[pe]),(k=pe)<20?1518500249:k<40?1859775393:k<60?-1894007588:-899497514)),I=O,O=p,p=T(y,30),y=h,h=ue}h=m(h,$),y=m(y,J),p=m(p,B),O=m(O,ce),I=m(I,Oe)}return Array(h,y,p,O,I)}function m(j,S){var k=(65535&j)+(65535&S);return(j>>16)+(S>>16)+(k>>16)<<16|65535&k}function T(j,S){return j<<S|j>>>32-S}e.exports=function(j){return v.hash(j,P,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){function v(S,k){var U=(65535&S)+(65535&k);return(S>>16)+(k>>16)+(U>>16)<<16|65535&U}function P(S,k){var U,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),C=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),h=new Array(64);S[k>>5]|=128<<24-k%32,S[15+(k+64>>9<<4)]=k;for(var y,p,O=0;O<S.length;O+=16){for(var I=C[0],Q=C[1],$=C[2],J=C[3],B=C[4],ce=C[5],Oe=C[6],pe=C[7],ue=0;ue<64;ue++)h[ue]=ue<16?S[ue+O]:v(v(v((p=h[ue-2],T(p,17)^T(p,19)^j(p,10)),h[ue-7]),(p=h[ue-15],T(p,7)^T(p,18)^j(p,3))),h[ue-16]),U=v(v(v(v(pe,T(p=B,6)^T(p,11)^T(p,25)),B&ce^~B&Oe),w[ue]),h[ue]),y=v(T(y=I,2)^T(y,13)^T(y,22),I&Q^I&$^Q&$),pe=Oe,Oe=ce,ce=B,B=v(J,U),J=$,$=Q,Q=I,I=v(U,y);C[0]=v(I,C[0]),C[1]=v(Q,C[1]),C[2]=v($,C[2]),C[3]=v(J,C[3]),C[4]=v(B,C[4]),C[5]=v(ce,C[5]),C[6]=v(Oe,C[6]),C[7]=v(pe,C[7])}return C}var m=r("./helpers"),T=function(S,k){return S>>>k|S<<32-k},j=function(S,k){return S>>>k};e.exports=function(S){return m.hash(S,P,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){t.read=function(v,P,m,T,O){var S,k,U=8*O-T-1,w=(1<<U)-1,C=w>>1,h=-7,y=m?O-1:0,p=m?-1:1,O=v[P+y];for(y+=p,S=O&(1<<-h)-1,O>>=-h,h+=U;0<h;S=256*S+v[P+y],y+=p,h-=8);for(k=S&(1<<-h)-1,S>>=-h,h+=T;0<h;k=256*k+v[P+y],y+=p,h-=8);if(S===0)S=1-C;else{if(S===w)return k?NaN:1/0*(O?-1:1);k+=Math.pow(2,T),S-=C}return(O?-1:1)*k*Math.pow(2,S-T)},t.write=function(v,P,m,T,j,I){var k,U,w=8*I-j-1,C=(1<<w)-1,h=C>>1,y=j===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=T?0:I-1,O=T?1:-1,I=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(U=isNaN(P)?1:0,k=C):(k=Math.floor(Math.log(P)/Math.LN2),P*(T=Math.pow(2,-k))<1&&(k--,T*=2),2<=(P+=1<=k+h?y/T:y*Math.pow(2,1-h))*T&&(k++,T/=2),C<=k+h?(U=0,k=C):1<=k+h?(U=(P*T-1)*Math.pow(2,j),k+=h):(U=P*Math.pow(2,h-1)*Math.pow(2,j),k=0));8<=j;v[m+p]=255&U,p+=O,U/=256,j-=8);for(k=k<<j|U,w+=j;0<w;v[m+p]=255&k,p+=O,k/=256,w-=8);v[m+p-O]|=128*I}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(r,e,t){(function(n,s,i,a,o,u,l,d,b){var v,P,m;function T(){}(n=e.exports={}).nextTick=(P=typeof window<"u"&&window.setImmediate,m=typeof window<"u"&&window.postMessage&&window.addEventListener,P?function(j){return window.setImmediate(j)}:m?(v=[],window.addEventListener("message",function(j){var S=j.source;S!==window&&S!==null||j.data!=="process-tick"||(j.stopPropagation(),0<v.length&&v.shift()())},!0),function(j){v.push(j),window.postMessage("process-tick","*")}):function(j){setTimeout(j,0)}),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=T,n.addListener=T,n.once=T,n.off=T,n.removeListener=T,n.removeAllListeners=T,n.emit=T,n.binding=function(j){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(j){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})});var Kc,no,Zc=R(()=>{Kc=De(zc(),1),no=(...r)=>(0,Kc.default)(r.join("_"))});var Sr,Er,nt,mt,Ir,Pn,Cr,gs,ws,st=R(()=>{Sr="__run",Er=class{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e}toJSON(){return{type:this._getType(),data:{content:this.text,role:"role"in this?this.role:void 0}}}},nt=class extends Er{_getType(){return"human"}},mt=class extends Er{_getType(){return"ai"}},Ir=class extends Er{_getType(){return"system"}},Pn=class extends Er{constructor(e,t){super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=t}_getType(){return"generic"}},Cr=class{},gs=class{},ws=class{}});var Wm,jr,$c=R(()=>{Zc();st();Wm=new Map,jr=class extends ws{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(no(e,t))??null)}async update(e,t,n){this.cache.set(no(e,t),n)}static global(){return new jr(Wm)}}});var Qc=M((M0,Hc)=>{function Ke(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Hc.exports=Ke;Ke.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Ke.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Ke.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};Ke.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Ke.prototype.try=function(r){this.attempt(r)};Ke.prototype.start=function(r){this.attempt(r)};Ke.prototype.start=Ke.prototype.try;Ke.prototype.errors=function(){return this._errors};Ke.prototype.attempts=function(){return this._attempts};Ke.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var s=this._errors[n],i=s.message,a=(r[i]||0)+1;r[i]=a,a>=t&&(e=s,t=a)}return e}});var Jc=M(Ht=>{var Gm=Qc();Ht.operation=function(r){var e=Ht.timeouts(r);return new Gm(e,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};Ht.timeouts=function(r){if(r instanceof Array)return[].concat(r);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var t in r)e[t]=r[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],s=0;s<e.retries;s++)n.push(this.createTimeout(s,e));return r&&r.forever&&!n.length&&n.push(this.createTimeout(s,e)),n.sort(function(i,a){return i-a}),n};Ht.createTimeout=function(r,e){var t=e.randomize?Math.random()+1:1,n=Math.round(t*Math.max(e.minTimeout,1)*Math.pow(e.factor,r));return n=Math.min(n,e.maxTimeout),n};Ht.wrap=function(r,e,t){if(e instanceof Array&&(t=e,e=null),!t){t=[];for(var n in r)typeof r[n]=="function"&&t.push(n)}for(var s=0;s<t.length;s++){var i=t[s],a=r[i];r[i]=function(u){var l=Ht.operation(e),d=Array.prototype.slice.call(arguments,1),b=d.pop();d.push(function(v){l.retry(v)||(v&&(arguments[0]=l.mainError()),b.apply(this,arguments))}),l.attempt(function(){u.apply(r,d)})}.bind(r,a),r[i].options=e}}});var Wc=M((L0,Yc)=>{Yc.exports=Jc()});var Xc=M((D0,vs)=>{"use strict";var Xm=Wc(),ey=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],_s=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},ty=(r,e,t)=>{let n=t.retries-(e-1);return r.attemptNumber=e,r.retriesLeft=n,r},ry=r=>ey.includes(r),Gc=(r,e)=>new Promise((t,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let s=Xm.operation(e);s.attempt(async i=>{try{t(await r(i))}catch(a){if(!(a instanceof Error)){n(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof _s)s.stop(),n(a.originalError);else if(a instanceof TypeError&&!ry(a.message))s.stop(),n(a);else{ty(a,i,e);try{await e.onFailedAttempt(a)}catch(o){n(o);return}s.retry(a)||n(s.mainError())}}})});vs.exports=Gc;vs.exports.default=Gc;vs.exports.AbortError=_s});var td=M((q0,so)=>{"use strict";var ny=Object.prototype.hasOwnProperty,Ce="~";function An(){}Object.create&&(An.prototype=Object.create(null),new An().__proto__||(Ce=!1));function sy(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function ed(r,e,t,n,s){if(typeof t!="function")throw new TypeError("The listener must be a function");var i=new sy(t,n||r,s),a=Ce?Ce+e:e;return r._events[a]?r._events[a].fn?r._events[a]=[r._events[a],i]:r._events[a].push(i):(r._events[a]=i,r._eventsCount++),r}function xs(r,e){--r._eventsCount===0?r._events=new An:delete r._events[e]}function Ae(){this._events=new An,this._eventsCount=0}Ae.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)ny.call(t,n)&&e.push(Ce?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Ae.prototype.listeners=function(e){var t=Ce?Ce+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,a=new Array(i);s<i;s++)a[s]=n[s].fn;return a};Ae.prototype.listenerCount=function(e){var t=Ce?Ce+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Ae.prototype.emit=function(e,t,n,s,i,a){var o=Ce?Ce+e:e;if(!this._events[o])return!1;var u=this._events[o],l=arguments.length,d,b;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,s),!0;case 5:return u.fn.call(u.context,t,n,s,i),!0;case 6:return u.fn.call(u.context,t,n,s,i,a),!0}for(b=1,d=new Array(l-1);b<l;b++)d[b-1]=arguments[b];u.fn.apply(u.context,d)}else{var v=u.length,P;for(b=0;b<v;b++)switch(u[b].once&&this.removeListener(e,u[b].fn,void 0,!0),l){case 1:u[b].fn.call(u[b].context);break;case 2:u[b].fn.call(u[b].context,t);break;case 3:u[b].fn.call(u[b].context,t,n);break;case 4:u[b].fn.call(u[b].context,t,n,s);break;default:if(!d)for(P=1,d=new Array(l-1);P<l;P++)d[P-1]=arguments[P];u[b].fn.apply(u[b].context,d)}}return!0};Ae.prototype.on=function(e,t,n){return ed(this,e,t,n,!1)};Ae.prototype.once=function(e,t,n){return ed(this,e,t,n,!0)};Ae.prototype.removeListener=function(e,t,n,s){var i=Ce?Ce+e:e;if(!this._events[i])return this;if(!t)return xs(this,i),this;var a=this._events[i];if(a.fn)a.fn===t&&(!s||a.once)&&(!n||a.context===n)&&xs(this,i);else{for(var o=0,u=[],l=a.length;o<l;o++)(a[o].fn!==t||s&&!a[o].once||n&&a[o].context!==n)&&u.push(a[o]);u.length?this._events[i]=u.length===1?u[0]:u:xs(this,i)}return this};Ae.prototype.removeAllListeners=function(e){var t;return e?(t=Ce?Ce+e:e,this._events[t]&&xs(this,t)):(this._events=new An,this._eventsCount=0),this};Ae.prototype.off=Ae.prototype.removeListener;Ae.prototype.addListener=Ae.prototype.on;Ae.prefixed=Ce;Ae.EventEmitter=Ae;typeof so<"u"&&(so.exports=Ae)});var nd=M((U0,rd)=>{"use strict";rd.exports=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})))});var id=M((V0,Ps)=>{"use strict";var iy=nd(),Os=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},sd=(r,e,t)=>new Promise((n,s)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(r);return}let i=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(u){s(u)}return}let a=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,o=t instanceof Error?t:new Os(a);typeof r.cancel=="function"&&r.cancel(),s(o)},e);iy(r.then(n,s),()=>{clearTimeout(i)})});Ps.exports=sd;Ps.exports.default=sd;Ps.exports.TimeoutError=Os});var ad=M(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});function ay(r,e,t){let n=0,s=r.length;for(;s>0;){let i=s/2|0,a=n+i;t(r[a],e)<=0?(n=++a,s-=i+1):s=i}return n}io.default=ay});var od=M(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});var oy=ad(),ao=class{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);let n={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}let s=oy.default(this._queue,n,(i,a)=>a.priority-i.priority);this._queue.splice(s,0,n)}dequeue(){let e=this._queue.shift();return e?.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}};oo.default=ao});var ld=M(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});var uy=td(),ud=id(),ly=od(),As=()=>{},cy=new ud.TimeoutError,uo=class extends uy{constructor(e){var t,n,s,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=As,this._resolveIdle=As,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:ly.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=As,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=As,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,s)=>{let i=async()=>{this._pendingCount++,this._intervalCount++;try{let a=this._timeout===void 0&&t.timeout===void 0?e():ud.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&s(cy)});n(await a)}catch(a){s(a)}this._next()};this._queue.enqueue(i,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};lo.default=uo});var cd,Ts,dy,Ge,kr=R(()=>{cd=De(Xc(),1),Ts=De(ld(),1),dy=[400,401,403,404,405,406,407,408,409],Ge=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;let t="default"in Ts.default?Ts.default.default:Ts.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>(0,cd.default)(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||n?.code==="ECONNABORTED")throw n;let s=n?.response?.status;if(s&&dy.includes(+s))throw n},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((s,i)=>{e.signal?.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}});var py,hy,dd,co=R(()=>{py=Object.defineProperty,hy=(r,e,t)=>e in r?py(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,dd=(r,e,t)=>(hy(r,typeof e!="symbol"?e+"":e,t),t)});var fd=M(Es=>{"use strict";Es.byteLength=my;Es.toByteArray=by;Es.fromByteArray=_y;var it=[],Ze=[],fy=typeof Uint8Array<"u"?Uint8Array:Array,po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Qt=0,pd=po.length;Qt<pd;++Qt)it[Qt]=po[Qt],Ze[po.charCodeAt(Qt)]=Qt;var Qt,pd;Ze["-".charCodeAt(0)]=62;Ze["_".charCodeAt(0)]=63;function hd(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function my(r){var e=hd(r),t=e[0],n=e[1];return(t+n)*3/4-n}function yy(r,e,t){return(e+t)*3/4-t}function by(r){var e,t=hd(r),n=t[0],s=t[1],i=new fy(yy(r,n,s)),a=0,o=s>0?n-4:n,u;for(u=0;u<o;u+=4)e=Ze[r.charCodeAt(u)]<<18|Ze[r.charCodeAt(u+1)]<<12|Ze[r.charCodeAt(u+2)]<<6|Ze[r.charCodeAt(u+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return s===2&&(e=Ze[r.charCodeAt(u)]<<2|Ze[r.charCodeAt(u+1)]>>4,i[a++]=e&255),s===1&&(e=Ze[r.charCodeAt(u)]<<10|Ze[r.charCodeAt(u+1)]<<4|Ze[r.charCodeAt(u+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function gy(r){return it[r>>18&63]+it[r>>12&63]+it[r>>6&63]+it[r&63]}function wy(r,e,t){for(var n,s=[],i=e;i<t;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(gy(n));return s.join("")}function _y(r){for(var e,t=r.length,n=t%3,s=[],i=16383,a=0,o=t-n;a<o;a+=i)s.push(wy(r,a,a+i>o?o:a+i));return n===1?(e=r[t-1],s.push(it[e>>2]+it[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],s.push(it[e>>10]+it[e>>4&63]+it[e<<2&63]+"=")),s.join("")}});function vy(r,e){let t=Array.from({length:r.length},(n,s)=>({start:s,end:s+1}));for(;t.length>1;){let n=null;for(let s=0;s<t.length-1;s++){let i=r.slice(t[s].start,t[s+1].end),a=e.get(i.join(","));a!=null&&(n==null||a<n[0])&&(n=[a,s])}if(n!=null){let s=n[1];t[s]={start:t[s].start,end:t[s+1].end},t.splice(s+1,1)}else break}return t}function xy(r,e){return r.length===1?[e.get(r.join(","))]:vy(r,e).map(t=>e.get(r.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function Oy(r){return r.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function fo(r){switch(r){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-0314":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}var md,ho,Is,yd=R(()=>{co();md=De(fd(),1);ho=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(r,e){this.patStr=r.pat_str;let t=r.bpe_ranks.split(`
`).filter(Boolean).reduce((n,s)=>{let[i,a,...o]=s.split(" "),u=Number.parseInt(a,10);return o.forEach((l,d)=>n[l]=u+d),n},{});for(let[n,s]of Object.entries(t)){let i=md.default.toByteArray(n);this.rankMap.set(i.join(","),s),this.textMap.set(s,i)}this.specialTokens={...r.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[s,i])=>(n[i]=this.textEncoder.encode(s),n),{})}encode(r,e=[],t="all"){let n=new RegExp(this.patStr,"ug"),s=ho.specialTokenRegex(Object.keys(this.specialTokens)),i=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(t==="all"?Object.keys(this.specialTokens).filter(l=>!a.has(l)):t);if(o.size>0){let l=ho.specialTokenRegex([...o]),d=r.match(l);if(d!=null)throw new Error(`The text contains a special token that is not allowed: ${d[0]}`)}let u=0;for(;;){let l=null,d=u;for(;s.lastIndex=d,l=s.exec(r),!(l==null||a.has(l[0]));)d=l.index+1;let b=l?.index??r.length;for(let P of r.substring(u,b).matchAll(n)){let m=this.textEncoder.encode(P[0]),T=this.rankMap.get(m.join(","));if(T!=null){i.push(T);continue}i.push(...xy(m,this.rankMap))}if(l==null)break;let v=this.specialTokens[l[0]];i.push(v),u=l.index+l[0].length}return i}decode(r){let e=[],t=0;for(let i=0;i<r.length;++i){let a=r[i],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),t+=o.length)}let n=new Uint8Array(t),s=0;for(let i of e)n.set(i,s),s+=i.length;return this.textDecoder.decode(n)}},Is=ho;dd(Is,"specialTokenRegex",r=>new RegExp(r.map(e=>Oy(e)).join("|"),"g"))});var bd=R(()=>{yd();co()});async function gd(r,e){return r in Cs||(Cs[r]=Py.fetch(`https://tiktoken.pages.dev/js/${r}.json`,{signal:e?.signal}).then(t=>t.json()).catch(t=>{throw delete Cs[r],t})),new Is(await Cs[r],e?.extendedSpecialTokens)}async function Ss(r,e){return gd(fo(r),e)}var Cs,Py,js=R(()=>{bd();kr();Cs={},Py=new Ge({})});var Rr,wd,ks,Mr=R(()=>{js();Rr=r=>r.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":r.startsWith("gpt-4-32k-")?"gpt-4-32k":r.startsWith("gpt-4-")?"gpt-4":r,wd=r=>{switch(Rr(r)){case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},ks=async({prompt:r,modelName:e})=>{let t=Math.ceil(r.length/4);try{t=(await Ss(e)).encode(r).length}catch{}return wd(e)-t}});function mo(){if(!Rs&&(Rs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rs(Ay)}var Rs,Ay,_d=R(()=>{Ay=new Uint8Array(16)});function vd(r,e=0){return(xe[r[e+0]]+xe[r[e+1]]+xe[r[e+2]]+xe[r[e+3]]+"-"+xe[r[e+4]]+xe[r[e+5]]+"-"+xe[r[e+6]]+xe[r[e+7]]+"-"+xe[r[e+8]]+xe[r[e+9]]+"-"+xe[r[e+10]]+xe[r[e+11]]+xe[r[e+12]]+xe[r[e+13]]+xe[r[e+14]]+xe[r[e+15]]).toLowerCase()}var xe,xd=R(()=>{xe=[];for(let r=0;r<256;++r)xe.push((r+256).toString(16).slice(1))});var Ty,yo,Od=R(()=>{Ty=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yo={randomUUID:Ty}});function Ey(r,e,t){if(yo.randomUUID&&!e&&!r)return yo.randomUUID();r=r||{};let n=r.random||(r.rng||mo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let s=0;s<16;++s)e[t+s]=n[s];return e}return vd(n)}var yt,Pd=R(()=>{Od();_d();xd();yt=Ey});var bo=R(()=>{Pd()});var go,bt,wo=R(()=>{bo();go=class{},bt=class extends go{constructor(e){super(),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent)}copy(){return new this.constructor(this)}static fromMethods(e){class t extends bt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:yt()}),Object.assign(this,e)}}return new t}}});var Id=M((hO,Ed)=>{"use strict";var Ad=(r=0)=>e=>`\x1B[${38+r};5;${e}m`,Td=(r=0)=>(e,t,n)=>`\x1B[${38+r};2;${e};${t};${n}m`;function Cy(){let r=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[t,n]of Object.entries(e)){for(let[s,i]of Object.entries(n))e[s]={open:`\x1B[${i[0]}m`,close:`\x1B[${i[1]}m`},n[s]=e[s],r.set(i[0],i[1]);Object.defineProperty(e,t,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:r,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=Ad(),e.color.ansi16m=Td(),e.bgColor.ansi256=Ad(10),e.bgColor.ansi16m=Td(10),Object.defineProperties(e,{rgbToAnsi256:{value:(t,n,s)=>t===n&&n===s?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(s/255*5),enumerable:!1},hexToRgb:{value:t=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(t.toString(16));if(!n)return[0,0,0];let{colorString:s}=n.groups;s.length===3&&(s=s.split("").map(a=>a+a).join(""));let i=Number.parseInt(s,16);return[i>>16&255,i>>8&255,i&255]},enumerable:!1},hexToAnsi256:{value:t=>e.rgbToAnsi256(...e.hexToRgb(t)),enumerable:!1}}),e}Object.defineProperty(Ed,"exports",{enumerable:!0,get:Cy})});var jt,Ms=R(()=>{wo();jt=class extends bt{constructor(){super(),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}_startTrace(e){if(e.parent_run_id!==void 0){let t=this.runMap.get(e.parent_run_id);t&&this._addChildRun(t,e)}this.runMap.set(e.id,e)}async _endTrace(e){let t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id)}_getExecutionOrder(e){let t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,n,s,i){let a=this._getExecutionOrder(s),o={id:n,name:e.name,parent_run_id:s,start_time:Date.now(),end_time:0,serialized:e,inputs:{prompts:t},execution_order:a,child_runs:[],child_execution_order:a,run_type:"llm",extra:i};this._startTrace(o),await this.onLLMStart?.(o)}async handleChatModelStart(e,t,n,s,i){let a=this._getExecutionOrder(s),o={id:n,name:e.name,parent_run_id:s,start_time:Date.now(),end_time:0,serialized:e,inputs:{messages:t},execution_order:a,child_runs:[],child_execution_order:a,run_type:"llm",extra:i};this._startTrace(o),await this.onLLMStart?.(o)}async handleLLMEnd(e,t){let n=this.runMap.get(t);if(!n||n?.run_type!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.outputs=e,await this.onLLMEnd?.(n),await this._endTrace(n)}async handleLLMError(e,t){let n=this.runMap.get(t);if(!n||n?.run_type!=="llm")throw new Error("No LLM run to end.");n.end_time=Date.now(),n.error=e.message,await this.onLLMError?.(n),await this._endTrace(n)}async handleChainStart(e,t,n,s){let i=this._getExecutionOrder(s),a={id:n,name:e.name,parent_run_id:s,start_time:Date.now(),end_time:0,serialized:e,inputs:t,execution_order:i,child_execution_order:i,run_type:"chain",child_runs:[]};this._startTrace(a),await this.onChainStart?.(a)}async handleChainEnd(e,t){let n=this.runMap.get(t);if(!n||n?.run_type!=="chain")throw new Error("No chain run to end.");n.end_time=Date.now(),n.outputs=e,await this.onChainEnd?.(n),await this._endTrace(n)}async handleChainError(e,t){let n=this.runMap.get(t);if(!n||n?.run_type!=="chain")throw new Error("No chain run to end.");n.end_time=Date.now(),n.error=e.message,await this.onChainError?.(n),await this._endTrace(n)}async handleToolStart(e,t,n,s){let i=this._getExecutionOrder(s),a={id:n,name:e.name,parent_run_id:s,start_time:Date.now(),end_time:0,serialized:e,inputs:{input:t},execution_order:i,child_execution_order:i,run_type:"tool",child_runs:[]};this._startTrace(a),await this.onToolStart?.(a)}async handleToolEnd(e,t){let n=this.runMap.get(t);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.outputs={output:e},await this.onToolEnd?.(n),await this._endTrace(n)}async handleToolError(e,t){let n=this.runMap.get(t);if(!n||n?.run_type!=="tool")throw new Error("No tool run to end");n.end_time=Date.now(),n.error=e.message,await this.onToolError?.(n),await this._endTrace(n)}async handleAgentAction(e,t){let n=this.runMap.get(t);if(!n||n?.run_type!=="chain")return;let s=n;s.actions=s.actions||[],s.actions.push(e),await this.onAgentAction?.(n)}}});function Cd(r,e){return`${r.open}${e}${r.close}`}var _o,Sy,Tn,Sd=R(()=>{_o=De(Id(),1);Ms();({color:Sy}=_o.default),Tn=class extends jt{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let t=[],n=e;for(;n.parent_run_id;){let s=this.runMap.get(n.parent_run_id);if(s)t.push(s),n=s;else break}return t}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((s,i,a)=>{let o=`${s.execution_order}:${s.run_type}:${s.name}`;return i===a.length-1?Cd(_o.default.bold,o):o}).join(" > ");return Cd(Sy.grey,n)}onChainStart(e){let t=this.getBreadcrumbs(e)}onChainEnd(e){let t=this.getBreadcrumbs(e)}onChainError(e){let t=this.getBreadcrumbs(e)}onLLMStart(e){let t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs}onLLMEnd(e){let t=this.getBreadcrumbs(e)}onLLMError(e){let t=this.getBreadcrumbs(e)}onToolStart(e){let t=this.getBreadcrumbs(e)}onToolEnd(e){let t=this.getBreadcrumbs(e)}onToolError(e){let t=this.getBreadcrumbs(e)}onAgentAction(e){let t=e,n=this.getBreadcrumbs(e)}}});var Ns,jd=R(()=>{kr();wr();Ms();Ns=class extends jt{constructor({exampleId:e,tenantId:t,sessionName:n,sessionExtra:s,callerParams:i}={}){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:(typeof process<"u"?process.env?.LANGCHAIN_ENDPOINT:void 0)||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"sessionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sessionExtra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tenantId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof process<"u"&&process.env?.LANGCHAIN_API_KEY&&(this.headers["x-api-key"]=process.env?.LANGCHAIN_API_KEY),this.tenantId=t??(typeof process<"u"?process.env?.LANGCHAIN_TENANT_ID:void 0),this.sessionName=n??(typeof process<"u"?process.env?.LANGCHAIN_SESSION:void 0)??"default",this.sessionExtra=s,this.exampleId=e,this.caller=new Ge(i??{})}async ensureSession(){if(this.session)return this.session;let e=await this.ensureTenantId(),t=`${this.endpoint}/sessions?upsert=true`,n=await this.caller.call(fetch,t,{method:"POST",headers:this.headers,body:JSON.stringify({name:this.sessionName,tenant_id:e,extra:this.sessionExtra})});if(!n.ok){let i=await n.text();throw new Error(`Failed to create session: ${n.status} ${n.statusText} ${i}`)}let s=await n.json();return this.session=s,s}async ensureTenantId(){if(this.tenantId)return this.tenantId;let e=`${this.endpoint}/tenants`,t=await this.caller.call(fetch,e,{method:"GET",headers:this.headers});if(!t.ok){let i=await t.text();throw new Error(`Failed to fetch tenant ID: ${t.status} ${t.statusText} ${i}`)}let n=await t.json();if(!n||n.length===0)throw new Error(`No tenants found for endpoint ${e}`);let s=n[0].id;return this.tenantId=s,s}async _convertToCreate(e,t=void 0){let n=await this.ensureSession(),s=e.extra??{};return s.runtime=await Il(),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:t,extra:s,execution_order:e.execution_order,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs??{},session_id:n.id,child_runs:await Promise.all(e.child_runs.map(a=>this._convertToCreate(a)))}}async persistRun(e){let t=await this._convertToCreate(e,this.exampleId),n=`${this.endpoint}/runs`,s=await this.caller.call(fetch,n,{method:"POST",headers:this.headers,body:JSON.stringify(t)});if(!s.ok){let i=await s.text();throw new Error(`Failed to persist run: ${s.status} ${s.statusText} ${i}`)}}}});function Jt(r,e="Human",t="AI"){let n=[];for(let s of r){let i;if(s._getType()==="human")i=e;else if(s._getType()==="ai")i=t;else if(s._getType()==="system")i="System";else if(s._getType()==="generic")i=s.role;else throw new Error(`Got unsupported message type: ${s}`);n.push(`${i}: ${s.text}`)}return n.join(`
`)}var Nr=R(()=>{});var Ls,kd=R(()=>{Nr();Ms();Ls=class extends jt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:(typeof process<"u"?process.env?.LANGCHAIN_ENDPOINT:void 0)||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof process<"u"&&process.env?.LANGCHAIN_API_KEY&&(this.headers["x-api-key"]=process.env?.LANGCHAIN_API_KEY)}async newSession(e){let t={start_time:Date.now(),name:e},n=await this.persistSession(t);return this.session=n,n}async loadSession(e){let t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async convertV2RunToRun(e){let t=this.session??await this.loadDefaultSession(),n=e.serialized,s;if(e.run_type==="llm"){let i=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(o=>Jt(o));s={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,prompts:i,response:e.outputs}}else if(e.run_type==="chain"){let i=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));s={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:i.filter(o=>o.type==="llm"),child_chain_runs:i.filter(o=>o.type==="chain"),child_tool_runs:i.filter(o=>o.type==="tool")}}else if(e.run_type==="tool"){let i=await Promise.all(e.child_runs.map(o=>this.convertV2RunToRun(o)));s={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:n,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(n),child_llm_runs:i.filter(o=>o.type==="llm"),child_chain_runs:i.filter(o=>o.type==="chain"),child_tool_runs:i.filter(o=>o.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return s}async persistRun(e){let t,n;e.run_type!==void 0?n=await this.convertV2RunToRun(e):n=e,n.type==="llm"?t=`${this.endpoint}/llm-runs`:n.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`,(await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(n)})).ok}async persistSession(e){let t=`${this.endpoint}/sessions`,n=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return n.ok?{id:(await n.json()).id,...e}:{id:1,...e}}async _handleSessionResponse(e){let t=await fetch(e,{method:"GET",headers:this.headers}),n;if(!t.ok)return n={id:1,start_time:Date.now()},this.session=n,n;let s=await t.json();return s.length===0?(n={id:1,start_time:Date.now()},this.session=n,n):([n]=s,this.session=n,n)}}});async function Rd(r){let e=new Ls;return r?await e.loadSession(r):await e.loadDefaultSession(),e}async function Md(){return new Ns}var Nd=R(()=>{jd();kd()});function Ld(r){return"name"in r?r:bt.fromMethods(r)}var vo,En,Ds,xo,Oo,Re,qs=R(()=>{bo();wo();Sd();Nd();Nr();vo=class{setHandler(e){return this.setHandlers([e])}},En=class{constructor(e,t,n,s){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:s})}async handleText(e){await Promise.all(this.handlers.map(async t=>{try{await t.handleText?.(e,this.runId,this._parentRunId)}catch{}}))}},Ds=class extends En{async handleLLMNewToken(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreLLM)try{await t.handleLLMNewToken?.(e,this.runId,this._parentRunId)}catch{}}))}async handleLLMError(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreLLM)try{await t.handleLLMError?.(e,this.runId,this._parentRunId)}catch{}}))}async handleLLMEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreLLM)try{await t.handleLLMEnd?.(e,this.runId,this._parentRunId)}catch{}}))}},xo=class extends En{getChild(){let e=new Re(this.runId);return e.setHandlers(this.inheritableHandlers),e}async handleChainError(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreChain)try{await t.handleChainError?.(e,this.runId,this._parentRunId)}catch{}}))}async handleChainEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreChain)try{await t.handleChainEnd?.(e,this.runId,this._parentRunId)}catch{}}))}async handleAgentAction(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleAgentAction?.(e,this.runId,this._parentRunId)}catch{}}))}async handleAgentEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleAgentEnd?.(e,this.runId,this._parentRunId)}catch{}}))}},Oo=class extends En{getChild(){let e=new Re(this.runId);return e.setHandlers(this.inheritableHandlers),e}async handleToolError(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleToolError?.(e,this.runId,this._parentRunId)}catch{}}))}async handleToolEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleToolEnd?.(e,this.runId,this._parentRunId)}catch{}}))}},Re=class extends vo{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,t,n=yt(),s=void 0,i=void 0){return await Promise.all(this.handlers.map(async a=>{if(!a.ignoreLLM)try{await a.handleLLMStart?.(e,t,n,this._parentRunId,i)}catch{}})),new Ds(n,this.handlers,this.inheritableHandlers,this._parentRunId)}async handleChatModelStart(e,t,n=yt(),s=void 0,i=void 0){let a;return await Promise.all(this.handlers.map(async o=>{if(!o.ignoreLLM)try{o.handleChatModelStart?await o.handleChatModelStart?.(e,t,n,this._parentRunId,i):o.handleLLMStart&&(a=t.map(u=>Jt(u)),await o.handleLLMStart?.(e,a,n,this._parentRunId,i))}catch{}})),new Ds(n,this.handlers,this.inheritableHandlers,this._parentRunId)}async handleChainStart(e,t,n=yt()){return await Promise.all(this.handlers.map(async s=>{if(!s.ignoreChain)try{await s.handleChainStart?.(e,t,n,this._parentRunId)}catch{}})),new xo(n,this.handlers,this.inheritableHandlers,this._parentRunId)}async handleToolStart(e,t,n=yt()){return await Promise.all(this.handlers.map(async s=>{if(!s.ignoreAgent)try{await s.handleToolStart?.(e,t,n,this._parentRunId)}catch{}})),new Oo(n,this.handlers,this.inheritableHandlers,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(let n of e)this.addHandler(n,t)}copy(e=[],t=!0){let n=new Re(this._parentRunId);for(let s of this.handlers){let i=this.inheritableHandlers.includes(s);n.addHandler(s,i)}for(let s of e)n.handlers.filter(i=>i.name==="console_callback_handler").some(i=>i.name===s.name)||n.addHandler(s,t);return n}static fromHandlers(e){class t extends bt{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:yt()}),Object.assign(this,e)}}let n=new this;return n.addHandler(new t),n}static async configure(e,t,n){let s;(e||t)&&(Array.isArray(e)||!e?(s=new Re,s.setHandlers(e?.map(Ld)??[],!0)):s=e,s=s.copy(Array.isArray(t)?t.map(Ld):t?.handlers,!1));let i=(typeof process<"u"?process.env?.LANGCHAIN_VERBOSE!==void 0:!1)||n?.verbose,a=typeof process<"u"?process.env?.LANGCHAIN_TRACING_V2!==void 0:!1,o=a||(typeof process<"u"?process.env?.LANGCHAIN_TRACING!==void 0:!1);if(i||o){if(s||(s=new Re),i&&!s.handlers.some(u=>u.name===Tn.prototype.name)){let u=new Tn;s.addHandler(u,!0)}if(o&&!s.handlers.some(u=>u.name==="langchain_tracer"))if(a)s.addHandler(await Md(),!0);else{let u=typeof process<"u"?process.env?.LANGCHAIN_SESSION:void 0;s.addHandler(await Rd(u),!0)}}return s}}});var Us,Dd=R(()=>{st();Lr();qs();Us=class extends gt{constructor(e){super(e)}async generate(e,t,n){let s=[],i=[],a;Array.isArray(t)?a={stop:t}:t?.timeout&&!t.signal?a={...t,signal:AbortSignal.timeout(t.timeout)}:a=t??{};let o=await Re.configure(n,this.callbacks,{verbose:this.verbose}),u={invocation_params:this?.invocationParams()},l=await o?.handleChatModelStart({name:this._llmType()},e,void 0,void 0,u);try{let b=await Promise.all(e.map(v=>this._generate(v,a,l)));for(let v of b)v.llmOutput&&i.push(v.llmOutput),s.push(v.generations)}catch(b){throw await l?.handleLLMError(b),b}let d={generations:s,llmOutput:i.length?this._combineLLMOutput?.(...i):void 0};return await l?.handleLLMEnd(d),Object.defineProperty(d,Sr,{value:l?{runId:l?.runId}:void 0,configurable:!0}),d}invocationParams(){return{}}_modelType(){return"base_chat_model"}async generatePrompt(e,t,n){let s=e.map(i=>i.toChatMessages());return this.generate(s,t,n)}async call(e,t,n){return(await this.generate([e],t,n)).generations[0][0].message}async callPrompt(e,t,n){let s=e.toChatMessages();return this.call(s,t,n)}async predictMessages(e,t,n){return this.call(e,t,n)}async predict(e,t,n){let s=new nt(e);return(await this.call([s],t,n)).text}}});var Ud={};Ye(Ud,{ChatOpenAI:()=>Po});function qd(r){switch(r){case"system":return"system";case"ai":return"assistant";case"human":return"user";default:throw new Error(`Unknown message type: ${r}`)}}function jy(r,e){switch(r){case"user":return new nt(e);case"assistant":return new mt(e);case"system":return new Ir(e);default:return new Pn(e,r??"unknown")}}var Vs,Po,Vd=R(()=>{Vs=De(gr(),1);wr();Tr();Dd();st();Mr();Po=class extends Us{get callKeys(){return["stop","signal","timeout","options"]}constructor(e,t){super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=e?.openAIApiKey??(typeof process<"u"?process.env?.OPENAI_API_KEY:void 0),s=e?.azureOpenAIApiKey??(typeof process<"u"?process.env?.AZURE_OPENAI_API_KEY:void 0);if(!s&&!n)throw new Error("(Azure) OpenAI API key not found");let i=e?.azureOpenAIApiInstanceName??(typeof process<"u"?process.env?.AZURE_OPENAI_API_INSTANCE_NAME:void 0),a=e?.azureOpenAIApiDeploymentName??(typeof process<"u"?process.env?.AZURE_OPENAI_API_DEPLOYMENT_NAME:void 0),o=e?.azureOpenAIApiVersion??(typeof process<"u"?process.env?.AZURE_OPENAI_API_VERSION:void 0);if(this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=s,this.azureOpenAIApiInstanceName=i,this.azureOpenAIApiDeploymentName=a,this.streaming&&this.n>1)throw new Error("Cannot stream results when n > 1");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...t}}invocationParams(){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,t,n){let s={};if(this.stop&&t?.stop)throw new Error("Stop found in input and default params");let i=this.invocationParams();i.stop=t?.stop??i.stop;let a=e.map(v=>({role:qd(v._getType()),content:v.text,name:v.name})),o=i.stream?await new Promise((v,P)=>{let m,T=!1,j=!1;this.completionWithRetry({...i,messages:a},{signal:t?.signal,...t?.options,adapter:Ue,responseType:"stream",onmessage:S=>{if(S.data?.trim?.()==="[DONE]"){if(j)return;j=!0,v(m)}else{let k=JSON.parse(S.data);m||(m={id:k.id,object:k.object,created:k.created,model:k.model,choices:[]});for(let U of k.choices)if(U!=null){let w=m.choices.find(C=>C.index===U.index);w||(w={index:U.index,finish_reason:U.finish_reason??void 0},m.choices[U.index]=w),w.message||(w.message={role:U.delta?.role,content:U.delta?.content??""}),w.message.content+=U.delta?.content??"",n?.handleLLMNewToken(U.delta?.content??"")}!j&&k.choices.every(U=>U.finish_reason!=null)&&(j=!0,v(m))}}}).catch(S=>{T||(T=!0,P(S))})}):await this.completionWithRetry({...i,messages:a},{signal:t?.signal,...t?.options}),{completion_tokens:u,prompt_tokens:l,total_tokens:d}=o.usage??{};u&&(s.completionTokens=(s.completionTokens??0)+u),l&&(s.promptTokens=(s.promptTokens??0)+l),d&&(s.totalTokens=(s.totalTokens??0)+d);let b=[];for(let v of o.choices){let P=v.message?.role??void 0,m=v.message?.content??"";b.push({text:m,message:jy(P,m)})}return{generations:b,llmOutput:{tokenUsage:s}}}async getNumTokensFromMessages(e){let t=0,n=0,s=0;Rr(this.modelName)==="gpt-3.5-turbo"?(n=4,s=-1):Rr(this.modelName).startsWith("gpt-4")&&(n=3,s=1);let i=await Promise.all(e.map(async a=>{let o=await this.getNumTokens(a.text),u=await this.getNumTokens(qd(a._getType())),l=a.name!==void 0?s+await this.getNumTokens(a.name):0,d=o+n+u+l;return t+=d,d}));return t+=3,{totalCount:t,countPerMessage:i}}async completionWithRetry(e,t){if(!this.client){let s=this.azureOpenAIApiKey?`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}`:this.clientConfig.basePath,i=new Vs.Configuration({...this.clientConfig,basePath:s,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new Vs.OpenAIApi(i)}let n={adapter:pt()?void 0:Ue,...this.clientConfig.baseOptions,...t};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(s=>s.data)}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((t,n)=>(n&&n.tokenUsage&&(t.tokenUsage.completionTokens+=n.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=n.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=n.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}});var ky,In,gt,Lr=R(()=>{kr();Mr();js();Mr();ky=()=>!1,In=class{constructor(e){Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??ky(),this.callbacks=e.callbacks}},gt=class extends In{get callKeys(){return["stop","timeout","signal"]}constructor(e){super({verbose:e.verbose,callbacks:e.callbacks??e.callbackManager}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new Ge(e??{})}async getNumTokens(e){let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Ss("modelName"in this?Rr(this.modelName):"gpt2")}catch{}return this._encoding&&(t=this._encoding.encode(e).length),t}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){let{_type:t,_model:n,...s}=e;if(n&&n!=="base_chat_model")throw new Error(`Cannot load LLM with model ${n}`);let i={openai:(await Promise.resolve().then(()=>(Vd(),Ud))).ChatOpenAI}[t];if(i===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new i(s)}}});var Cn,Fs,Ao=R(()=>{$c();st();Lr();qs();Nr();Cn=class extends gt{constructor({cache:e,concurrency:t,...n}){super(t?{maxConcurrency:t,...n}:n),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=jr.global():this.cache=void 0}async generatePrompt(e,t,n){let s=e.map(i=>i.toString());return this.generate(s,t,n)}invocationParams(){return{}}async _generateUncached(e,t,n){let s=await Re.configure(n,this.callbacks,{verbose:this.verbose}),i={invocation_params:this?.invocationParams()},a=await s?.handleLLMStart({name:this._llmType()},e,void 0,void 0,i),o;try{o=await this._generate(e,t,a)}catch(u){throw await a?.handleLLMError(u),u}return await a?.handleLLMEnd(o),Object.defineProperty(o,Sr,{value:a?{runId:a?.runId}:void 0,configurable:!0}),o}async generate(e,t,n){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let s;if(Array.isArray(t)?s={stop:t}:t?.timeout&&!t.signal?s={...t,signal:AbortSignal.timeout(t.timeout)}:s=t??{},!this.cache)return this._generateUncached(e,s,n);let{cache:i}=this,a=this.serialize();a.stop=s.stop??a.stop;let o=`${Object.entries(a).sort()}`,u=[],l=await Promise.all(e.map(async(b,v)=>{let P=await i.lookup(b,o);return P||u.push(v),P})),d={};if(u.length>0){let b=await this._generateUncached(u.map(v=>e[v]),s,n);await Promise.all(b.generations.map(async(v,P)=>{let m=u[P];return l[m]=v,i.update(e[m],o,v)})),d=b.llmOutput??{}}return{generations:l,llmOutput:d}}async call(e,t,n){let{generations:s}=await this.generate([e],t??{},n);return s[0][0].text}async predict(e,t,n){return this.call(e,t,n)}async predictMessages(e,t,n){let s=Jt(e),i=await this.call(s,t,n);return new mt(i)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){let{_type:t,_model:n,...s}=e;if(n&&n!=="base_llm")throw new Error(`Cannot load LLM with model ${n}`);let i={openai:(await Promise.resolve().then(()=>(To(),Fd))).OpenAI}[t];if(i===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new i(s)}},Fs=class extends Cn{async _generate(e,t,n){return{generations:await Promise.all(e.map(i=>this._call(i,t,n).then(a=>[{text:a}])))}}}});var zs,Yt,Bs,Eo=R(()=>{zs=De(gr(),1);wr();Tr();Ao();Yt=class extends Fs{get callKeys(){return["stop","signal","timeout","options"]}constructor(e,t){super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=e?.openAIApiKey??(typeof process<"u"?process.env?.OPENAI_API_KEY:void 0),s=e?.azureOpenAIApiKey??(typeof process<"u"?process.env?.AZURE_OPENAI_API_KEY:void 0);if(!s&&!n)throw new Error("(Azure) OpenAI API key not found");let i=e?.azureOpenAIApiInstanceName??(typeof process<"u"?process.env?.AZURE_OPENAI_API_INSTANCE_NAME:void 0),a=e?.azureOpenAIApiDeploymentName??(typeof process<"u"?process.env?.AZURE_OPENAI_API_DEPLOYMENT_NAME:void 0),o=e?.azureOpenAIApiVersion??(typeof process<"u"?process.env?.AZURE_OPENAI_API_VERSION:void 0);if(this.modelName=e?.modelName??this.modelName,this.prefixMessages=e?.prefixMessages??this.prefixMessages,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.maxTokens=e?.maxTokens,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=s,this.azureOpenAIApiInstanceName=i,this.azureOpenAIApiDeploymentName=a,this.streaming&&this.n>1)throw new Error("Cannot stream results when n > 1");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...t}}invocationParams(){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,logit_bias:this.logitBias,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,stop:this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}formatMessages(e){let t={role:"user",content:e};return this.prefixMessages?[...this.prefixMessages,t]:[t]}async _call(e,t,n){let{stop:s}=t,i=this.invocationParams();return i.stop=s??i.stop,(i.stream?await new Promise((o,u)=>{let l,d=!1,b=!1;this.completionWithRetry({...i,messages:this.formatMessages(e)},{signal:t.signal,...t.options,adapter:Ue,responseType:"stream",onmessage:v=>{if(v.data?.trim?.()==="[DONE]"){if(b)return;b=!0,o(l)}else{let P=JSON.parse(v.data);l||(l={id:P.id,object:P.object,created:P.created,model:P.model,choices:[]});for(let m of P.choices)if(m!=null){let T=l.choices.find(j=>j.index===m.index);T||(T={index:m.index,finish_reason:m.finish_reason??void 0},l.choices.push(T)),T.message||(T.message={role:m.delta?.role,content:m.delta?.content??""}),T.message.content+=m.delta?.content??"",n?.handleLLMNewToken(m.delta?.content??"")}!b&&P.choices.every(m=>m.finish_reason!=null)&&(b=!0,o(l))}}}).catch(v=>{d||(d=!0,u(v))})}):await this.completionWithRetry({...i,messages:this.formatMessages(e)},{signal:t.signal,...t.options})).choices[0].message?.content??""}async completionWithRetry(e,t){if(!this.client){let s=this.azureOpenAIApiKey?`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}`:this.clientConfig.basePath,i=new zs.Configuration({...this.clientConfig,basePath:s,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new zs.OpenAIApi(i)}let n={adapter:pt()?void 0:Ue,...this.clientConfig.baseOptions,...t};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createChatCompletion.bind(this.client),e,n).then(s=>s.data)}_llmType(){return"openai"}},Bs=class extends Yt{constructor(e){if(super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.promptLayerApiKey=e?.promptLayerApiKey??(typeof process<"u"?process.env?.PROMPTLAYER_API_KEY:void 0),!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,t){if(e.stream)return super.completionWithRetry(e,t);let n=Date.now(),s=await super.completionWithRetry(e),i=Date.now();return await this.caller.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:"openai.ChatCompletion.create",args:[],kwargs:{engine:e.model,messages:e.messages},tags:this.plTags??[],request_response:s,request_start_time:Math.floor(n/1e3),request_end_time:Math.floor(i/1e3),api_key:this.promptLayerApiKey})}),s}}});var Fd={};Ye(Fd,{OpenAI:()=>Dr,OpenAIChat:()=>Yt,PromptLayerOpenAI:()=>Io,PromptLayerOpenAIChat:()=>Bs});var Ks,Dr,Io,To=R(()=>{Ks=De(gr(),1);wr();Tr();ro();Ao();Mr();Eo();Eo();Dr=class extends Cn{get callKeys(){return["stop","signal","timeout","options"]}constructor(e,t){if(e?.modelName?.startsWith("gpt-3.5-turbo")||e?.modelName?.startsWith("gpt-4")||e?.modelName?.startsWith("gpt-4-32k"))return new Yt(e,t);super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-davinci-003"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=e?.openAIApiKey??(typeof process<"u"?process.env?.OPENAI_API_KEY:void 0),s=e?.azureOpenAIApiKey??(typeof process<"u"?process.env?.AZURE_OPENAI_API_KEY:void 0);if(!s&&!n)throw new Error("(Azure) OpenAI API key not found");let i=e?.azureOpenAIApiInstanceName??(typeof process<"u"?process.env?.AZURE_OPENAI_API_INSTANCE_NAME:void 0),a=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??(typeof process<"u"?process.env?.AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME||process.env?.AZURE_OPENAI_API_DEPLOYMENT_NAME:void 0),o=e?.azureOpenAIApiVersion??(typeof process<"u"?process.env?.AZURE_OPENAI_API_VERSION:void 0);if(this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.batchSize=e?.batchSize??this.batchSize,this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.maxTokens=e?.maxTokens??this.maxTokens,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.bestOf=e?.bestOf??this.bestOf,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=s,this.azureOpenAIApiInstanceName=i,this.azureOpenAIApiDeploymentName=a,this.streaming&&this.n>1)throw new Error("Cannot stream results when n > 1");if(this.streaming&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");if(this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...t}}invocationParams(){return{model:this.modelName,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,t,n){let{stop:s}=t,i=On(e,this.batchSize),a=[],o={};if(this.stop&&s)throw new Error("Stop found in input and default params");let u=this.invocationParams();if(u.stop=s??u.stop,u.max_tokens===-1){if(e.length!==1)throw new Error("max_tokens set to -1 not supported for multiple inputs");u.max_tokens=await ks({prompt:e[0],modelName:this.modelName})}for(let d=0;d<i.length;d+=1){let b=u.stream?await new Promise((T,j)=>{let S=[],k,U=!1,w=!1;this.completionWithRetry({...u,prompt:i[d]},{signal:t.signal,...t.options,adapter:Ue,responseType:"stream",onmessage:C=>{if(C.data?.trim?.()==="[DONE]"){if(w)return;w=!0,T({...k,choices:S})}else{let h=JSON.parse(C.data);k||(k={id:h.id,object:h.object,created:h.created,model:h.model});for(let y of h.choices)if(y!=null&&y.index!=null){S[y.index]||(S[y.index]={});let p=S[y.index];p.text=(p.text??"")+(y.text??""),p.finish_reason=y.finish_reason,p.logprobs=y.logprobs,n?.handleLLMNewToken(y.text??"")}!w&&S.every(y=>y.finish_reason!=null)&&(w=!0,T({...k,choices:S}))}}}).catch(C=>{U||(U=!0,j(C))})}):await this.completionWithRetry({...u,prompt:i[d]},{signal:t.signal,...t.options});a.push(...b.choices);let{completion_tokens:v,prompt_tokens:P,total_tokens:m}=b.usage??{};v&&(o.completionTokens=(o.completionTokens??0)+v),P&&(o.promptTokens=(o.promptTokens??0)+P),m&&(o.totalTokens=(o.totalTokens??0)+m)}return{generations:On(a,this.n).map(d=>d.map(b=>({text:b.text??"",generationInfo:{finishReason:b.finish_reason,logprobs:b.logprobs}}))),llmOutput:{tokenUsage:o}}}async completionWithRetry(e,t){if(!this.client){let s=this.azureOpenAIApiKey?`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}`:this.clientConfig.basePath,i=new Ks.Configuration({...this.clientConfig,basePath:s,baseOptions:{timeout:this.timeout,...this.clientConfig.baseOptions}});this.client=new Ks.OpenAIApi(i)}let n={adapter:pt()?void 0:Ue,...this.clientConfig.baseOptions,...t};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.params={"api-version":this.azureOpenAIApiVersion,...n.params}),this.caller.call(this.client.createCompletion.bind(this.client),e,n).then(s=>s.data)}_llmType(){return"openai"}},Io=class extends Dr{constructor(e){if(super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.promptLayerApiKey=e?.promptLayerApiKey??(typeof process<"u"?process.env?.PROMPTLAYER_API_KEY:void 0),!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,t){if(e.stream)return super.completionWithRetry(e,t);let n=Date.now(),s=await super.completionWithRetry(e),i=Date.now();return await this.caller.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:"openai.Completion.create",args:[],kwargs:{engine:e.model,prompt:e.prompt},tags:this.plTags??[],request_response:s,request_start_time:Math.floor(n/1e3),request_end_time:Math.floor(i/1e3),api_key:this.promptLayerApiKey})}),s}}});var zd=M((jT,Bd)=>{Bd.exports=function(r,e,t,n,s){var i,a;if(n===void 0)n=0;else if(n=n|0,n<0||n>=r.length)throw new RangeError("invalid lower bound");if(s===void 0)s=r.length-1;else if(s=s|0,s<n||s>=r.length)throw new RangeError("invalid upper bound");for(;n<=s;)if(i=n+(s-n>>>1),a=+t(r[i],e,i,r),a<0)n=i+1;else if(a>0)s=i-1;else return i;return~n}});var Kd=M(Co=>{"use strict";function Xs(r){if(typeof r!="number")throw new TypeError("Expected a number")}Co.ascending=(r,e)=>(Xs(r),Xs(e),Number.isNaN(r)?-1:Number.isNaN(e)?1:r-e);Co.descending=(r,e)=>(Xs(r),Xs(e),Number.isNaN(r)?1:Number.isNaN(e)?-1:e-r)});var kt,ri=R(()=>{kt=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent?e.pageContent.toString():this.pageContent,this.metadata=e.metadata??{}}}});var Jd,Bo,Fo,Dy,Ur,zo,Nn,Vr=R(()=>{Jd=r=>{let e=r.split(""),t=[],n=(i,a)=>{for(let o=a;o<e.length;o+=1)if(i.includes(e[o]))return o;return-1},s=0;for(;s<e.length;)if(e[s]==="{"&&s+1<e.length&&e[s+1]==="{")t.push({type:"literal",text:"{"}),s+=2;else if(e[s]==="}"&&s+1<e.length&&e[s+1]==="}")t.push({type:"literal",text:"}"}),s+=2;else if(e[s]==="{"){let i=n("}",s);if(i<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(s+1,i).join("")}),s=i+1}else{if(e[s]==="}")throw new Error("Single '}' in template.");{let i=n("{}",s),a=(i<0?e.slice(s):e.slice(s,i)).join("");t.push({type:"literal",text:a}),s=i<0?e.length:i}}return t},Bo=(r,e)=>Jd(r).reduce((t,n)=>{if(n.type==="variable"){if(n.name in e)return t+e[n.name];throw new Error(`Missing value for input ${n.name}`)}return t+n.text},""),Fo={"f-string":Bo,jinja2:(r,e)=>""},Dy={"f-string":Jd,jinja2:r=>[]},Ur=(r,e,t)=>Fo[e](r,t),zo=(r,e)=>Dy[e](r),Nn=(r,e,t)=>{if(!(e in Fo)){let n=Object.keys(Fo);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{let n=t.reduce((s,i)=>(s[i]="foo",s),{});Ur(r,e,n)}catch{throw new Error("Invalid prompt schema.")}}});var Ko={};Ye(Ko,{PromptTemplate:()=>ee});var ee,be=R(()=>{Fr();Vr();ee=class extends Wt{constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),Nn(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){let t=await this.mergePartialAndUserVariables(e);return Ur(this.template,this.templateFormat,t)}static fromExamples(e,t,n,s=`

`,i=""){let a=[i,...e,t].join(s);return new ee({inputVariables:n,template:a})}static fromTemplate(e,{templateFormat:t="f-string",...n}={}){let s=new Set;return zo(e,t).forEach(i=>{i.type==="variable"&&s.add(i.name)}),new ee({inputVariables:[...s],templateFormat:t,template:e,...n})}async partial(e){let t={...this};return t.inputVariables=this.inputVariables.filter(n=>!(n in e)),t.partialVariables={...this.partialVariables??{},...e},new ee(t)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new ee({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}});var Yd={};Ye(Yd,{FewShotPromptTemplate:()=>Rt});var Rt,ai=R(()=>{Fr();Vr();be();Rt=class extends Wt{constructor(e){if(super(e),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),Nn(this.prefix+this.suffix,this.templateFormat,t)}}_getPromptType(){return"few_shot"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){let t={...this};return t.inputVariables=this.inputVariables.filter(n=>!(n in e)),t.partialVariables={...this.partialVariables??{},...e},new Rt(t)}async format(e){let t=await this.mergePartialAndUserVariables(e),n=await this.getExamples(t),s=await Promise.all(n.map(a=>this.examplePrompt.format(a))),i=[this.prefix,...s,this.suffix].join(this.exampleSeparator);return Ur(i,this.templateFormat,t)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let{example_prompt:t}=e;if(!t)throw new Error("Missing example prompt");let n=await ee.deserialize(t),s;if(Array.isArray(e.examples))s=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new Rt({inputVariables:e.input_variables,examplePrompt:n,examples:s,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}}});var oi,Mt,Wt,Fr=R(()=>{st();oi=class extends Cr{constructor(e){super(),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new nt(this.value)]}},Mt=class{constructor(e){Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){let t=this.partialVariables??{},n={};for(let[i,a]of Object.entries(t))typeof a=="string"?n[i]=a:n[i]=await a();return{...n,...e}}static async deserialize(e){switch(e._type){case"prompt":{let{PromptTemplate:t}=await Promise.resolve().then(()=>(be(),Ko));return t.deserialize(e)}case void 0:{let{PromptTemplate:t}=await Promise.resolve().then(()=>(be(),Ko));return t.deserialize({...e,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:t}=await Promise.resolve().then(()=>(ai(),Yd));return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}},Wt=class extends Mt{async formatPromptValue(e){let t=await this.format(e);return new oi(t)}}});var Wd={};Ye(Wd,{LLMChain:()=>ae});var ae,Me=R(()=>{Se();Fr();Lr();ae=class extends se{get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??this.outputParser,this.prompt.outputParser){if(this.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}async _getFinalOutput(e,t,n){let s=e[0].text,i;return this.outputParser?i=await this.outputParser.parseWithPrompt(s,t,n?.getChild()):i=s,i}call(e,t){return super.call(e,t)}async _call(e,t){let n={...e},s={};for(let o of this.llm.callKeys)o in e&&(s[o]=e[o],delete n[o]);let i=await this.prompt.formatPromptValue(n),{generations:a}=await this.llm.generatePrompt([i],s,t?.getChild());return{[this.outputKey]:await this._getFinalOutput(a[0],i,t)}}async predict(e,t){return(await this.call(e,t))[this.outputKey]}_chainType(){return"llm_chain"}static async deserialize(e){let{llm:t,prompt:n}=e;if(!t)throw new Error("LLMChain must have llm");if(!n)throw new Error("LLMChain must have prompt");return new ae({llm:await gt.deserialize(t),prompt:await Mt.deserialize(n)})}serialize(){return{_type:this._chainType(),llm:this.llm.serialize(),prompt:this.prompt.serialize()}}}});function Zo(r,e){let t=new Set;for(let n of e)r.has(n)&&t.add(n);return t}function Gd(r,e){let t=new Set(r);for(let n of e)t.add(n);return t}function ui(r,e){let t=new Set(r);for(let n of e)t.delete(n);return t}var Xd=R(()=>{});var $o={};Ye($o,{SequentialChain:()=>Br,SimpleSequentialChain:()=>zr});function Ln(r){return Array.from(r).map(e=>`"${e}"`).join(", ")}var Br,zr,li=R(()=>{Se();Xd();Br=class extends se{get inputKeys(){return this.inputVariables}get outputKeys(){return this.outputVariables}constructor(e){if(super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.inputVariables=e.inputVariables,this.outputVariables=e.outputVariables??[],this.outputVariables.length>0&&e.returnAll)throw new Error("Either specify variables to return using `outputVariables` or use `returnAll` param. Cannot apply both conditions at the same time.");this.returnAll=e.returnAll??!1,this._validateChains()}_validateChains(){if(this.chains.length===0)throw new Error("Sequential chain must have at least one chain.");let e=this.memory?.memoryKeys??[],t=new Set(this.inputKeys),n=new Set(e),s=Zo(t,n);if(s.size>0)throw new Error(`The following keys: ${Ln(s)} are overlapping between memory and input keys of the chain variables. This can lead to unexpected behaviour. Please use input and memory keys that don't overlap.`);let i=Gd(t,n);for(let a of this.chains){let o=ui(new Set(a.inputKeys),i);if(o.size>0)throw new Error(`Missing variables for chain "${a._chainType()}": ${Ln(o)}. Only got the following variables: ${Ln(i)}.`);let u=new Set(a.outputKeys),l=Zo(i,u);if(l.size>0)throw new Error(`The following output variables for chain "${a._chainType()}" are overlapping: ${Ln(l)}. This can lead to unexpected behaviour.`);for(let d of u)i.add(d)}if(this.outputVariables.length===0)if(this.returnAll){let a=ui(i,t);this.outputVariables=Array.from(a)}else this.outputVariables=this.chains[this.chains.length-1].outputKeys;else{let a=ui(new Set(this.outputVariables),new Set(i));if(a.size>0)throw new Error(`The following output variables were expected to be in the final chain output but were not found: ${Ln(a)}.`)}}async _call(e,t){let n=e,s={};for(let a of this.chains){n=await a.call(n,t?.getChild());for(let o of Object.keys(n))s[o]=n[o]}let i={};for(let a of this.outputVariables)i[a]=s[a];return i}_chainType(){return"sequential_chain"}static async deserialize(e){let t=[],n=e.input_variables,s=e.output_variables,i=e.chains;for(let a of i){let o=await se.deserialize(a);t.push(o)}return new Br({chains:t,inputVariables:n,outputVariables:s})}serialize(){let e=[];for(let t of this.chains)e.push(t.serialize());return{_type:this._chainType(),input_variables:this.inputVariables,output_variables:this.outputVariables,chains:e}}},zr=class extends se{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e.memory,e.verbose,e.callbacks??e.callbackManager),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),Object.defineProperty(this,"trimOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.trimOutputs=e.trimOutputs??!1,this._validateChains()}_validateChains(){for(let e of this.chains){if(e.inputKeys.length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one input, got ${e.inputKeys.length} for ${e._chainType()}.`);if(e.outputKeys.length!==1)throw new Error(`Chains used in SimpleSequentialChain should all have one output, got ${e.outputKeys.length} for ${e._chainType()}.`)}}async _call(e,t){let n=e[this.inputKey];for(let s of this.chains)n=await s.run(n,t?.getChild()),this.trimOutputs&&(n=n.trim()),await t?.handleText(n);return{[this.outputKey]:n}}_chainType(){return"simple_sequential_chain"}static async deserialize(e){let t=[],n=e.chains;for(let s of n){let i=await se.deserialize(s);t.push(i)}return new zr({chains:t})}serialize(){let e=[];for(let t of this.chains)e.push(t.serialize());return{_type:this._chainType(),chains:e}}}});var ci={};Ye(ci,{MapReduceDocumentsChain:()=>Nt,RefineDocumentsChain:()=>_t,StuffDocumentsChain:()=>wt});var wt,Nt,_t,Gt=R(()=>{Se();Me();be();wt=class extends se{get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys]}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:n,...s}=e,a=n.map(({pageContent:u})=>u).join(`

`);return await this.llmChain.call({...s,[this.documentVariableName]:a},t?.getChild())}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new wt({llmChain:await ae.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}},Nt=class extends se{get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:n,...s}=e,i=n,a=[];for(let l=0;l<this.maxIterations;l+=1){let d=i.map(S=>({[this.documentVariableName]:S.pageContent,...s})),b=d.map(async S=>{let k=await this.llmChain.prompt.format(S);return this.llmChain.llm.getNumTokens(k)}),v=await Promise.all(b).then(S=>S.reduce((k,U)=>k+U,0)),P=l!==0||!this.ensureMapStep,m=v<this.maxTokens;if(P&&m)break;let T=await this.llmChain.apply(d,t?[t.getChild()]:void 0),{outputKey:j}=this.llmChain;this.returnIntermediateSteps&&(a=a.concat(T.map(S=>S[j]))),i=T.map(S=>({pageContent:S[j]}))}let o={input_documents:i,...s},u=await this.combineDocumentChain.call(o,t?.getChild());return this.returnIntermediateSteps?{...u,intermediateSteps:a}:u}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new Nt({llmChain:await ae.deserialize(e.llm_chain),combineDocumentChain:await se.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}},_t=class extends se{get defaultDocumentPrompt(){return new ee({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[this.inputKey,...this.refineLLMChain.inputKeys]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,t){let n={page_content:e.pageContent,...e.metadata},s={};return this.documentPrompt.inputVariables.forEach(o=>{s[o]=n[o]}),{...{[this.documentVariableName]:await this.documentPrompt.format({...s})},...t}}async _constructRefineInputs(e,t){let n={page_content:e.pageContent,...e.metadata},s={};this.documentPrompt.inputVariables.forEach(o=>{s[o]=n[o]});let i={[this.documentVariableName]:await this.documentPrompt.format({...s})};return{[this.initialResponseName]:t,...i}}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);let{[this.inputKey]:n,...s}=e,i=n,a=await this._constructInitialInputs(i[0],s),o=await this.llmChain.predict({...a},t?.getChild()),u=[o];for(let l=1;l<i.length;l+=1){let b={...await this._constructRefineInputs(i[l],o),...s};o=await this.refineLLMChain.predict({...b},t?.getChild()),u.push(o)}return{[this.outputKey]:o}}_chainType(){return"refine_documents_chain"}static async deserialize(e){let t=e.llm_chain;if(!t)throw new Error("Missing llm_chain");let n=e.refine_llm_chain;if(!n)throw new Error("Missing refine_llm_chain");return new _t({llmChain:await ae.deserialize(t),refineLLMChain:await ae.deserialize(n)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}});var Ho,Qo,Dn,di,at,qn,Lt,Ne,pi=R(()=>{st();Fr();be();Ho=class{serialize(){return{_type:this.constructor.name,...JSON.parse(JSON.stringify(this))}}},Qo=class extends Cr{constructor(e){super(),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e}toString(){return JSON.stringify(this.messages)}toChatMessages(){return this.messages}},Dn=class extends Ho{constructor(e){super(),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}},di=class extends Mt{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let t=await this.formatMessages(e);return new Qo(t)}},at=class extends Dn{async format(e){return new nt(await this.prompt.format(e))}constructor(e){super(e)}static fromTemplate(e){return new this(ee.fromTemplate(e))}},qn=class extends Dn{async format(e){return new mt(await this.prompt.format(e))}constructor(e){super(e)}static fromTemplate(e){return new this(ee.fromTemplate(e))}},Lt=class extends Dn{async format(e){return new Ir(await this.prompt.format(e))}constructor(e){super(e)}static fromTemplate(e){return new this(ee.fromTemplate(e))}},Ne=class extends di{constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let t=new Set;for(let a of this.promptMessages)for(let o of a.inputVariables)t.add(o);let n=new Set(this.partialVariables?this.inputVariables.concat(Object.keys(this.partialVariables)):this.inputVariables),s=new Set([...n].filter(a=>!t.has(a)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);let i=new Set([...t].filter(a=>!n.has(a)));if(i.size>0)throw new Error(`Input variables \`${[...i]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async formatMessages(e){let t=await this.mergePartialAndUserVariables(e),n=[];for(let s of this.promptMessages){let i=s.inputVariables.reduce((o,u)=>{if(!(u in t))throw new Error(`Missing value for input variable \`${u}\``);return o[u]=t[u],o},{}),a=await s.formatMessages(i);n=n.concat(a)}return n}serialize(){if(this.outputParser!==void 0)throw new Error("ChatPromptTemplate cannot be serialized if outputParser is set");return{input_variables:this.inputVariables,prompt_messages:this.promptMessages.map(e=>e.serialize())}}async partial(e){let t={...this};return t.inputVariables=this.inputVariables.filter(n=>!(n in e)),t.partialVariables={...this.partialVariables??{},...e},new Ne(t)}static fromPromptMessages(e){let t=e.reduce((i,a)=>i.concat(a instanceof Ne?a.promptMessages:[a]),[]),n=e.reduce((i,a)=>a instanceof Ne?Object.assign(i,a.partialVariables):i,Object.create(null)),s=new Set;for(let i of t)for(let a of i.inputVariables)a in n||s.add(a);return new Ne({inputVariables:[...s],promptMessages:t,partialVariables:n})}}});function Xt(r){return r._modelType()==="base_chat_model"}var hi,vt,Un=R(()=>{hi=class{async getPromptAsync(e,t){return this.getPrompt(e).partial(t?.partialVariables??{})}},vt=class extends hi{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(let[t,n]of this.conditionals)if(t(e))return n;return this.defaultPrompt}}});var qy,Uy,Vy,Fy,ep,tp=R(()=>{be();pi();Un();qy=new ee({template:`Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.

{context}

Question: {question}
Helpful Answer:`,inputVariables:["context","question"]}),Uy=`Use the following pieces of context to answer the users question. 
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}`,Vy=[Lt.fromTemplate(Uy),at.fromTemplate("{question}")],Fy=Ne.fromPromptMessages(Vy),ep=new vt(qy,[[Xt,Fy]])});var rp=R(()=>{be();pi();Un()});var np=R(()=>{});var sp=R(()=>{ri()});var ip=R(()=>{Fr();be();Un();np();sp();ai();pi();Vr()});var By,zy,Ky,Zy,$y,ap,Hy,Qy,Jy,Yy,Wy,op,up=R(()=>{ip();Un();By=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,zy=new ee({inputVariables:["question","existing_answer","context"],template:By}),Ky=`The original question is as follows: {question}
We have provided an existing answer: {existing_answer}
We have the opportunity to refine the existing answer
(only if needed) with some more context below.
------------
{context}
------------
Given the new context, refine the original answer to better answer the question. 
If the context isn't useful, return the original answer.`,Zy=[at.fromTemplate("{question}"),qn.fromTemplate("{existing_answer}"),at.fromTemplate(Ky)],$y=Ne.fromPromptMessages(Zy),ap=new vt(zy,[[Xt,$y]]),Hy=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer the question: {question}`,Qy=new ee({inputVariables:["context","question"],template:Hy}),Jy=`Context information is below. 
---------------------
{context}
---------------------
Given the context information and not prior knowledge, answer any questions`,Yy=[Lt.fromTemplate(Jy),at.fromTemplate("{question}")],Wy=Ne.fromPromptMessages(Yy),op=new vt(Qy,[[Xt,Wy]])});function er(r,e={}){let{prompt:t=ep.getPrompt(r),verbose:n}=e,s=new ae({prompt:t,llm:r,verbose:n});return new wt({llmChain:s,verbose:n})}function Jo(r,e={}){let{questionPrompt:t=op.getPrompt(r),refinePrompt:n=ap.getPrompt(r),verbose:s}=e,i=new ae({prompt:t,llm:r,verbose:s}),a=new ae({prompt:n,llm:r,verbose:s});return new _t({llmChain:i,refineLLMChain:a,verbose:s})}var Kr=R(()=>{Me();Gt();tp();rp();up()});var lp={};Ye(lp,{VectorDBQAChain:()=>Zr});var Zr,Yo=R(()=>{Se();Kr();Zr=class extends se{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"vectorstore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.vectorstore=e.vectorstore,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=e.inputKey??this.inputKey,this.k=e.k??this.k,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);let n=e[this.inputKey],s=await this.vectorstore.similaritySearch(n,this.k,e.filter),i={question:n,input_documents:s},a=await this.combineDocumentsChain.call(i,t?.getChild());return this.returnSourceDocuments?{...a,sourceDocuments:s}:a}_chainType(){return"vector_db_qa"}static async deserialize(e,t){if(!("vectorstore"in t))throw new Error("Need to pass in a vectorstore to deserialize VectorDBQAChain");let{vectorstore:n}=t;if(!e.combine_documents_chain)throw new Error("VectorDBQAChain must have combine_documents_chain in serialized data");return new Zr({combineDocumentsChain:await se.deserialize(e.combine_documents_chain),k:e.k,vectorstore:n})}serialize(){return{_type:this._chainType(),combine_documents_chain:this.combineDocumentsChain.serialize(),k:this.k}}static fromLLM(e,t,n){let s=er(e);return new this({vectorstore:t,combineDocumentsChain:s,...n})}}});var cp,dp,Gy,pp,hp=R(()=>{be();cp=`You are given the below API Documentation:
{api_docs}
Using this documentation, generate the full API url to call for answering the user question.
You should build the API url in order to get a response that is as short as possible, while still getting the necessary information to answer the question. Pay attention to deliberately exclude any unnecessary pieces of data in the API call.

Question:{question}
API url:`,dp=new ee({inputVariables:["api_docs","question"],template:cp}),Gy=`${cp} {api_url}

Here is the response from the API:

{api_response}

Summarize this response to answer the original question.

Summary:`,pp=new ee({inputVariables:["api_docs","question","api_url","api_response"],template:Gy})});var fp={};Ye(fp,{APIChain:()=>$r});var $r,Wo=R(()=>{Se();Me();hp();$r=class extends se{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"apiAnswerChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiRequestChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"question"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),this.apiRequestChain=e.apiRequestChain,this.apiAnswerChain=e.apiAnswerChain,this.apiDocs=e.apiDocs,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.headers=e.headers??this.headers}async _call(e,t){let n=e[this.inputKey],s=await this.apiRequestChain.predict({question:n,api_docs:this.apiDocs},t?.getChild()),a=await(await fetch(s,{headers:this.headers})).text(),o=await this.apiAnswerChain.predict({question:n,api_docs:this.apiDocs,api_url:s,api_response:a},t?.getChild());return{[this.outputKey]:o}}_chainType(){return"api_chain"}static async deserialize(e){let{api_request_chain:t,api_answer_chain:n,api_docs:s}=e;if(!t)throw new Error("LLMChain must have api_request_chain");if(!n)throw new Error("LLMChain must have api_answer_chain");if(!s)throw new Error("LLMChain must have api_docs");return new $r({apiAnswerChain:await ae.deserialize(n),apiRequestChain:await ae.deserialize(t),apiDocs:s})}serialize(){return{_type:this._chainType(),api_answer_chain:this.apiAnswerChain.serialize(),api_request_chain:this.apiRequestChain.serialize(),api_docs:this.apiDocs}}static fromLLMAndAPIDocs(e,t,n={}){let{apiUrlPrompt:s=dp,apiResponsePrompt:i=pp}=n,a=new ae({prompt:s,llm:e}),o=new ae({prompt:i,llm:e});return new this({apiAnswerChain:o,apiRequestChain:a,apiDocs:t,...n})}}});var se,Se=R(()=>{st();qs();Lr();se=class extends In{constructor(e,t,n){if(arguments.length===1&&typeof e=="object"&&!("saveContext"in e)){let{memory:s,callbackManager:i,...a}=e;super({...a,callbacks:i??a.callbacks}),this.memory=s}else super({verbose:t,callbacks:n}),this.memory=e}serialize(){throw new Error("Method not implemented.")}async run(e,t){if(!(this.inputKeys.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);let s=this.inputKeys.length?{[this.inputKeys[0]]:e}:{},i=await this.call(s,t),a=Object.keys(i);if(a.length===1)return i[a[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async call(e,t){let n={...e};if(this.memory!=null){let o=await this.memory.loadMemoryVariables(e);for(let[u,l]of Object.entries(o))n[u]=l}let i=await(await Re.configure(t,this.callbacks,{verbose:this.verbose}))?.handleChainStart({name:this._chainType()},n),a;try{a=await this._call(n,i)}catch(o){throw await i?.handleChainError(o),o}return this.memory!=null&&await this.memory.saveContext(e,a),await i?.handleChainEnd(a),Object.defineProperty(a,Sr,{value:i?{runId:i?.runId}:void 0,configurable:!0}),a}async apply(e,t){return Promise.all(e.map(async(n,s)=>this.call(n,t?.[s])))}static async deserialize(e,t={}){switch(e._type){case"llm_chain":{let{LLMChain:n}=await Promise.resolve().then(()=>(Me(),Wd));return n.deserialize(e)}case"sequential_chain":{let{SequentialChain:n}=await Promise.resolve().then(()=>(li(),$o));return n.deserialize(e)}case"simple_sequential_chain":{let{SimpleSequentialChain:n}=await Promise.resolve().then(()=>(li(),$o));return n.deserialize(e)}case"stuff_documents_chain":{let{StuffDocumentsChain:n}=await Promise.resolve().then(()=>(Gt(),ci));return n.deserialize(e)}case"map_reduce_documents_chain":{let{MapReduceDocumentsChain:n}=await Promise.resolve().then(()=>(Gt(),ci));return n.deserialize(e)}case"refine_documents_chain":{let{RefineDocumentsChain:n}=await Promise.resolve().then(()=>(Gt(),ci));return n.deserialize(e)}case"vector_db_qa":{let{VectorDBQAChain:n}=await Promise.resolve().then(()=>(Yo(),lp));return n.deserialize(e,t)}case"api_chain":{let{APIChain:n}=await Promise.resolve().then(()=>(Wo(),fp));return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}});var Vn=M(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.getParsedType=oe.ZodParsedType=oe.objectUtil=oe.util=void 0;var yp;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{let i={};for(let a of s)i[a]=a;return i},r.getValidEnumValues=s=>{let i=r.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(let o of i)a[o]=s[o];return r.objectValues(a)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},r.find=(s,i)=>{for(let a of s)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(yp=oe.util||(oe.util={}));var rb;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(rb=oe.objectUtil||(oe.objectUtil={}));oe.ZodParsedType=yp.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);var nb=r=>{switch(typeof r){case"undefined":return oe.ZodParsedType.undefined;case"string":return oe.ZodParsedType.string;case"number":return isNaN(r)?oe.ZodParsedType.nan:oe.ZodParsedType.number;case"boolean":return oe.ZodParsedType.boolean;case"function":return oe.ZodParsedType.function;case"bigint":return oe.ZodParsedType.bigint;case"symbol":return oe.ZodParsedType.symbol;case"object":return Array.isArray(r)?oe.ZodParsedType.array:r===null?oe.ZodParsedType.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?oe.ZodParsedType.promise:typeof Map<"u"&&r instanceof Map?oe.ZodParsedType.map:typeof Set<"u"&&r instanceof Set?oe.ZodParsedType.set:typeof Date<"u"&&r instanceof Date?oe.ZodParsedType.date:oe.ZodParsedType.object;default:return oe.ZodParsedType.unknown}};oe.getParsedType=nb});var fi=M(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.ZodError=Dt.quotelessJson=Dt.ZodIssueCode=void 0;var bp=Vn();Dt.ZodIssueCode=bp.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var sb=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");Dt.quotelessJson=sb;var Fn=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let o=n,u=0;for(;u<a.path.length;){let l=a.path[u];u===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(a))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,bp.util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};Dt.ZodError=Fn;Fn.create=r=>new Fn(r)});var Xo=M(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});var tr=Vn(),Te=fi(),ib=(r,e)=>{let t;switch(r.code){case Te.ZodIssueCode.invalid_type:r.received===tr.ZodParsedType.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Te.ZodIssueCode.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,tr.util.jsonStringifyReplacer)}`;break;case Te.ZodIssueCode.unrecognized_keys:t=`Unrecognized key(s) in object: ${tr.util.joinValues(r.keys,", ")}`;break;case Te.ZodIssueCode.invalid_union:t="Invalid input";break;case Te.ZodIssueCode.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${tr.util.joinValues(r.options)}`;break;case Te.ZodIssueCode.invalid_enum_value:t=`Invalid enum value. Expected ${tr.util.joinValues(r.options)}, received '${r.received}'`;break;case Te.ZodIssueCode.invalid_arguments:t="Invalid function arguments";break;case Te.ZodIssueCode.invalid_return_type:t="Invalid function return type";break;case Te.ZodIssueCode.invalid_date:t="Invalid date";break;case Te.ZodIssueCode.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:tr.util.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Te.ZodIssueCode.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case Te.ZodIssueCode.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case Te.ZodIssueCode.custom:t="Invalid input";break;case Te.ZodIssueCode.invalid_intersection_types:t="Intersection results could not be merged";break;case Te.ZodIssueCode.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Te.ZodIssueCode.not_finite:t="Number must be finite";break;default:t=e.defaultError,tr.util.assertNever(r)}return{message:t}};Go.default=ib});var mi=M(ot=>{"use strict";var ab=ot&&ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ot,"__esModule",{value:!0});ot.getErrorMap=ot.setErrorMap=ot.defaultErrorMap=void 0;var gp=ab(Xo());ot.defaultErrorMap=gp.default;var wp=gp.default;function ob(r){wp=r}ot.setErrorMap=ob;function ub(){return wp}ot.getErrorMap=ub});var eu=M(re=>{"use strict";var lb=re&&re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(re,"__esModule",{value:!0});re.isAsync=re.isValid=re.isDirty=re.isAborted=re.OK=re.DIRTY=re.INVALID=re.ParseStatus=re.addIssueToContext=re.EMPTY_PATH=re.makeIssue=void 0;var cb=mi(),db=lb(Xo()),pb=r=>{let{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],a={...s,path:i},o="",u=n.filter(l=>!!l).slice().reverse();for(let l of u)o=l(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}};re.makeIssue=pb;re.EMPTY_PATH=[];function hb(r,e){let t=(0,re.makeIssue)({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,(0,cb.getErrorMap)(),db.default].filter(n=>!!n)});r.common.issues.push(t)}re.addIssueToContext=hb;var Bn=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let s of t){if(s.status==="aborted")return re.INVALID;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let s of t)n.push({key:await s.key,value:await s.value});return Bn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let s of t){let{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return re.INVALID;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}};re.ParseStatus=Bn;re.INVALID=Object.freeze({status:"aborted"});var fb=r=>({status:"dirty",value:r});re.DIRTY=fb;var mb=r=>({status:"valid",value:r});re.OK=mb;var yb=r=>r.status==="aborted";re.isAborted=yb;var bb=r=>r.status==="dirty";re.isDirty=bb;var gb=r=>r.status==="valid";re.isValid=gb;var wb=r=>typeof Promise<"u"&&r instanceof Promise;re.isAsync=wb});var vp=M(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0})});var xp=M(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.errorUtil=void 0;var _b;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(_b=zn.errorUtil||(zn.errorUtil={}))});var Cp=M(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.discriminatedUnion=_.date=_.boolean=_.bigint=_.array=_.any=_.coerce=_.ZodFirstPartyTypeKind=_.late=_.ZodSchema=_.Schema=_.custom=_.ZodPipeline=_.ZodBranded=_.BRAND=_.ZodNaN=_.ZodCatch=_.ZodDefault=_.ZodNullable=_.ZodOptional=_.ZodTransformer=_.ZodEffects=_.ZodPromise=_.ZodNativeEnum=_.ZodEnum=_.ZodLiteral=_.ZodLazy=_.ZodFunction=_.ZodSet=_.ZodMap=_.ZodRecord=_.ZodTuple=_.ZodIntersection=_.ZodDiscriminatedUnion=_.ZodUnion=_.ZodObject=_.ZodArray=_.ZodVoid=_.ZodNever=_.ZodUnknown=_.ZodAny=_.ZodNull=_.ZodUndefined=_.ZodSymbol=_.ZodDate=_.ZodBoolean=_.ZodBigInt=_.ZodNumber=_.ZodString=_.ZodType=void 0;_.NEVER=_.void=_.unknown=_.union=_.undefined=_.tuple=_.transformer=_.symbol=_.string=_.strictObject=_.set=_.record=_.promise=_.preprocess=_.pipeline=_.ostring=_.optional=_.onumber=_.oboolean=_.object=_.number=_.nullable=_.null=_.never=_.nativeEnum=_.nan=_.map=_.literal=_.lazy=_.intersection=_.instanceof=_.function=_.enum=_.effect=void 0;var yi=mi(),K=xp(),A=eu(),q=Vn(),D=fi(),$e=class{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Op=(r,e)=>{if((0,A.isValid)(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new D.ZodError(r.common.issues);return this._error=t,this._error}}};function Y(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:n??o.defaultError}:{message:t??o.defaultError},description:s}}var W=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,q.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,q.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new A.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,q.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,A.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let s={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,q.getParsedType)(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Op(s,i)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,q.getParsedType)(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await((0,A.isAsync)(s)?s:Promise.resolve(s));return Op(n,i)}refine(e,t){let n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{let a=e(s),o=()=>i.addIssue({code:D.ZodIssueCode.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new Be({schema:this,typeName:H.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Xe.create(this,this._def)}nullable(){return At.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fe.create(this,this._def)}promise(){return Vt.create(this,this._def)}or(e){return ir.create([this,e],this._def)}and(e){return ar.create(this,e,this._def)}transform(e){return new Be({...Y(this._def),schema:this,typeName:H.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new dr({...Y(this._def),innerType:this,defaultValue:t,typeName:H.ZodDefault})}brand(){return new gi({typeName:H.ZodBranded,type:this,...Y(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Xr({...Y(this._def),innerType:this,catchValue:t,typeName:H.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return pr.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};_.ZodType=W;_.Schema=W;_.ZodSchema=W;var vb=/^c[^\s-]{8,}$/i,xb=/^[a-z][a-z0-9]*$/,Ob=/[0-9A-HJKMNP-TV-Z]{26}/,Pb=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Ab=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Tb=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Eb=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Ib=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Cb=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Sb(r,e){return!!((e==="v4"||!e)&&Eb.test(r)||(e==="v6"||!e)&&Ib.test(r))}var Ve=class extends W{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement(s=>e.test(s),{validation:t,code:D.ZodIssueCode.invalid_string,...K.errorUtil.errToObj(n)}),this.nonempty=e=>this.min(1,K.errorUtil.errToObj(e)),this.trim=()=>new Ve({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Ve({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Ve({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==q.ZodParsedType.string){let i=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.string,received:i.parsedType}),A.INVALID}let n=new A.ParseStatus,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Ab.test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"email",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Tb.test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"emoji",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Pb.test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"uuid",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")vb.test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"cuid",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")xb.test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"cuid2",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Ob.test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"ulid",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"url",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"regex",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Cb(i).test(e.data)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?Sb(e.data,i.version)||(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{validation:"ip",code:D.ZodIssueCode.invalid_string,message:i.message}),n.dirty()):q.util.assertNever(i);return{status:n.value,value:e.data}}_addCheck(e){return new Ve({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...K.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...K.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...K.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...K.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...K.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...K.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...K.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...K.errorUtil.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,...K.errorUtil.errToObj(e?.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...K.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...K.errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...K.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...K.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...K.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...K.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...K.errorUtil.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};_.ZodString=Ve;Ve.create=r=>{var e;return new Ve({checks:[],typeName:H.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...Y(r)})};function jb(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}var ut=class extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==q.ZodParsedType.number){let i=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.number,received:i.parsedType}),A.INVALID}let n,s=new A.ParseStatus;for(let i of this._def.checks)i.kind==="int"?q.util.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?jb(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.not_finite,message:i.message}),s.dirty()):q.util.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,K.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,K.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,K.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,K.errorUtil.toString(t))}setLimit(e,t,n,s){return new ut({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:K.errorUtil.toString(s)}]})}_addCheck(e){return new ut({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:K.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:K.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:K.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:K.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:K.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:K.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:K.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:K.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:K.errorUtil.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&q.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};_.ZodNumber=ut;ut.create=r=>new ut({checks:[],typeName:H.ZodNumber,coerce:r?.coerce||!1,...Y(r)});var lt=class extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==q.ZodParsedType.bigint){let i=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.bigint,received:i.parsedType}),A.INVALID}let n,s=new A.ParseStatus;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):q.util.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,K.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,K.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,K.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,K.errorUtil.toString(t))}setLimit(e,t,n,s){return new lt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:K.errorUtil.toString(s)}]})}_addCheck(e){return new lt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:K.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:K.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:K.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:K.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:K.errorUtil.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};_.ZodBigInt=lt;lt.create=r=>{var e;return new lt({checks:[],typeName:H.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...Y(r)})};var rr=class extends W{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==q.ZodParsedType.boolean){let n=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.boolean,received:n.parsedType}),A.INVALID}return(0,A.OK)(e.data)}};_.ZodBoolean=rr;rr.create=r=>new rr({typeName:H.ZodBoolean,coerce:r?.coerce||!1,...Y(r)});var Ot=class extends W{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==q.ZodParsedType.date){let i=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.date,received:i.parsedType}),A.INVALID}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(i,{code:D.ZodIssueCode.invalid_date}),A.INVALID}let n=new A.ParseStatus,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),(0,A.addIssueToContext)(s,{code:D.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):q.util.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ot({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:K.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:K.errorUtil.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};_.ZodDate=Ot;Ot.create=r=>new Ot({checks:[],coerce:r?.coerce||!1,typeName:H.ZodDate,...Y(r)});var Jr=class extends W{_parse(e){if(this._getType(e)!==q.ZodParsedType.symbol){let n=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.symbol,received:n.parsedType}),A.INVALID}return(0,A.OK)(e.data)}};_.ZodSymbol=Jr;Jr.create=r=>new Jr({typeName:H.ZodSymbol,...Y(r)});var nr=class extends W{_parse(e){if(this._getType(e)!==q.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.undefined,received:n.parsedType}),A.INVALID}return(0,A.OK)(e.data)}};_.ZodUndefined=nr;nr.create=r=>new nr({typeName:H.ZodUndefined,...Y(r)});var sr=class extends W{_parse(e){if(this._getType(e)!==q.ZodParsedType.null){let n=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.null,received:n.parsedType}),A.INVALID}return(0,A.OK)(e.data)}};_.ZodNull=sr;sr.create=r=>new sr({typeName:H.ZodNull,...Y(r)});var Ut=class extends W{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,A.OK)(e.data)}};_.ZodAny=Ut;Ut.create=r=>new Ut({typeName:H.ZodAny,...Y(r)});var xt=class extends W{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,A.OK)(e.data)}};_.ZodUnknown=xt;xt.create=r=>new xt({typeName:H.ZodUnknown,...Y(r)});var et=class extends W{_parse(e){let t=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.never,received:t.parsedType}),A.INVALID}};_.ZodNever=et;et.create=r=>new et({typeName:H.ZodNever,...Y(r)});var Yr=class extends W{_parse(e){if(this._getType(e)!==q.ZodParsedType.undefined){let n=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.void,received:n.parsedType}),A.INVALID}return(0,A.OK)(e.data)}};_.ZodVoid=Yr;Yr.create=r=>new Yr({typeName:H.ZodVoid,...Y(r)});var Fe=class extends W{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==q.ZodParsedType.array)return(0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.array,received:t.parsedType}),A.INVALID;if(s.exactLength!==null){let a=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(a||o)&&((0,A.addIssueToContext)(t,{code:a?D.ZodIssueCode.too_big:D.ZodIssueCode.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&((0,A.addIssueToContext)(t,{code:D.ZodIssueCode.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&((0,A.addIssueToContext)(t,{code:D.ZodIssueCode.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>s.type._parseAsync(new $e(t,a,t.path,o)))).then(a=>A.ParseStatus.mergeArray(n,a));let i=[...t.data].map((a,o)=>s.type._parseSync(new $e(t,a,t.path,o)));return A.ParseStatus.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Fe({...this._def,minLength:{value:e,message:K.errorUtil.toString(t)}})}max(e,t){return new Fe({...this._def,maxLength:{value:e,message:K.errorUtil.toString(t)}})}length(e,t){return new Fe({...this._def,exactLength:{value:e,message:K.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}};_.ZodArray=Fe;Fe.create=(r,e)=>new Fe({type:r,minLength:null,maxLength:null,exactLength:null,typeName:H.ZodArray,...Y(e)});function Qr(r){if(r instanceof le){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=Xe.create(Qr(n))}return new le({...r._def,shape:()=>e})}else return r instanceof Fe?new Fe({...r._def,type:Qr(r.element)}):r instanceof Xe?Xe.create(Qr(r.unwrap())):r instanceof At?At.create(Qr(r.unwrap())):r instanceof He?He.create(r.items.map(e=>Qr(e))):r}var le=class extends W{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=q.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==q.ZodParsedType.object){let l=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(l,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.object,received:l.parsedType}),A.INVALID}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof et&&this._def.unknownKeys==="strip"))for(let l in s.data)a.includes(l)||o.push(l);let u=[];for(let l of a){let d=i[l],b=s.data[l];u.push({key:{status:"valid",value:l},value:d._parse(new $e(s,b,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof et){let l=this._def.unknownKeys;if(l==="passthrough")for(let d of o)u.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(l==="strict")o.length>0&&((0,A.addIssueToContext)(s,{code:D.ZodIssueCode.unrecognized_keys,keys:o}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let d of o){let b=s.data[d];u.push({key:{status:"valid",value:d},value:l._parse(new $e(s,b,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let d of u){let b=await d.key;l.push({key:b,value:await d.value,alwaysSet:d.alwaysSet})}return l}).then(l=>A.ParseStatus.mergeObjectSync(n,l)):A.ParseStatus.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return K.errorUtil.errToObj,new le({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,a,o;let u=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=K.errorUtil.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new le({...this._def,unknownKeys:"strip"})}passthrough(){return new le({...this._def,unknownKeys:"passthrough"})}extend(e){return new le({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new le({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:H.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new le({...this._def,catchall:e})}pick(e){let t={};return q.util.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new le({...this._def,shape:()=>t})}omit(e){let t={};return q.util.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new le({...this._def,shape:()=>t})}deepPartial(){return Qr(this)}partial(e){let t={};return q.util.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new le({...this._def,shape:()=>t})}required(e){let t={};return q.util.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Xe;)i=i._def.innerType;t[n]=i}}),new le({...this._def,shape:()=>t})}keyof(){return Pp(q.util.objectKeys(this.shape))}};_.ZodObject=le;le.create=(r,e)=>new le({shape:()=>r,unknownKeys:"strip",catchall:et.create(),typeName:H.ZodObject,...Y(e)});le.strictCreate=(r,e)=>new le({shape:()=>r,unknownKeys:"strict",catchall:et.create(),typeName:H.ZodObject,...Y(e)});le.lazycreate=(r,e)=>new le({shape:r,unknownKeys:"strip",catchall:et.create(),typeName:H.ZodObject,...Y(e)});var ir=class extends W{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(o=>new D.ZodError(o.ctx.common.issues));return(0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_union,unionErrors:a}),A.INVALID}if(t.common.async)return Promise.all(n.map(async i=>{let a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i,a=[];for(let u of n){let l={...t,common:{...t.common,issues:[]},parent:null},d=u._parseSync({data:t.data,path:t.path,parent:l});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;let o=a.map(u=>new D.ZodError(u));return(0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_union,unionErrors:o}),A.INVALID}}get options(){return this._def.options}};_.ZodUnion=ir;ir.create=(r,e)=>new ir({options:r,typeName:H.ZodUnion,...Y(e)});var bi=r=>r instanceof ur?bi(r.schema):r instanceof Be?bi(r.innerType()):r instanceof lr?[r.value]:r instanceof ct?r.options:r instanceof cr?Object.keys(r.enum):r instanceof dr?bi(r._def.innerType):r instanceof nr?[void 0]:r instanceof sr?[null]:null,Wr=class extends W{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==q.ZodParsedType.object)return(0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.object,received:t.parsedType}),A.INVALID;let n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):((0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),A.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let s=new Map;for(let i of t){let a=bi(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new Wr({typeName:H.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...Y(n)})}};_.ZodDiscriminatedUnion=Wr;function tu(r,e){let t=(0,q.getParsedType)(r),n=(0,q.getParsedType)(e);if(r===e)return{valid:!0,data:r};if(t===q.ZodParsedType.object&&n===q.ZodParsedType.object){let s=q.util.objectKeys(e),i=q.util.objectKeys(r).filter(o=>s.indexOf(o)!==-1),a={...r,...e};for(let o of i){let u=tu(r[o],e[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(t===q.ZodParsedType.array&&n===q.ZodParsedType.array){if(r.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<r.length;i++){let a=r[i],o=e[i],u=tu(a,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return t===q.ZodParsedType.date&&n===q.ZodParsedType.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var ar=class extends W{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=(i,a)=>{if((0,A.isAborted)(i)||(0,A.isAborted)(a))return A.INVALID;let o=tu(i.value,a.value);return o.valid?(((0,A.isDirty)(i)||(0,A.isDirty)(a))&&t.dirty(),{status:t.value,value:o.data}):((0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_intersection_types}),A.INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};_.ZodIntersection=ar;ar.create=(r,e,t)=>new ar({left:r,right:e,typeName:H.ZodIntersection,...Y(t)});var He=class extends W{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.array)return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.array,received:n.parsedType}),A.INVALID;if(n.data.length<this._def.items.length)return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A.INVALID;!this._def.rest&&n.data.length>this._def.items.length&&((0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...n.data].map((a,o)=>{let u=this._def.items[o]||this._def.rest;return u?u._parse(new $e(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>A.ParseStatus.mergeArray(t,a)):A.ParseStatus.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new He({...this._def,rest:e})}};_.ZodTuple=He;He.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new He({items:r,typeName:H.ZodTuple,rest:null,...Y(e)})};var or=class extends W{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.object)return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.object,received:n.parsedType}),A.INVALID;let s=[],i=this._def.keyType,a=this._def.valueType;for(let o in n.data)s.push({key:i._parse(new $e(n,o,n.path,o)),value:a._parse(new $e(n,n.data[o],n.path,o))});return n.common.async?A.ParseStatus.mergeObjectAsync(t,s):A.ParseStatus.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof W?new or({keyType:e,valueType:t,typeName:H.ZodRecord,...Y(n)}):new or({keyType:Ve.create(),valueType:e,typeName:H.ZodRecord,...Y(t)})}};_.ZodRecord=or;var Gr=class extends W{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.map)return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.map,received:n.parsedType}),A.INVALID;let s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([o,u],l)=>({key:s._parse(new $e(n,o,n.path,[l,"key"])),value:i._parse(new $e(n,u,n.path,[l,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let u of a){let l=await u.key,d=await u.value;if(l.status==="aborted"||d.status==="aborted")return A.INVALID;(l.status==="dirty"||d.status==="dirty")&&t.dirty(),o.set(l.value,d.value)}return{status:t.value,value:o}})}else{let o=new Map;for(let u of a){let l=u.key,d=u.value;if(l.status==="aborted"||d.status==="aborted")return A.INVALID;(l.status==="dirty"||d.status==="dirty")&&t.dirty(),o.set(l.value,d.value)}return{status:t.value,value:o}}}};_.ZodMap=Gr;Gr.create=(r,e,t)=>new Gr({valueType:e,keyType:r,typeName:H.ZodMap,...Y(t)});var Pt=class extends W{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==q.ZodParsedType.set)return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.set,received:n.parsedType}),A.INVALID;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&((0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&((0,A.addIssueToContext)(n,{code:D.ZodIssueCode.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let i=this._def.valueType;function a(u){let l=new Set;for(let d of u){if(d.status==="aborted")return A.INVALID;d.status==="dirty"&&t.dirty(),l.add(d.value)}return{status:t.value,value:l}}let o=[...n.data.values()].map((u,l)=>i._parse(new $e(n,u,n.path,l)));return n.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(e,t){return new Pt({...this._def,minSize:{value:e,message:K.errorUtil.toString(t)}})}max(e,t){return new Pt({...this._def,maxSize:{value:e,message:K.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};_.ZodSet=Pt;Pt.create=(r,e)=>new Pt({valueType:r,minSize:null,maxSize:null,typeName:H.ZodSet,...Y(e)});var qt=class extends W{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==q.ZodParsedType.function)return(0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.function,received:t.parsedType}),A.INVALID;function n(o,u){return(0,A.makeIssue)({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,yi.getErrorMap)(),yi.defaultErrorMap].filter(l=>!!l),issueData:{code:D.ZodIssueCode.invalid_arguments,argumentsError:u}})}function s(o,u){return(0,A.makeIssue)({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,yi.getErrorMap)(),yi.defaultErrorMap].filter(l=>!!l),issueData:{code:D.ZodIssueCode.invalid_return_type,returnTypeError:u}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;return this._def.returns instanceof Vt?(0,A.OK)(async(...o)=>{let u=new D.ZodError([]),l=await this._def.args.parseAsync(o,i).catch(v=>{throw u.addIssue(n(o,v)),u}),d=await a(...l);return await this._def.returns._def.type.parseAsync(d,i).catch(v=>{throw u.addIssue(s(d,v)),u})}):(0,A.OK)((...o)=>{let u=this._def.args.safeParse(o,i);if(!u.success)throw new D.ZodError([n(o,u.error)]);let l=a(...u.data),d=this._def.returns.safeParse(l,i);if(!d.success)throw new D.ZodError([s(l,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qt({...this._def,args:He.create(e).rest(xt.create())})}returns(e){return new qt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new qt({args:e||He.create([]).rest(xt.create()),returns:t||xt.create(),typeName:H.ZodFunction,...Y(n)})}};_.ZodFunction=qt;var ur=class extends W{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};_.ZodLazy=ur;ur.create=(r,e)=>new ur({getter:r,typeName:H.ZodLazy,...Y(e)});var lr=class extends W{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(t,{received:t.data,code:D.ZodIssueCode.invalid_literal,expected:this._def.value}),A.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}};_.ZodLiteral=lr;lr.create=(r,e)=>new lr({value:r,typeName:H.ZodLiteral,...Y(e)});function Pp(r,e){return new ct({values:r,typeName:H.ZodEnum,...Y(e)})}var ct=class extends W{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return(0,A.addIssueToContext)(t,{expected:q.util.joinValues(n),received:t.parsedType,code:D.ZodIssueCode.invalid_type}),A.INVALID}if(this._def.values.indexOf(e.data)===-1){let t=this._getOrReturnCtx(e),n=this._def.values;return(0,A.addIssueToContext)(t,{received:t.data,code:D.ZodIssueCode.invalid_enum_value,options:n}),A.INVALID}return(0,A.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return ct.create(e)}exclude(e){return ct.create(this.options.filter(t=>!e.includes(t)))}};_.ZodEnum=ct;ct.create=Pp;var cr=class extends W{_parse(e){let t=q.util.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==q.ZodParsedType.string&&n.parsedType!==q.ZodParsedType.number){let s=q.util.objectValues(t);return(0,A.addIssueToContext)(n,{expected:q.util.joinValues(s),received:n.parsedType,code:D.ZodIssueCode.invalid_type}),A.INVALID}if(t.indexOf(e.data)===-1){let s=q.util.objectValues(t);return(0,A.addIssueToContext)(n,{received:n.data,code:D.ZodIssueCode.invalid_enum_value,options:s}),A.INVALID}return(0,A.OK)(e.data)}get enum(){return this._def.values}};_.ZodNativeEnum=cr;cr.create=(r,e)=>new cr({values:r,typeName:H.ZodNativeEnum,...Y(e)});var Vt=class extends W{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==q.ZodParsedType.promise&&t.common.async===!1)return(0,A.addIssueToContext)(t,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.promise,received:t.parsedType}),A.INVALID;let n=t.parsedType===q.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,A.OK)(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}};_.ZodPromise=Vt;Vt.create=(r,e)=>new Vt({type:r,typeName:H.ZodPromise,...Y(e)});var Be=class extends W{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===H.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){let a=s.transform(n.data);return n.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}let i={addIssue:a=>{(0,A.addIssueToContext)(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){let a=o=>{let u=s.refinement(o,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?A.INVALID:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?A.INVALID:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!(0,A.isValid)(a))return a;let o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>(0,A.isValid)(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);q.util.assertNever(s)}};_.ZodEffects=Be;_.ZodTransformer=Be;Be.create=(r,e,t)=>new Be({schema:r,typeName:H.ZodEffects,effect:e,...Y(t)});Be.createWithPreprocess=(r,e,t)=>new Be({schema:e,effect:{type:"preprocess",transform:r},typeName:H.ZodEffects,...Y(t)});var Xe=class extends W{_parse(e){return this._getType(e)===q.ZodParsedType.undefined?(0,A.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_.ZodOptional=Xe;Xe.create=(r,e)=>new Xe({innerType:r,typeName:H.ZodOptional,...Y(e)});var At=class extends W{_parse(e){return this._getType(e)===q.ZodParsedType.null?(0,A.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};_.ZodNullable=At;At.create=(r,e)=>new At({innerType:r,typeName:H.ZodNullable,...Y(e)});var dr=class extends W{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===q.ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};_.ZodDefault=dr;dr.create=(r,e)=>new dr({innerType:r,typeName:H.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Y(e)});var Xr=class extends W{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return(0,A.isAsync)(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new D.ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new D.ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};_.ZodCatch=Xr;Xr.create=(r,e)=>new Xr({innerType:r,typeName:H.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Y(e)});var en=class extends W{_parse(e){if(this._getType(e)!==q.ZodParsedType.nan){let n=this._getOrReturnCtx(e);return(0,A.addIssueToContext)(n,{code:D.ZodIssueCode.invalid_type,expected:q.ZodParsedType.nan,received:n.parsedType}),A.INVALID}return{status:"valid",value:e.data}}};_.ZodNaN=en;en.create=r=>new en({typeName:H.ZodNaN,...Y(r)});_.BRAND=Symbol("zod_brand");var gi=class extends W{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}};_.ZodBranded=gi;var pr=class extends W{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?A.INVALID:i.status==="dirty"?(t.dirty(),(0,A.DIRTY)(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?A.INVALID:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new pr({in:e,out:t,typeName:H.ZodPipeline})}};_.ZodPipeline=pr;var kb=(r,e={},t)=>r?Ut.create().superRefine((n,s)=>{var i,a;if(!r(n)){let o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,l=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...l,fatal:u})}}):Ut.create();_.custom=kb;_.late={object:le.lazycreate};var H;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline"})(H=_.ZodFirstPartyTypeKind||(_.ZodFirstPartyTypeKind={}));var Rb=(r,e={message:`Input not instance of ${r.name}`})=>(0,_.custom)(t=>t instanceof r,e);_.instanceof=Rb;var Ap=Ve.create;_.string=Ap;var Tp=ut.create;_.number=Tp;var Mb=en.create;_.nan=Mb;var Nb=lt.create;_.bigint=Nb;var Ep=rr.create;_.boolean=Ep;var Lb=Ot.create;_.date=Lb;var Db=Jr.create;_.symbol=Db;var qb=nr.create;_.undefined=qb;var Ub=sr.create;_.null=Ub;var Vb=Ut.create;_.any=Vb;var Fb=xt.create;_.unknown=Fb;var Bb=et.create;_.never=Bb;var zb=Yr.create;_.void=zb;var Kb=Fe.create;_.array=Kb;var Zb=le.create;_.object=Zb;var $b=le.strictCreate;_.strictObject=$b;var Hb=ir.create;_.union=Hb;var Qb=Wr.create;_.discriminatedUnion=Qb;var Jb=ar.create;_.intersection=Jb;var Yb=He.create;_.tuple=Yb;var Wb=or.create;_.record=Wb;var Gb=Gr.create;_.map=Gb;var Xb=Pt.create;_.set=Xb;var eg=qt.create;_.function=eg;var tg=ur.create;_.lazy=tg;var rg=lr.create;_.literal=rg;var ng=ct.create;_.enum=ng;var sg=cr.create;_.nativeEnum=sg;var ig=Vt.create;_.promise=ig;var Ip=Be.create;_.effect=Ip;_.transformer=Ip;var ag=Xe.create;_.optional=ag;var og=At.create;_.nullable=og;var ug=Be.createWithPreprocess;_.preprocess=ug;var lg=pr.create;_.pipeline=lg;var cg=()=>Ap().optional();_.ostring=cg;var dg=()=>Tp().optional();_.onumber=dg;var pg=()=>Ep().optional();_.oboolean=pg;_.coerce={string:r=>Ve.create({...r,coerce:!0}),number:r=>ut.create({...r,coerce:!0}),boolean:r=>rr.create({...r,coerce:!0}),bigint:r=>lt.create({...r,coerce:!0}),date:r=>Ot.create({...r,coerce:!0})};_.NEVER=A.INVALID});var ru=M(Qe=>{"use strict";var hg=Qe&&Qe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),tn=Qe&&Qe.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&hg(e,r,t)};Object.defineProperty(Qe,"__esModule",{value:!0});tn(mi(),Qe);tn(eu(),Qe);tn(vp(),Qe);tn(Vn(),Qe);tn(Cp(),Qe);tn(fi(),Qe)});var wi=M(Le=>{"use strict";var Sp=Le&&Le.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),fg=Le&&Le.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mg=Le&&Le.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Sp(e,r,t);return fg(e,r),e},yg=Le&&Le.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Sp(e,r,t)};Object.defineProperty(Le,"__esModule",{value:!0});Le.z=void 0;var jp=mg(ru());Le.z=jp;yg(ru(),Le);Le.default=jp});var kp=M(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.parseAnyDef=void 0;function bg(){return{}}_i.parseAnyDef=bg});var nn=M(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.setResponseValueAndErrors=rn.addErrorMessage=void 0;function Rp(r,e,t,n){n?.errorMessages&&t&&(r.errorMessage=Object.assign(Object.assign({},r.errorMessage),{[e]:t}))}rn.addErrorMessage=Rp;function gg(r,e,t,n,s){r[e]=t,Rp(r,e,n,s)}rn.setResponseValueAndErrors=gg});var Np=M(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.parseArrayDef=void 0;var wg=wi(),Mp=nn(),_g=_e();function vg(r,e){var t,n;let s={type:"array"};return((n=(t=r.type)===null||t===void 0?void 0:t._def)===null||n===void 0?void 0:n.typeName)!==wg.ZodFirstPartyTypeKind.ZodAny&&(s.items=(0,_g.parseDef)(r.type._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items"]}))),r.minLength&&(0,Mp.setResponseValueAndErrors)(s,"minItems",r.minLength.value,r.minLength.message,e),r.maxLength&&(0,Mp.setResponseValueAndErrors)(s,"maxItems",r.maxLength.value,r.maxLength.message,e),s}vi.parseArrayDef=vg});var Lp=M(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.parseBigintDef=void 0;var hr=nn();function xg(r,e){let t={type:"integer",format:"int64"};if(!r.checks)return t;for(let n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?(0,hr.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e):(0,hr.setResponseValueAndErrors)(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),(0,hr.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,hr.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e):(0,hr.setResponseValueAndErrors)(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),(0,hr.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e));break;case"multipleOf":(0,hr.setResponseValueAndErrors)(t,"multipleOf",n.value,n.message,e);break}return t}xi.parseBigintDef=xg});var Dp=M(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.parseBooleanDef=void 0;function Og(){return{type:"boolean"}}Oi.parseBooleanDef=Og});var qp=M(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.parseBrandedDef=void 0;var Pg=_e();function Ag(r,e){return(0,Pg.parseDef)(r.type._def,e)}Pi.parseBrandedDef=Ag});var Up=M(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.parseCatchDef=void 0;var Tg=_e(),Eg=(r,e)=>(0,Tg.parseDef)(r.innerType._def,e);Ai.parseCatchDef=Eg});var Vp=M(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.parseDateDef=void 0;function Ig(){return{type:"string",format:"date-time"}}Ti.parseDateDef=Ig});var Fp=M(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.parseDefaultDef=void 0;var Cg=_e();function Sg(r,e){return Object.assign(Object.assign({},(0,Cg.parseDef)(r.innerType._def,e)),{default:r.defaultValue()})}Ei.parseDefaultDef=Sg});var Bp=M(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.parseEffectsDef=void 0;var jg=_e();function kg(r,e){return e.effectStrategy==="input"?(0,jg.parseDef)(r.schema._def,e):{}}Ii.parseEffectsDef=kg});var zp=M(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.parseEnumDef=void 0;function Rg(r){return{type:"string",enum:r.values}}Ci.parseEnumDef=Rg});var Zp=M(sn=>{"use strict";var Mg=sn&&sn.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};Object.defineProperty(sn,"__esModule",{value:!0});sn.parseIntersectionDef=void 0;var Kp=_e(),Ng=r=>"type"in r&&r.type==="string"?!1:"allOf"in r;function Lg(r,e){let t=[(0,Kp.parseDef)(r.left._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","0"]})),(0,Kp.parseDef)(r.right._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","1"]}))].filter(i=>!!i),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,s=[];return t.forEach(i=>{if(Ng(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(n=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){let{additionalProperties:o}=i;a=Mg(i,["additionalProperties"])}else n=void 0;s.push(a)}}),s.length?Object.assign({allOf:s},n):void 0}sn.parseIntersectionDef=Lg});var $p=M(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.parseLiteralDef=void 0;function Dg(r,e){let t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}Si.parseLiteralDef=Dg});var Qp=M(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.parseMapDef=void 0;var Hp=_e();function qg(r,e){let t=(0,Hp.parseDef)(r.keyType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items","items","0"]}))||{},n=(0,Hp.parseDef)(r.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}ji.parseMapDef=qg});var Jp=M(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.parseNativeEnumDef=void 0;function Ug(r){let e=r.values,n=Object.keys(r.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(n.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}ki.parseNativeEnumDef=Ug});var Yp=M(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.parseNeverDef=void 0;function Vg(){return{not:{}}}Ri.parseNeverDef=Vg});var Wp=M(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.parseNullDef=void 0;function Fg(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}Mi.parseNullDef=Fg});var nu=M(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.parseUnionDef=Ft.primitiveMappings=void 0;var Bg=_e();Ft.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function zg(r,e){if(e.target==="openApi3")return Gp(r,e);let t=r.options instanceof Map?Array.from(r.options.values()):r.options;if(t.every(n=>n._def.typeName in Ft.primitiveMappings&&(!n._def.checks||!n._def.checks.length))){let n=t.reduce((s,i)=>{let a=Ft.primitiveMappings[i._def.typeName];return a&&!s.includes(a)?[...s,a]:s},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=t.reduce((s,i)=>{let a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...s,a];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===t.length){let s=n.filter((i,a,o)=>o.indexOf(i)===a);return{type:s.length>1?s:s[0],enum:t.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,s)=>[...n,...s._def.values.filter(i=>!n.includes(i))],[])};return Gp(r,e)}Ft.parseUnionDef=zg;var Gp=(r,e)=>{let t=(r.options instanceof Map?Array.from(r.options.values()):r.options).map((n,s)=>(0,Bg.parseDef)(n._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf",`${s}`]}))).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0}});var eh=M(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.parseNullableDef=void 0;var Kg=_e(),Xp=nu();function Zg(r,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return e.target==="openApi3"?{type:Xp.primitiveMappings[r.innerType._def.typeName],nullable:!0}:{type:[Xp.primitiveMappings[r.innerType._def.typeName],"null"]};let t=(0,Kg.parseDef)(r.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf","0"]}));return t?e.target==="openApi3"?Object.assign(Object.assign({},t),{nullable:!0}):{anyOf:[t,{type:"null"}]}:void 0}Ni.parseNullableDef=Zg});var th=M(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.parseNumberDef=void 0;var Bt=nn();function $g(r,e){let t={type:"number"};if(!r.checks)return t;for(let n of r.checks)switch(n.kind){case"int":t.type="integer",(0,Bt.addErrorMessage)(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?(0,Bt.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e):(0,Bt.setResponseValueAndErrors)(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),(0,Bt.setResponseValueAndErrors)(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?(0,Bt.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e):(0,Bt.setResponseValueAndErrors)(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),(0,Bt.setResponseValueAndErrors)(t,"maximum",n.value,n.message,e));break;case"multipleOf":(0,Bt.setResponseValueAndErrors)(t,"multipleOf",n.value,n.message,e);break}return t}Li.parseNumberDef=$g});var nh=M(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.parseObjectDef=void 0;var rh=_e();function Hg(r,e){var t;let n=Object.assign(Object.assign({type:"object"},Object.entries(r.shape()).reduce((s,[i,a])=>{if(a===void 0||a._def===void 0)return s;let o=(0,rh.parseDef)(a._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]}));return o===void 0?s:{properties:Object.assign(Object.assign({},s.properties),{[i]:o}),required:a.isOptional()?s.required:[...s.required,i]}},{properties:{},required:[]})),{additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(t=(0,rh.parseDef)(r.catchall._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&t!==void 0?t:!0});return n.required.length||delete n.required,n}Di.parseObjectDef=Hg});var ih=M(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.parseOptionalDef=void 0;var sh=_e(),Qg=(r,e)=>{var t;if(e.currentPath.toString()===((t=e.propertyPath)===null||t===void 0?void 0:t.toString()))return(0,sh.parseDef)(r.innerType._def,e);let n=(0,sh.parseDef)(r.innerType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"anyOf","1"]}));return n?{anyOf:[{not:{}},n]}:{}};qi.parseOptionalDef=Qg});var ah=M(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.parsePipelineDef=void 0;var su=_e(),Jg=(r,e)=>{if(e.pipeStrategy==="input")return(0,su.parseDef)(r.in._def,e);let t=(0,su.parseDef)(r.in._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf","0"]})),n=(0,su.parseDef)(r.out._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"allOf",t?"1":"0"]}));return{allOf:[t,n].filter(s=>s!==void 0)}};Ui.parsePipelineDef=Jg});var oh=M(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.parsePromiseDef=void 0;var Yg=_e();function Wg(r,e){return(0,Yg.parseDef)(r.type._def,e)}Vi.parsePromiseDef=Wg});var au=M(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.parseStringDef=void 0;var on=nn();function Gg(r,e){let t={type:"string"};if(r.checks)for(let n of r.checks)switch(n.kind){case"min":(0,on.setResponseValueAndErrors)(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e);break;case"max":(0,on.setResponseValueAndErrors)(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"email":an(t,"email",n.message,e);break;case"url":an(t,"uri",n.message,e);break;case"uuid":an(t,"uuid",n.message,e);break;case"regex":zt(t,n.regex.source,n.message,e);break;case"cuid":zt(t,"^c[^\\s-]{8,}$",n.message,e);break;case"cuid2":zt(t,"^[a-z][a-z0-9]*$",n.message,e);break;case"startsWith":zt(t,"^"+iu(n.value),n.message,e);break;case"endsWith":zt(t,iu(n.value)+"$",n.message,e);break;case"datetime":an(t,"date-time",n.message,e);break;case"length":(0,on.setResponseValueAndErrors)(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e),(0,on.setResponseValueAndErrors)(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"includes":{zt(t,iu(n.value),n.message,e);break}case"ip":{n.version!=="v6"&&an(t,"ipv4",n.message,e),n.version!=="v4"&&an(t,"ipv6",n.message,e);break}case"emoji":zt(t,"/^(p{Extended_Pictographic}|p{Emoji_Component})+$/u",n.message,e);break;case"ulid":{zt(t,"/[0-9A-HJKMNP-TV-Z]{26}/",n.message,e);break}case"toLowerCase":case"toUpperCase":case"trim":break;default:(s=>{})(n)}return t}Fi.parseStringDef=Gg;var iu=r=>Array.from(r).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),an=(r,e,t,n)=>{var s;r.format||!((s=r.anyOf)===null||s===void 0)&&s.some(i=>i.format)?(r.anyOf||(r.anyOf=[]),r.format&&(r.anyOf.push(Object.assign({format:r.format},r.errorMessage&&n.errorMessages&&{errorMessage:{format:r.errorMessage.format}})),delete r.format,r.errorMessage&&(delete r.errorMessage.format,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.anyOf.push(Object.assign({format:e},t&&n.errorMessages&&{errorMessage:{format:t}}))):(0,on.setResponseValueAndErrors)(r,"format",e,t,n)},zt=(r,e,t,n)=>{var s;r.pattern||!((s=r.allOf)===null||s===void 0)&&s.some(i=>i.pattern)?(r.allOf||(r.allOf=[]),r.pattern&&(r.allOf.push(Object.assign({pattern:r.pattern},r.errorMessage&&n.errorMessages&&{errorMessage:{pattern:r.errorMessage.pattern}})),delete r.pattern,r.errorMessage&&(delete r.errorMessage.pattern,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.allOf.push(Object.assign({pattern:e},t&&n.errorMessages&&{errorMessage:{pattern:t}}))):(0,on.setResponseValueAndErrors)(r,"pattern",e,t,n)}});var lh=M(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.parseRecordDef=void 0;var ou=wi(),uh=_e(),Xg=au();function ew(r,e){var t,n,s,i,a;if(e.target==="openApi3"&&((t=r.keyType)===null||t===void 0?void 0:t._def.typeName)===ou.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:r.keyType._def.values,properties:r.keyType._def.values.reduce((u,l)=>{var d;return Object.assign(Object.assign({},u),{[l]:(d=(0,uh.parseDef)(r.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"properties",l]})))!==null&&d!==void 0?d:{}})},{}),additionalProperties:!1};let o={type:"object",additionalProperties:(n=(0,uh.parseDef)(r.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalProperties"]})))!==null&&n!==void 0?n:{}};if(e.target==="openApi3")return o;if(((s=r.keyType)===null||s===void 0?void 0:s._def.typeName)===ou.ZodFirstPartyTypeKind.ZodString&&(!((i=r.keyType._def.checks)===null||i===void 0)&&i.length)){let u=Object.entries((0,Xg.parseStringDef)(r.keyType._def,e)).reduce((l,[d,b])=>d==="type"?l:Object.assign(Object.assign({},l),{[d]:b}),{});return Object.assign(Object.assign({},o),{propertyNames:u})}else if(((a=r.keyType)===null||a===void 0?void 0:a._def.typeName)===ou.ZodFirstPartyTypeKind.ZodEnum)return Object.assign(Object.assign({},o),{propertyNames:{enum:r.keyType._def.values}});return o}Bi.parseRecordDef=ew});var dh=M(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.parseSetDef=void 0;var ch=nn(),tw=_e();function rw(r,e){let n={type:"array",uniqueItems:!0,items:(0,tw.parseDef)(r.valueType._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items"]}))};return r.minSize&&(0,ch.setResponseValueAndErrors)(n,"minItems",r.minSize.value,r.minSize.message,e),r.maxSize&&(0,ch.setResponseValueAndErrors)(n,"maxItems",r.maxSize.value,r.maxSize.message,e),n}zi.parseSetDef=rw});var ph=M(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.parseTupleDef=void 0;var uu=_e();function nw(r,e){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((t,n)=>(0,uu.parseDef)(t._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:(0,uu.parseDef)(r.rest._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"additionalItems"]}))}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((t,n)=>(0,uu.parseDef)(t._def,Object.assign(Object.assign({},e),{currentPath:[...e.currentPath,"items",`${n}`]}))).reduce((t,n)=>n===void 0?t:[...t,n],[])}}Ki.parseTupleDef=nw});var hh=M(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.parseUndefinedDef=void 0;function sw(){return{not:{}}}Zi.parseUndefinedDef=sw});var fh=M($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.parseUnknownDef=void 0;function iw(){return{}}$i.parseUnknownDef=iw});var _e=M(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.parseDef=void 0;var te=wi(),aw=kp(),ow=Np(),uw=Lp(),lw=Dp(),cw=qp(),dw=Up(),pw=Vp(),hw=Fp(),fw=Bp(),mw=zp(),yw=Zp(),bw=$p(),gw=Qp(),ww=Jp(),_w=Yp(),vw=Wp(),xw=eh(),Ow=th(),Pw=nh(),Aw=ih(),Tw=ah(),Ew=oh(),Iw=lh(),Cw=dh(),Sw=au(),jw=ph(),kw=hh(),Rw=nu(),Mw=fh();function mh(r,e,t=!1){let n=e.seen.get(r);if(n&&!t)return Nw(n,e);let s={def:r,path:e.currentPath,jsonSchema:void 0};e.seen.set(r,s);let i=Dw(r,r.typeName,e);return i&&qw(r,i),s.jsonSchema=i,i}Hi.parseDef=mh;var Nw=(r,e)=>{switch(e.$refStrategy){case"root":return{$ref:r.path.length===0?"":r.path.length===1?`${r.path[0]}/`:r.path.join("/")};case"relative":return{$ref:Lw(e.currentPath,r.path)};case"none":return r.path.length<e.currentPath.length&&r.path.every((t,n)=>e.currentPath[n]===t)?{}:r.jsonSchema}},Lw=(r,e)=>{let t=0;for(;t<r.length&&t<e.length&&r[t]===e[t];t++);return[(r.length-t).toString(),...e.slice(t)].join("/")},Dw=(r,e,t)=>{switch(e){case te.ZodFirstPartyTypeKind.ZodString:return(0,Sw.parseStringDef)(r,t);case te.ZodFirstPartyTypeKind.ZodNumber:return(0,Ow.parseNumberDef)(r,t);case te.ZodFirstPartyTypeKind.ZodObject:return(0,Pw.parseObjectDef)(r,t);case te.ZodFirstPartyTypeKind.ZodBigInt:return(0,uw.parseBigintDef)(r,t);case te.ZodFirstPartyTypeKind.ZodBoolean:return(0,lw.parseBooleanDef)();case te.ZodFirstPartyTypeKind.ZodDate:return(0,pw.parseDateDef)();case te.ZodFirstPartyTypeKind.ZodUndefined:return(0,kw.parseUndefinedDef)();case te.ZodFirstPartyTypeKind.ZodNull:return(0,vw.parseNullDef)(t);case te.ZodFirstPartyTypeKind.ZodArray:return(0,ow.parseArrayDef)(r,t);case te.ZodFirstPartyTypeKind.ZodUnion:case te.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,Rw.parseUnionDef)(r,t);case te.ZodFirstPartyTypeKind.ZodIntersection:return(0,yw.parseIntersectionDef)(r,t);case te.ZodFirstPartyTypeKind.ZodTuple:return(0,jw.parseTupleDef)(r,t);case te.ZodFirstPartyTypeKind.ZodRecord:return(0,Iw.parseRecordDef)(r,t);case te.ZodFirstPartyTypeKind.ZodLiteral:return(0,bw.parseLiteralDef)(r,t);case te.ZodFirstPartyTypeKind.ZodEnum:return(0,mw.parseEnumDef)(r);case te.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,ww.parseNativeEnumDef)(r);case te.ZodFirstPartyTypeKind.ZodNullable:return(0,xw.parseNullableDef)(r,t);case te.ZodFirstPartyTypeKind.ZodOptional:return(0,Aw.parseOptionalDef)(r,t);case te.ZodFirstPartyTypeKind.ZodMap:return(0,gw.parseMapDef)(r,t);case te.ZodFirstPartyTypeKind.ZodSet:return(0,Cw.parseSetDef)(r,t);case te.ZodFirstPartyTypeKind.ZodLazy:return mh(r.getter()._def,t);case te.ZodFirstPartyTypeKind.ZodPromise:return(0,Ew.parsePromiseDef)(r,t);case te.ZodFirstPartyTypeKind.ZodNaN:case te.ZodFirstPartyTypeKind.ZodNever:return(0,_w.parseNeverDef)();case te.ZodFirstPartyTypeKind.ZodEffects:return(0,fw.parseEffectsDef)(r,t);case te.ZodFirstPartyTypeKind.ZodAny:return(0,aw.parseAnyDef)();case te.ZodFirstPartyTypeKind.ZodUnknown:return(0,Mw.parseUnknownDef)();case te.ZodFirstPartyTypeKind.ZodDefault:return(0,hw.parseDefaultDef)(r,t);case te.ZodFirstPartyTypeKind.ZodBranded:return(0,cw.parseBrandedDef)(r,t);case te.ZodFirstPartyTypeKind.ZodCatch:return(0,dw.parseCatchDef)(r,t);case te.ZodFirstPartyTypeKind.ZodPipeline:return(0,Tw.parsePipelineDef)(r,t);case te.ZodFirstPartyTypeKind.ZodFunction:case te.ZodFirstPartyTypeKind.ZodVoid:case te.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(n=>{})(e)}},qw=(r,e)=>(r.description&&(e.description=r.description),e)});var yh=M(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getDefaultOptions=Kt.defaultOptions=void 0;Kt.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1};var Uw=r=>typeof r=="string"?Object.assign(Object.assign({},Kt.defaultOptions),{name:r}):Object.assign(Object.assign({},Kt.defaultOptions),r);Kt.getDefaultOptions=Uw});var bh=M(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.getRefs=void 0;var Vw=yh(),Fw=r=>{let e=(0,Vw.getDefaultOptions)(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return Object.assign(Object.assign({},e),{currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))})};Qi.getRefs=Fw});var wh=M(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.zodToJsonSchema=void 0;var gh=_e(),Bw=bh(),zw=(r,e)=>{var t;let n=(0,Bw.getRefs)(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[l,d])=>{var b;return Object.assign(Object.assign({},u),{[l]:(b=(0,gh.parseDef)(d._def,Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,l]}),!0))!==null&&b!==void 0?b:{}})},{}):void 0,i=typeof e=="string"?e:e?.name,a=(t=(0,gh.parseDef)(r._def,i===void 0?n:Object.assign(Object.assign({},n),{currentPath:[...n.basePath,n.definitionPath,i]}),!1))!==null&&t!==void 0?t:{},o=i===void 0?s?Object.assign(Object.assign({},a),{[n.definitionPath]:s}):a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:Object.assign(Object.assign({},s),{[i]:a})};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};Ji.zodToJsonSchema=zw});var vh=M(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.zodToJsonSchema=void 0;var _h=wh();Object.defineProperty(Kn,"zodToJsonSchema",{enumerable:!0,get:function(){return _h.zodToJsonSchema}});Kn.default=_h.zodToJsonSchema});To();function Zs(r,e){let t=0,n=0;for(let s=0;s<r.length;s++)t+=Math.min(r[s],e[s]),n+=r[s]+e[s];return 2*t/n}function $s(r,e){let t=0,n=0,s=0;for(let i=0;i<r.length;i++)t+=r[i]*r[i],n+=e[i]*e[i],s+=(r[i]-e[i])*(r[i]-e[i]);return s/(t+n)}function Hs(r,e){let t=0;for(let n=0;n<r.length;n++)t+=Math.min(r[n],e[n]);return 1-t}function Qs(r,e){let t=0,n=0,s=0;for(let i=0;i<r.length;i++)t+=r[i]*e[i],n+=r[i]*r[i],s+=e[i]*e[i];return t/(n+s-t)}function Js(r,e){let t=0,n=0;for(let s=0;s<r.length;s++)t+=Math.abs(r[s]-e[s]),n+=Math.min(r[s],e[s]);return t/n}function Ys(r,e){let t=0,n=0;for(let s=0;s<r.length;s++)t+=Math.min(r[s],e[s]),n+=r[s]+e[s];return 1-t/n}function Ws(r,e){let t=0;for(let n=0;n<r.length;n++)t+=(Math.sqrt(r[n])-Math.sqrt(e[n]))**2;return t}function Gs(r,e,t){if(t){let n=0,s=0;for(let i=0;i<r.length;i++)n+=r[i]&&e[i],s+=r[i]||e[i];return s===0?1:n/s}else{let n=0,s=0,i=0;for(let a=0;a<r.length;a++)n+=r[a],s+=e[a],i+=Math.min(r[a],e[a]);return 1-(n+s-2*i)/(n+s-i)}}var ei={};Ye(ei,{cosine:()=>Rn,czekanowski:()=>Zs,dice:()=>ko,intersection:()=>Ro,kulczynski:()=>Mo,kumarHassebrook:()=>Qs,motyka:()=>No,pearson:()=>Do,squaredChord:()=>qo,tanimoto:()=>Gs,tree:()=>jo});var jo={};Ye(jo,{createTree:()=>jn,getFunction:()=>Ny,treeSimilarity:()=>My});var Zd=De(zd()),$d=De(Kd());function jn(r,e={}){var t=r[0];let{minWindow:n=.16,threshold:s=.01,from:i=t[0],to:a=t[t.length-1]}=e;return Sn(r[0],r[1],i,a,n,s)}function Sn(r,e,t,n,s,i){if(n-t<s)return null;var a=(0,Zd.default)(r,t,$d.ascending);a<0&&(a=~a);for(var o=0,u=0,l=a;l<r.length&&!(r[l]>=n);l++)o+=e[l],u+=r[l]*e[l];return o<i||(u/=o,u-t<1e-6||n-u<1e-6)?null:u-t<s/4?Sn(r,e,u,n,s,i):n-u<s/4?Sn(r,e,t,u,s,i):new So(o,u,Sn(r,e,t,u,s,i),Sn(r,e,u,n,s,i))}var So=class{constructor(e,t,n,s){this.sum=e,this.center=t,this.left=n,this.right=s}};function kn(r,e,t={}){let{alpha:n=.1,beta:s=.33,gamma:i=.001}=t;if(r===null||e===null)return 0;Array.isArray(r)&&(r=jn(r)),Array.isArray(e)&&(e=jn(e));var a=n*Math.min(r.sum,e.sum)/Math.max(r.sum,e.sum)+(1-n)*Math.exp(-i*Math.abs(r.center-e.center));return s*a+(1-s)*(kn(r.left,e.left,t)+kn(r.right,e.right,t))/2}function My(r,e,t={}){return kn(r,e,t)}function Ny(r={}){return(e,t)=>kn(e,t,r)}function Rn(r,e){let t=0,n=0,s=0;for(let i=0;i<r.length;i++)t+=r[i]*e[i],n+=r[i]*r[i],s+=e[i]*e[i];return t/(Math.sqrt(n)*Math.sqrt(s))}function ko(r,e){return 1-$s(r,e)}function Ro(r,e){return 1-Hs(r,e)}function Mo(r,e){return 1/Js(r,e)}function No(r,e){return 1-Ys(r,e)}var Ly=Object.prototype.toString;function Hd(r){let e=Ly.call(r);return e.endsWith("Array]")&&!e.includes("Big")}function Qd(r){if(!Hd(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");for(var e=0,t=0;t<r.length;t++)e+=r[t];return e}function Lo(r){return Qd(r)/r.length}function Do(r,e){let t=Lo(r),n=Lo(e),s=new Array(r.length),i=new Array(e.length);for(let a=0;a<s.length;a++)s[a]=r[a]-t,i[a]=e[a]-n;return Rn(s,i)}function qo(r,e){return 1-Ws(r,e)}st();var Uo=class extends gs{constructor(e){super(),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.filter=e.filter}async getRelevantDocuments(e){return await this.vectorStore.similaritySearch(e,this.k,this.filter)}async addDocuments(e){await this.vectorStore.addDocuments(e)}},ti=class{constructor(e,t){Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async similaritySearch(e,t=4,n=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)).map(i=>i[0])}async similaritySearchWithScore(e,t=4,n=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)}static fromTexts(e,t,n,s){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t){return new Uo({vectorStore:this,k:e,filter:t})}};ri();var qr=class extends ti{constructor(e,{similarity:t,...n}={}){super(e,n),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=t??ei.cosine}async addDocuments(e){let t=e.map(({pageContent:n})=>n);return this.addVectors(await this.embeddings.embedDocuments(t),e)}async addVectors(e,t){let n=e.map((s,i)=>({content:t[i].pageContent,embedding:s,metadata:t[i].metadata}));this.memoryVectors=this.memoryVectors.concat(n)}async similaritySearchVectorWithScore(e,t){return this.memoryVectors.map((i,a)=>({similarity:this.similarity(e,i.embedding),index:a})).sort((i,a)=>i.similarity>a.similarity?-1:0).slice(0,t).map(i=>[new kt({metadata:this.memoryVectors[i.index].metadata,pageContent:this.memoryVectors[i.index].content}),i.similarity])}static async fromTexts(e,t,n,s){let i=[];for(let a=0;a<e.length;a+=1){let o=Array.isArray(t)?t[a]:t,u=new kt({pageContent:e[a],metadata:o});i.push(u)}return qr.fromDocuments(i,n,s)}static async fromDocuments(e,t,n){let s=new this(t,n);return await s.addDocuments(e),s}static async fromExistingIndex(e,t){return new this(e,t)}};var ii=De(gr(),1);wr();Tr();ro();kr();var ni=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new Ge(e??{})}};var si=class extends ni{constructor(e,t){super(e??{}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=e?.openAIApiKey??(typeof process<"u"?process.env?.OPENAI_API_KEY:void 0),s=e?.azureOpenAIApiKey??(typeof process<"u"?process.env?.AZURE_OPENAI_API_KEY:void 0);if(!s&&!n)throw new Error("(Azure) OpenAI API key not found");let i=e?.azureOpenAIApiInstanceName??(typeof process<"u"?process.env?.AZURE_OPENAI_API_INSTANCE_NAME:void 0),a=(e?.azureOpenAIApiEmbeddingsDeploymentName||e?.azureOpenAIApiDeploymentName)??(typeof process<"u"?process.env?.AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME||process.env?.AZURE_OPENAI_API_DEPLOYMENT_NAME:void 0),o=e?.azureOpenAIApiVersion??(typeof process<"u"?process.env?.AZURE_OPENAI_API_VERSION:void 0);if(this.modelName=e?.modelName??this.modelName,this.batchSize=e?.batchSize??this.batchSize,this.stripNewLines=e?.stripNewLines??this.stripNewLines,this.timeout=e?.timeout,this.azureOpenAIApiVersion=o,this.azureOpenAIApiKey=s,this.azureOpenAIApiInstanceName=i,this.azureOpenAIApiDeploymentName=a,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found")}this.clientConfig={apiKey:n,...t}}async embedDocuments(e){let t=On(this.stripNewLines?e.map(s=>s.replaceAll(`
`," ")):e,this.batchSize),n=[];for(let s=0;s<t.length;s+=1){let i=t[s],{data:a}=await this.embeddingWithRetry({model:this.modelName,input:i});for(let o=0;o<i.length;o+=1)n.push(a.data[o].embedding)}return n}async embedQuery(e){let{data:t}=await this.embeddingWithRetry({model:this.modelName,input:this.stripNewLines?e.replaceAll(`
`," "):e});return t.data[0].embedding}async embeddingWithRetry(e){if(!this.client){let n=this.azureOpenAIApiKey?`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}`:this.clientConfig.basePath,s=new ii.Configuration({...this.clientConfig,basePath:n,baseOptions:{timeout:this.timeout,adapter:pt()?void 0:Ue,...this.clientConfig.baseOptions}});this.client=new ii.OpenAIApi(s)}let t={};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.params={"api-version":this.azureOpenAIApiVersion,...t.params}),this.caller.call(this.client.createEmbedding.bind(this.client),e,t)}};ri();js();var Vo=class{constructor(e){if(Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),this.chunkSize=e?.chunkSize??this.chunkSize,this.chunkOverlap=e?.chunkOverlap??this.chunkOverlap,this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async createDocuments(e,t=[],n={}){let s=t.length>0?t:new Array(e.length).fill({}),{chunkHeader:i="",chunkOverlapHeader:a="(cont'd) ",appendChunkOverlapHeader:o=!1}=n,u=new Array;for(let l=0;l<e.length;l+=1){let d=e[l],b=1,v=null;for(let P of await this.splitText(d)){let m=i,T=0;if(v){let U=d.indexOf(P),w=d.indexOf(v)+v.length;T=(d.slice(w,U).match(/\n/g)||[]).length,o&&(m+=a)}b+=T;let j=(P.match(/\n/g)||[]).length,S=s[l].loc&&typeof s[l].loc=="object"?{...s[l].loc}:{};S.lines={from:b,to:b+j};let k={...s[l],loc:S};m+=P,u.push(new kt({pageContent:m,metadata:k})),b+=j,v=P}}return u}async splitDocuments(e,t={}){let n=e.filter(a=>a.pageContent!==void 0),s=n.map(a=>a.pageContent),i=n.map(a=>a.metadata);return this.createDocuments(s,i,t)}joinDocs(e,t){let n=e.join(t).trim();return n===""?null:n}mergeSplits(e,t){let n=[],s=[],i=0;for(let o of e){let u=o.length;if(i+u+(s.length>0?t.length:0)>this.chunkSize&&(i>this.chunkSize,s.length>0)){let l=this.joinDocs(s,t);for(l!==null&&n.push(l);i>this.chunkOverlap||i+u>this.chunkSize&&i>0;)i-=s[0].length,s.shift()}s.push(o),i+=u}let a=this.joinDocs(s,t);return a!==null&&n.push(a),n}};var Mn=class extends Vo{constructor(e){super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=e?.separators??this.separators}async splitText(e){let t=[],n=this.separators[this.separators.length-1];for(let a of this.separators){if(a===""){n=a;break}if(e.includes(a)){n=a;break}}let s;n?s=e.split(n):s=e.split("");let i=[];for(let a of s)if(a.length<this.chunkSize)i.push(a);else{if(i.length){let u=this.mergeSplits(i,n);t.push(...u),i=[]}let o=await this.splitText(a);t.push(...o)}if(i.length){let a=this.mergeSplits(i,n);t.push(...a)}return t}};Se();Me();Wo();Me();be();Nr();Nr();st();li();Gt();be();Se();Me();Kr();Se();Yo();Kr();Me();Gt();be();be();be();Se();Me();Lr();Mr();be();Se();Me();Kr();Se();Kr();var Hr=class extends se{get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"retriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.retriever=e.retriever,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=e.inputKey??this.inputKey,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);let n=e[this.inputKey],s=await this.retriever.getRelevantDocuments(n),i={question:n,input_documents:s},a=await this.combineDocumentsChain.call(i,t?.getChild());return this.returnSourceDocuments?{...a,sourceDocuments:s}:a}_chainType(){return"retrieval_qa"}static async deserialize(e,t){throw new Error("Not implemented")}serialize(){throw new Error("Not implemented")}static fromLLM(e,t,n){let s=er(e,{prompt:n?.prompt});return new this({retriever:t,combineDocumentsChain:s,...n})}};Se();Me();ai();be();var mp=De(gr(),1);Se();Tr();kr();Se();Me();Vr();Me();be();var Zw=De(vh(),1);Vr();be();globalThis.langchain={OpenAI:Dr,MemoryVectorStore:qr,OpenAIEmbeddings:si,RecursiveCharacterTextSplitter:Mn,RetrievalQAChain:Hr,loadQARefineChain:Jo};})();
