{"version":3,"file":"selection.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://Nectar/./src/selection.js"],"sourcesContent":["chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.method === 'alert') {\n    console.error(request.data)\n    alert(request.data)\n  } else if (request.method === 'getSelection') {\n    sendResponse({data: window.getSelection().toString()})\n  } else if (request.method === 'clearSelection') {\n    const elem = document.activeElement\n\n    if (elem && !elem.isContentEditable) {\n      const end = elem.selectionEnd\n      window.getSelection().removeAllRanges()\n      elem.selectionStart = end\n      elem.selectionEnd = elem.selectionStart\n    } else {\n      const sel = window.getSelection()\n      if (sel.rangeCount) {\n        const range = sel.getRangeAt(0)\n        range.collapse()\n      }\n    }\n  } else if (request.method === 'replaceSelection' && request.data) {\n    const elem = document.activeElement\n\n    if (elem && elem.isContentEditable) {\n      // elem is contentEditable\n      insertIntoContentEditable(request.data || '')\n    } else if (elem) {\n      insertIntoInput(elem, request.data || '')\n    }\n  } else {\n    sendResponse({}) // snub them.\n  }\n})\n\nconst insertIntoContentEditable = (content) => {\n  const sel = window.getSelection()\n  if (sel.rangeCount) {\n    const range = sel.getRangeAt(0)\n    range.deleteContents()\n    const node = document.createTextNode(content)\n    range.insertNode(node)\n    range.collapse()\n  }\n}\n\nconst insertIntoInput = (elem, content) => {\n  // elem is an input or textarea element.\n  const start = elem.selectionStart\n  const end = elem.selectionEnd\n  elem.value = elem.value.slice(0, start) + content + elem.value.substring(end)\n  // Set cursor after selected text\n  elem.selectionStart = start + content.length\n  elem.selectionEnd = elem.selectionStart\n}\n"],"names":[],"sourceRoot":""}